  [1m[35m (44.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "portal_api_test"[0m
  [1m[35m (89.6ms)[0m  [1m[35mCREATE DATABASE "portal_api_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (18.7ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "remember_created_at" timestamp, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" json, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_confirmation_token" ON "customers" ("confirmation_token")[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_reset_password_token" ON "customers" ("reset_password_token")[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_uid_and_provider" ON "customers" ("uid", "provider")[0m
  [1m[35m (26.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240712160234)[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2024-07-12 16:56:52.805491"], ["updated_at", "2024-07-12 16:56:52.805491"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "e88249d79a27b10853f75b7de6bb49abbd1cccd0"], ["created_at", "2024-07-12 16:56:52.817289"], ["updated_at", "2024-07-12 16:56:52.817289"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 16:56:52 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"_json"=>"John", "registration"=>{"_json"=>"John"}}
[31mUnpermitted parameters: :_json, :registration[0m
Filter chain halted as :validate_sign_up_params rendered or redirected
Completed 422 Unprocessable Entity in 39ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 11687)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:07:41 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"_json"=>"John", "registration"=>{"_json"=>"John"}}
[31mUnpermitted parameters: :_json, :registration[0m
Filter chain halted as :validate_sign_up_params rendered or redirected
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 3290)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:09:38 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameters: :name, :registration[0m
[31mUnpermitted parameters: :name, :registration[0m
[31mUnpermitted parameters: :name, :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$lep0lv6wO8NyHuCgYo5TyuRR23kDHMdh34opZVoFG8AYFLlnEiB6W"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:09:38.230180"], ["updated_at", "2024-07-12 17:09:38.230180"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SJrp9prTXShjJUsGiv9rZA\\\":{\\\"token\\\":\\\"$2a$04$Sg05d9N3DPdUQCSleUKAlOuy5hUUanX/jaPeViGJJ60OdM9R.4ANu\\\",\\\"expiry\\\":1722013778}}\""], ["updated_at", "2024-07-12 17:09:38.233706"], ["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SJrp9prTXShjJUsGiv9rZA\\\":{\\\"token\\\":\\\"$2a$04$EeGYJNvrjpvxAB4jmLg0ROn5QlbqB0oNV2/MD/PoKJqoCd/gpWSLG\\\",\\\"expiry\\\":1722013778,\\\"previous_token\\\":\\\"$2a$04$Sg05d9N3DPdUQCSleUKAlOuy5hUUanX/jaPeViGJJ60OdM9R.4ANu\\\",\\\"updated_at\\\":\\\"2024-07-12T17:09:38Z\\\"}}\""], ["updated_at", "2024-07-12 17:09:38.239672"], ["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 10.5ms | Allocations: 19181)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:18:19 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameters: :name, :registration[0m
[31mUnpermitted parameters: :name, :registration[0m
[31mUnpermitted parameters: :name, :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6rgsA73JrXBIOReP98MaJ.l4f6Ne8xT/oe7pFwAJX/8HnkrdhOSdS"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:18:19.417673"], ["updated_at", "2024-07-12 17:18:19.417673"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"TXWGynyvvmTjGC7dYO1yeg\\\":{\\\"token\\\":\\\"$2a$04$wJkjBqk8wPGT11GXhj2ptO4rX6Tlx98IMjOWoKqwz5o3kENyIMmPm\\\",\\\"expiry\\\":1722014299}}\""], ["updated_at", "2024-07-12 17:18:19.421496"], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"TXWGynyvvmTjGC7dYO1yeg\\\":{\\\"token\\\":\\\"$2a$04$FBriN19fMm2fPXcfWjXCeef9m8YqO6zr7yMYjsikHBkcSJN3x.Kwm\\\",\\\"expiry\\\":1722014299,\\\"previous_token\\\":\\\"$2a$04$wJkjBqk8wPGT11GXhj2ptO4rX6Tlx98IMjOWoKqwz5o3kENyIMmPm\\\",\\\"updated_at\\\":\\\"2024-07-12T17:18:19Z\\\"}}\""], ["updated_at", "2024-07-12 17:18:19.427494"], ["id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 10.7ms | Allocations: 19176)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:22:11 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$b7iIxiNtKsTVJaP7r86PIehEaig9q/Bo6zGtzRFswW0wDqk8srOzS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:22:11.066724"], ["updated_at", "2024-07-12 17:22:11.066724"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mJzFCzM1aYKobDhZcxQMkQ\\\":{\\\"token\\\":\\\"$2a$04$/YF4zKDJ1rZQk3of3pZ7D.yelCvQAAIAXx6VDj.oI.Te1Zg88eHVG\\\",\\\"expiry\\\":1722014531}}\""], ["updated_at", "2024-07-12 17:22:11.070124"], ["id", 3]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mJzFCzM1aYKobDhZcxQMkQ\\\":{\\\"token\\\":\\\"$2a$04$zZV.02deovKO2/O6zQuVuOcKla0tgymEZWjrTtbpteW3va9gvUz6q\\\",\\\"expiry\\\":1722014531,\\\"previous_token\\\":\\\"$2a$04$/YF4zKDJ1rZQk3of3pZ7D.yelCvQAAIAXx6VDj.oI.Te1Zg88eHVG\\\",\\\"updated_at\\\":\\\"2024-07-12T17:22:11Z\\\"}}\""], ["updated_at", "2024-07-12 17:22:11.075786"], ["id", 3]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 9.0ms | Allocations: 19253)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:26:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Ffa9zSBijgRQl.dGIHak2el4EK/2Jw2u53Ae8lUT7hAHJeChh3GbG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:26:17.596423"], ["updated_at", "2024-07-12 17:26:17.596423"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"QW6alAcGOde9Pd8xiJKBRQ\\\":{\\\"token\\\":\\\"$2a$04$gkRjW2JqwwIjPeeQNZzVKe4J5YwbJ5.d22NUAXAQagi461SHVQI0O\\\",\\\"expiry\\\":1722014777}}\""], ["updated_at", "2024-07-12 17:26:17.599680"], ["id", 4]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"QW6alAcGOde9Pd8xiJKBRQ\\\":{\\\"token\\\":\\\"$2a$04$4QewUpNqoDpCnJvzlSKE7O2Gac7qT4oz7f54P9pZ1MvC02noHbgSu\\\",\\\"expiry\\\":1722014777,\\\"previous_token\\\":\\\"$2a$04$gkRjW2JqwwIjPeeQNZzVKe4J5YwbJ5.d22NUAXAQagi461SHVQI0O\\\",\\\"updated_at\\\":\\\"2024-07-12T17:26:17Z\\\"}}\""], ["updated_at", "2024-07-12 17:26:17.605584"], ["id", 4]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 8.3ms | Allocations: 19253)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:26:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gY4f/CLQVtU5KWlRTW34HukvxyDz6n2w5L16i/q5QPM2FjNcJC4T2"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:26:17.621598"], ["updated_at", "2024-07-12 17:26:17.621598"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"C02DroUIfucc2Nout8yhWA\\\":{\\\"token\\\":\\\"$2a$04$pNhJDVGR7vt5qe78VxLYpewXKvUE6AnuF/hhyu3XQZKAbLXNmXKE6\\\",\\\"expiry\\\":1722014777}}\""], ["updated_at", "2024-07-12 17:26:17.623903"], ["id", 5]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"C02DroUIfucc2Nout8yhWA\\\":{\\\"token\\\":\\\"$2a$04$wKJhpZjCjqTLSafSE24/Eu3zQ7Jt6H9YjsJ7NzSvxHe8RaSKxkrV2\\\",\\\"expiry\\\":1722014777,\\\"previous_token\\\":\\\"$2a$04$pNhJDVGR7vt5qe78VxLYpewXKvUE6AnuF/hhyu3XQZKAbLXNmXKE6\\\",\\\"updated_at\\\":\\\"2024-07-12T17:26:17Z\\\"}}\""], ["updated_at", "2024-07-12 17:26:17.628792"], ["id", 5]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.7ms | Allocations: 3173)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:26:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2013)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:26:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1743)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (93.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "portal_api_test"[0m
  [1m[35m (46.3ms)[0m  [1m[35mCREATE DATABASE "portal_api_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  [1m[35m (26.7ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "remember_created_at" timestamp, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "name" character varying NOT NULL, "nickname" character varying, "image" character varying, "email" character varying NOT NULL, "tokens" json, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_confirmation_token" ON "customers" ("confirmation_token")[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_reset_password_token" ON "customers" ("reset_password_token")[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_customers_on_uid_and_provider" ON "customers" ("uid", "provider")[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240712160234)[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2024-07-12 17:30:49.794740"], ["updated_at", "2024-07-12 17:30:49.794740"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f099cb1b51f861d83093a0b41b274f31f745d5d1"], ["created_at", "2024-07-12 17:30:49.816899"], ["updated_at", "2024-07-12 17:30:49.816899"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:30:49 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.1ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3MYR021I4iolaZ8DfdjSMuf4qX34mZqLN1uPMG4WLyAybA5X71imi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:30:49.982066"], ["updated_at", "2024-07-12 17:30:49.982066"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"yq5C5tpJFCPmn4bPBIp_vA\\\":{\\\"token\\\":\\\"$2a$04$ratlNNlqNIHRhiCjdeLizOa0m6wcWISgwAL3dPfFp5UKaLahLfjKO\\\",\\\"expiry\\\":1722015049}}\""], ["updated_at", "2024-07-12 17:30:49.986490"], ["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"yq5C5tpJFCPmn4bPBIp_vA\\\":{\\\"token\\\":\\\"$2a$04$FF6Eh2bu4Tp0jj3yhvxgNO/xUx0wT4MkWHySUhabavwSIAC5Es0Ea\\\",\\\"expiry\\\":1722015049,\\\"previous_token\\\":\\\"$2a$04$ratlNNlqNIHRhiCjdeLizOa0m6wcWISgwAL3dPfFp5UKaLahLfjKO\\\",\\\"updated_at\\\":\\\"2024-07-12T17:30:49Z\\\"}}\""], ["updated_at", "2024-07-12 17:30:49.993148"], ["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 11.2ms | Allocations: 19653)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:30:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$yAYK94jjzh4poWVTAgaTc.O4Ohbzey2kDfLs03Bam3WvwSADin/Tm"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:30:50.009728"], ["updated_at", "2024-07-12 17:30:50.009728"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.4ms | Allocations: 1338)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:30:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1980)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:30:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1743)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:34:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9JDTvTgtY/6k6Zfu/v2Z1O2WZUkBKZGT3eOV27IpCL3h3qiNoB1GK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:34:18.532259"], ["updated_at", "2024-07-12 17:34:18.532259"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"VJD3UAT1r5RE-mjfTZdT6w\\\":{\\\"token\\\":\\\"$2a$04$sh2qWpP1BHrmfUrskOdm7OYkKnvuW8gdweRF8poRAdhqQAeSrQPvW\\\",\\\"expiry\\\":1722015258}}\""], ["updated_at", "2024-07-12 17:34:18.535586"], ["id", 3]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"VJD3UAT1r5RE-mjfTZdT6w\\\":{\\\"token\\\":\\\"$2a$04$oKIi4gS9MMueL6h718dyBOWmwqq9Jjgr9pHI.lBlvV0YANDIoR64S\\\",\\\"expiry\\\":1722015258,\\\"previous_token\\\":\\\"$2a$04$sh2qWpP1BHrmfUrskOdm7OYkKnvuW8gdweRF8poRAdhqQAeSrQPvW\\\",\\\"updated_at\\\":\\\"2024-07-12T17:34:18Z\\\"}}\""], ["updated_at", "2024-07-12 17:34:18.541993"], ["id", 3]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 8.9ms | Allocations: 19284)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:34:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 2050)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:34:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1745)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:34:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1749)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:40:28 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$WptOWh1/oXrFwcoRVqK7zeL14e0B0sYz/GBFnOhtQAg/bpxSUtjTm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:40:29.015150"], ["updated_at", "2024-07-12 17:40:29.015150"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"saFT2jM4NRvzw3hnsqWbVQ\\\":{\\\"token\\\":\\\"$2a$04$oRNFoZgKUIytfVdwTtmyAOKmTRviQ.IzhQbBnLDl0/IktKlvH9xia\\\",\\\"expiry\\\":1722015629}}\""], ["updated_at", "2024-07-12 17:40:29.018188"], ["id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"saFT2jM4NRvzw3hnsqWbVQ\\\":{\\\"token\\\":\\\"$2a$04$nlzWNuXvj77dekIrhc0ITumqZexvRAPhyCwhjengYyPuVU0hL/leq\\\",\\\"expiry\\\":1722015629,\\\"previous_token\\\":\\\"$2a$04$oRNFoZgKUIytfVdwTtmyAOKmTRviQ.IzhQbBnLDl0/IktKlvH9xia\\\",\\\"updated_at\\\":\\\"2024-07-12T17:40:29Z\\\"}}\""], ["updated_at", "2024-07-12 17:40:29.024505"], ["id", 4]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 8.5ms | Allocations: 19285)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:40:29 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2050)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:40:29 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1745)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:40:29 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1748)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:46:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3cbU4U4FykFnJuEcAaX1pOLFUfA1aIzo3s9KrabRZuhfg58lgl66W"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:46:31.287703"], ["updated_at", "2024-07-12 17:46:31.287703"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SLOf6njdiw6gFraiBHChwA\\\":{\\\"token\\\":\\\"$2a$04$l9/yEFhWZPToFren6Nnlre3pggowgVALqUiUyRDr.KmNqEjHKk4cW\\\",\\\"expiry\\\":1722015991}}\""], ["updated_at", "2024-07-12 17:46:31.291018"], ["id", 5]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SLOf6njdiw6gFraiBHChwA\\\":{\\\"token\\\":\\\"$2a$04$woUAiI0B9SAPyHwttfC/POspPWWhaHQPL32w6F.r2kQvMBxLnnBYG\\\",\\\"expiry\\\":1722015991,\\\"previous_token\\\":\\\"$2a$04$l9/yEFhWZPToFren6Nnlre3pggowgVALqUiUyRDr.KmNqEjHKk4cW\\\",\\\"updated_at\\\":\\\"2024-07-12T17:46:31Z\\\"}}\""], ["updated_at", "2024-07-12 17:46:31.297220"], ["id", 5]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 10.1ms | Allocations: 19282)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:46:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2050)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:46:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1745)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:46:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1748)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$vZLbE0Ws8kQMhgrbawZU7eq2o5svk.RjjOFrTy1kfUKl2MlPUThSO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:46:31.335719"], ["updated_at", "2024-07-12 17:46:31.335719"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:46:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 26ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1802)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:53:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$SVElq8I70Py0onUE1uadO.PigLQ9NjjaPO9.8jy8A6VRna56nt6mC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:53:23.081257"], ["updated_at", "2024-07-12 17:53:23.081257"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"6nRtVUxHTU_eS6GS9XH-YQ\\\":{\\\"token\\\":\\\"$2a$04$aLcQB6upib4MlOFG2UYDyuFCON5/plEvGn/ujL2B10EYjO0Xbh3rG\\\",\\\"expiry\\\":1722016403}}\""], ["updated_at", "2024-07-12 17:53:23.084479"], ["id", 7]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"6nRtVUxHTU_eS6GS9XH-YQ\\\":{\\\"token\\\":\\\"$2a$04$cr3SOD.UHApweMaPhh2zrOgJevvcGsPK9JdDKAgVDPFZMzfQrorLG\\\",\\\"expiry\\\":1722016403,\\\"previous_token\\\":\\\"$2a$04$aLcQB6upib4MlOFG2UYDyuFCON5/plEvGn/ujL2B10EYjO0Xbh3rG\\\",\\\"updated_at\\\":\\\"2024-07-12T17:53:23Z\\\"}}\""], ["updated_at", "2024-07-12 17:53:23.090604"], ["id", 7]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 9.8ms | Allocations: 19282)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:53:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2050)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:53:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1745)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:53:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1748)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$caFiirpuYYjGjKdxtk2R2.wd/VxT8K9.wu5kx42QkIcJ8PT/mzXvm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:53:23.127569"], ["updated_at", "2024-07-12 17:53:23.127569"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:53:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 26ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1802)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$GkkVQ1v92.l.rGtuEoBwA.YxtlFDbdVkiBYsUAD.0p.VZOiQWCmvK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:53:23.164359"], ["updated_at", "2024-07-12 17:53:23.164359"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:53:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2334)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:54:55 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$bTAs2.TBFOQ7A.DLMuX34.fLcLvLbQBXkYI93q0XuTydpJ6h36PSS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:54:55.610058"], ["updated_at", "2024-07-12 17:54:55.610058"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"RkfwCxygat9Do1SwOJH3CQ\\\":{\\\"token\\\":\\\"$2a$04$R86SOKjHJDe9CIDbWA4yg.RkSN7AWlDS.aLHcHceqtsVSTQIvRt0y\\\",\\\"expiry\\\":1722016495}}\""], ["updated_at", "2024-07-12 17:54:55.613351"], ["id", 10]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"RkfwCxygat9Do1SwOJH3CQ\\\":{\\\"token\\\":\\\"$2a$04$pFZmp5K7B0y9lz/mNixDcOYosVIyTARKZ05HGYrPs9p9iCcfbJBNK\\\",\\\"expiry\\\":1722016495,\\\"previous_token\\\":\\\"$2a$04$R86SOKjHJDe9CIDbWA4yg.RkSN7AWlDS.aLHcHceqtsVSTQIvRt0y\\\",\\\"updated_at\\\":\\\"2024-07-12T17:54:55Z\\\"}}\""], ["updated_at", "2024-07-12 17:54:55.620449"], ["id", 10]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 63ms (Views: 0.2ms | ActiveRecord: 10.7ms | Allocations: 19283)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:54:55 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2050)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:54:55 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1745)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:54:55 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1748)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6ckT64ahVEpGUmeMZZYOKujXSFmNif8ccM.y.Bf5jrnxms.IVJHWa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:54:55.664168"], ["updated_at", "2024-07-12 17:54:55.664168"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:54:55 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1802)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$1KOlD2CyY8SJdSFccxTn5eu.Tu.es1GcqCb2oJHNrdFxII67OGBCK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:54:55.676512"], ["updated_at", "2024-07-12 17:54:55.676512"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-12 17:54:55 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ZusiM2UgYi7HelnbaFwbcw\\\":{\\\"token\\\":\\\"$2a$04$F66eKVX6ICd.i4Li/DXKuel0YPhe5QQjpsVzW4OAnBKF9VYgfHomi\\\",\\\"expiry\\\":1722016495}}\""], ["updated_at", "2024-07-12 17:54:55.688243"], ["id", 12]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ZusiM2UgYi7HelnbaFwbcw\\\":{\\\"token\\\":\\\"$2a$04$2gQ7dCBAbVvqsQ3zkMOZOu.oOn71SL8qvdQBkA4JawkSdgervQKm.\\\",\\\"expiry\\\":1722016495,\\\"previous_token\\\":\\\"$2a$04$F66eKVX6ICd.i4Li/DXKuel0YPhe5QQjpsVzW4OAnBKF9VYgfHomi\\\",\\\"updated_at\\\":\\\"2024-07-12T17:54:55Z\\\"}}\""], ["updated_at", "2024-07-12 17:54:55.693838"], ["id", 12]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.7ms | Allocations: 3352)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:56:52 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$KjdzkfwAKS.fy68eulTgJOlc.Nql6VB.ralfjjBv0lF3fcNIo9zS2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:56:52.660234"], ["updated_at", "2024-07-12 17:56:52.660234"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"4iunXS8TiRCo-5B4oTPe4Q\\\":{\\\"token\\\":\\\"$2a$04$zryYJGZlhVSO2WRdWD03teKkvoKjAAqgSu/alLpHTouz5iFHxCDbK\\\",\\\"expiry\\\":1722016612}}\""], ["updated_at", "2024-07-12 17:56:52.663503"], ["id", 13]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"4iunXS8TiRCo-5B4oTPe4Q\\\":{\\\"token\\\":\\\"$2a$04$JexB5FJCA55J25BBJmi0dunL1PJxhsF3JnZbr5Ya9tjXIf1FRW85a\\\",\\\"expiry\\\":1722016612,\\\"previous_token\\\":\\\"$2a$04$zryYJGZlhVSO2WRdWD03teKkvoKjAAqgSu/alLpHTouz5iFHxCDbK\\\",\\\"updated_at\\\":\\\"2024-07-12T17:56:52Z\\\"}}\""], ["updated_at", "2024-07-12 17:56:52.669740"], ["id", 13]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 10.5ms | Allocations: 19287)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:56:52 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2050)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:56:52 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1745)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:56:52 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1748)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$mRBij/Q6lUjDhS.9Wy5GQupV5v.qCGVy4xByiVtQR8toFix4jiypa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:56:52.707164"], ["updated_at", "2024-07-12 17:56:52.707164"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:56:52 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1802)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$SxMNx8yfj7yTto1AlXHepeAmOY96dRXMq2lFt61FBK7yRdxRfR8j6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:56:52.743153"], ["updated_at", "2024-07-12 17:56:52.743153"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-12 17:56:52 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"aG0n9bIpczL6Ik8TNifYzQ\\\":{\\\"token\\\":\\\"$2a$04$AkejoxIctv6bMpfJhdNl0OC7nbqunXE.TZ1b4txSbR/uxOYTzZhem\\\",\\\"expiry\\\":1722016612}}\""], ["updated_at", "2024-07-12 17:56:52.754500"], ["id", 15]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"aG0n9bIpczL6Ik8TNifYzQ\\\":{\\\"token\\\":\\\"$2a$04$s/MlTa1d8t.2K03FXgaGJeGvp535yvlAPil.MiKS/wqH41P7Nw0eW\\\",\\\"expiry\\\":1722016612,\\\"previous_token\\\":\\\"$2a$04$AkejoxIctv6bMpfJhdNl0OC7nbqunXE.TZ1b4txSbR/uxOYTzZhem\\\",\\\"updated_at\\\":\\\"2024-07-12T17:56:52Z\\\"}}\""], ["updated_at", "2024-07-12 17:56:52.760544"], ["id", 15]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 3352)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7CWGB.EeL5IHkm3o7bJGKedptBkkjejO1AkeWzIoF1IlW4Pg5IP/W"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:56:52.767615"], ["updated_at", "2024-07-12 17:56:52.767615"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-12 17:56:52 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 613)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:58:58 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dhmM/YgCcql1HSdjvhQQGO3ZuzNfU4BlHocpMHlU3kGsMZ98PT5B."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:58:58.273434"], ["updated_at", "2024-07-12 17:58:58.273434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"j_i5jgn6a5n465UmP7bg-w\\\":{\\\"token\\\":\\\"$2a$04$eEAlTcR3VebEyeIv4wo4Ve/hWEa7BrSPv9CsvUvSerxarLPOb8qZ2\\\",\\\"expiry\\\":1722016738}}\""], ["updated_at", "2024-07-12 17:58:58.276506"], ["id", 17]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"j_i5jgn6a5n465UmP7bg-w\\\":{\\\"token\\\":\\\"$2a$04$dIU6srS4wmsbV4WBqzX4yu9XZPuT.3EFm0fhxEqYWIxJckyJJ69dS\\\",\\\"expiry\\\":1722016738,\\\"previous_token\\\":\\\"$2a$04$eEAlTcR3VebEyeIv4wo4Ve/hWEa7BrSPv9CsvUvSerxarLPOb8qZ2\\\",\\\"updated_at\\\":\\\"2024-07-12T17:58:58Z\\\"}}\""], ["updated_at", "2024-07-12 17:58:58.282168"], ["id", 17]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.3ms | ActiveRecord: 8.4ms | Allocations: 19288)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:58:58 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2050)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:58:58 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1745)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:58:58 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1748)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$72y74AXQLI9Jerg2jnVHSOM9eT2YMER3AMQAGwUPPqnCOOmzDnTh6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:58:58.321075"], ["updated_at", "2024-07-12 17:58:58.321075"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-12 17:58:58 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 28ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1802)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$HMt5cu6nllGMtpY68G/N8e/9BLeA5XPe5Cl8pPvX0zvHS0zZ/keB."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:58:58.359762"], ["updated_at", "2024-07-12 17:58:58.359762"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-12 17:58:58 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"8KJHL04qK1cvE-8uoA4NPQ\\\":{\\\"token\\\":\\\"$2a$04$yc.g99GzmicbcUEiWcZ5juK6jPZhueCb5moUFQQkTMXwYA2BVqdya\\\",\\\"expiry\\\":1722016738}}\""], ["updated_at", "2024-07-12 17:58:58.373184"], ["id", 19]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"8KJHL04qK1cvE-8uoA4NPQ\\\":{\\\"token\\\":\\\"$2a$04$BSV3bFp2YUtXqllxj4anYOQDtAEBCMqeu8onESogqTqOQEmwHMgUa\\\",\\\"expiry\\\":1722016738,\\\"previous_token\\\":\\\"$2a$04$yc.g99GzmicbcUEiWcZ5juK6jPZhueCb5moUFQQkTMXwYA2BVqdya\\\",\\\"updated_at\\\":\\\"2024-07-12T17:58:58Z\\\"}}\""], ["updated_at", "2024-07-12 17:58:58.379597"], ["id", 19]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 3352)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$LZAy5N3I2Km378YUKpLHKOzdQpyG91uPCr6xknRYDcgU3TtGFd7OK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-12 17:58:58.388219"], ["updated_at", "2024-07-12 17:58:58.388219"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-12 17:58:58 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 613)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:44:40 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$zIN5AZ9hZb4d6PYehetwa.w/Zgqc2qolG6uoEXBMdvXm8FgPlXkwK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:44:40.993125"], ["updated_at", "2024-07-13 12:44:40.993125"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.9ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DjuoXxAltTSyEa-p0a_l8Q\\\":{\\\"token\\\":\\\"$2a$04$687qkk3/kj6OI3DIB32F7ubKlFKtkrg0kixX961vGjzIPOCKu.SJa\\\",\\\"expiry\\\":1722084280}}\""], ["updated_at", "2024-07-13 12:44:40.997482"], ["id", 21]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DjuoXxAltTSyEa-p0a_l8Q\\\":{\\\"token\\\":\\\"$2a$04$c939jIh4SoR9S.1zutVnvOEiPbgvOrhIrmikJnW47vVHJzmuGxV/O\\\",\\\"expiry\\\":1722084281,\\\"previous_token\\\":\\\"$2a$04$687qkk3/kj6OI3DIB32F7ubKlFKtkrg0kixX961vGjzIPOCKu.SJa\\\",\\\"updated_at\\\":\\\"2024-07-13T12:44:41Z\\\"}}\""], ["updated_at", "2024-07-13 12:44:41.005760"], ["id", 21]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 67ms (Views: 0.2ms | ActiveRecord: 14.1ms | Allocations: 17004)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:44:41 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:44:41 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:44:41 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$oP812S.rjpLbkV0jFkYzD.AJcko9q2Nr.R6O84dppaJyt11ii6/G2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:44:41.053917"], ["updated_at", "2024-07-13 12:44:41.053917"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:44:41 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$SK2S1dNnMnFMeoKbEem/o.s9iORMp6k0WUAbdK7DEBLAU8SoXAEEi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:44:41.067757"], ["updated_at", "2024-07-13 12:44:41.067757"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 12:44:41 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mfDzeGnLeI4oUSoLU65HOQ\\\":{\\\"token\\\":\\\"$2a$04$qpKuqMWgsgBkNuHibnrsr.h8cVa0BeV8qcYhanQJ9eVSgniLKUL6e\\\",\\\"expiry\\\":1722084281}}\""], ["updated_at", "2024-07-13 12:44:41.078944"], ["id", 23]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mfDzeGnLeI4oUSoLU65HOQ\\\":{\\\"token\\\":\\\"$2a$04$VAX9ALNdx1AAoahWIfKemuNBSkvZu9GkCNYv/dig6GnqAJdZnsObO\\\",\\\"expiry\\\":1722084281,\\\"previous_token\\\":\\\"$2a$04$qpKuqMWgsgBkNuHibnrsr.h8cVa0BeV8qcYhanQJ9eVSgniLKUL6e\\\",\\\"updated_at\\\":\\\"2024-07-13T12:44:41Z\\\"}}\""], ["updated_at", "2024-07-13 12:44:41.085626"], ["id", 23]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 3.8ms | Allocations: 3310)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3yWdt7dAROIBnNf3L8cXMe4sj7KEa9FdqStLtLhLMy4hM6RceV25i"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:44:41.093571"], ["updated_at", "2024-07-13 12:44:41.093571"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 12:44:41 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$pxv3ZKsKwaTqmAj8Q/5Eu.8QJoq0l3032Q/uKA.TUbGMIEgZqsnF6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:54:04.068978"], ["updated_at", "2024-07-13 12:54:04.068978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"kkaHlTwh33i6VcO8ABTCUw\\\":{\\\"token\\\":\\\"$2a$04$.IiCCUMNDqsgn6mSLcy3w.25/Da.xHWqbHkY6YsLDw1iL.UNsYNEu\\\",\\\"expiry\\\":1722084844}}\""], ["updated_at", "2024-07-13 12:54:04.071957"], ["id", 25]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"kkaHlTwh33i6VcO8ABTCUw\\\":{\\\"token\\\":\\\"$2a$04$oed3Uk88Eebirl2xsPIzz.YJkW6kAkRWQXBwtn3y4buANaOxT8.NW\\\",\\\"expiry\\\":1722084844,\\\"previous_token\\\":\\\"$2a$04$.IiCCUMNDqsgn6mSLcy3w.25/Da.xHWqbHkY6YsLDw1iL.UNsYNEu\\\",\\\"updated_at\\\":\\\"2024-07-13T12:54:04Z\\\"}}\""], ["updated_at", "2024-07-13 12:54:04.077504"], ["id", 25]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 7.8ms | Allocations: 17024)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$TNHXTaoDI71V62N6aOXq5OCyRbV5sM1T40jGXSxBAMqc55yudwOFq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:54:04.115930"], ["updated_at", "2024-07-13 12:54:04.115930"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 183)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ifelNFRxhtDoby9htYFpReIww8Zqj0iwufH7i2Ny1CwJ71VyKZsKe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:54:04.143165"], ["updated_at", "2024-07-13 12:54:04.143165"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ByfEouI_McuFCRGt1wQdXw\\\":{\\\"token\\\":\\\"$2a$04$lz/gjg/JwK6sMyNOIVI2F.jc040K0ePw8g8D.pBtX9Mi0fYDeUvJC\\\",\\\"expiry\\\":1722084844}}\""], ["updated_at", "2024-07-13 12:54:04.154087"], ["id", 27]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ByfEouI_McuFCRGt1wQdXw\\\":{\\\"token\\\":\\\"$2a$04$cdjXLE92zN1WIwD8Os1wUuwaSurCXYRanxq7qzdHz.8FHcTilXvwe\\\",\\\"expiry\\\":1722084844,\\\"previous_token\\\":\\\"$2a$04$lz/gjg/JwK6sMyNOIVI2F.jc040K0ePw8g8D.pBtX9Mi0fYDeUvJC\\\",\\\"updated_at\\\":\\\"2024-07-13T12:54:04Z\\\"}}\""], ["updated_at", "2024-07-13 12:54:04.160413"], ["id", 27]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 3.2ms | Allocations: 3310)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ZLPledQgY9.CzPHbdghdN.bN0uS5PPNNiFxTCyP0A12sycZfgFc4i"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 12:54:04.167035"], ["updated_at", "2024-07-13 12:54:04.167035"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 12:54:04 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 599)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:47:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.1ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$0TBnlDGRUJyvhtzKMv8.leeZNAHeLmeW/oVnLnSv.o6C2ZNGJ7ZE."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:47:24.006031"], ["updated_at", "2024-07-13 13:47:24.006031"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"w5nF9K7bE1O68r1VNgAQ3Q\\\":{\\\"token\\\":\\\"$2a$04$Hb2o5FEUYFbxLzC8epvhae5pRqIZCYJvvUTlyoniQ8mRqLT9QqB.W\\\",\\\"expiry\\\":1722088044}}\""], ["updated_at", "2024-07-13 13:47:24.010098"], ["id", 29]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"w5nF9K7bE1O68r1VNgAQ3Q\\\":{\\\"token\\\":\\\"$2a$04$VWsbO8FYrkEA9v6m5oBkWOYMLsXFYzSf3hCMqT/r9xZAVyM0byRU.\\\",\\\"expiry\\\":1722088044,\\\"previous_token\\\":\\\"$2a$04$Hb2o5FEUYFbxLzC8epvhae5pRqIZCYJvvUTlyoniQ8mRqLT9QqB.W\\\",\\\"updated_at\\\":\\\"2024-07-13T13:47:24Z\\\"}}\""], ["updated_at", "2024-07-13 13:47:24.016543"], ["id", 29]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 11.8ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$JOrSbRFHgo.YGsoV02fynOoxNltlYZRj/ETYpdOiz8kslpDg1W6JS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:47:24.055354"], ["updated_at", "2024-07-13 13:47:24.055354"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 183)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$0jmjJ0mr8I4iIYgXmSLKLerXyD/pe9IOSBghKiLfWYU8q7xDMSfQC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:47:24.080051"], ["updated_at", "2024-07-13 13:47:24.080051"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-hVanQabWOoJ_xDW93i9xw\\\":{\\\"token\\\":\\\"$2a$04$qyHXLFodR2qFBozg6GmBxul/4kuLFjfhneCtdblHItjIVvC0kREiO\\\",\\\"expiry\\\":1722088044}}\""], ["updated_at", "2024-07-13 13:47:24.092545"], ["id", 31]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-hVanQabWOoJ_xDW93i9xw\\\":{\\\"token\\\":\\\"$2a$04$yNg.9uvmXuVZwvHME3yuZe39Tr1VzTYepVWOS3hPNMZvwjqsVsTe6\\\",\\\"expiry\\\":1722088044,\\\"previous_token\\\":\\\"$2a$04$qyHXLFodR2qFBozg6GmBxul/4kuLFjfhneCtdblHItjIVvC0kREiO\\\",\\\"updated_at\\\":\\\"2024-07-13T13:47:24Z\\\"}}\""], ["updated_at", "2024-07-13 13:47:24.097546"], ["id", 31]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 3310)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.VEC7/fPYbVpTfHdviyeyuXK/bCahNetssZCNpcz4SNiu2HSYl42O"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:47:24.103266"], ["updated_at", "2024-07-13 13:47:24.103266"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:47:24 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$4pzbXIxJjTxZAmD1R.aIx.13Gq8q/zNf1/ytdcqWA99RH.fhqiVUi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:12.122972"], ["updated_at", "2024-07-13 13:48:12.122972"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"D3ziNX_rDh92uMk503I7dQ\\\":{\\\"token\\\":\\\"$2a$04$yOerHNtAxuRUuV4FVGhbietyCUH4x/qMvTrNF.vGb5K3z3aull2/.\\\",\\\"expiry\\\":1722088092}}\""], ["updated_at", "2024-07-13 13:48:12.126312"], ["id", 33]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"D3ziNX_rDh92uMk503I7dQ\\\":{\\\"token\\\":\\\"$2a$04$dpwl2PGBpTYdsI.6Bb0ftOeMY.4SbPi/65bHUAN4bt1emF.Mr/wYC\\\",\\\"expiry\\\":1722088092,\\\"previous_token\\\":\\\"$2a$04$yOerHNtAxuRUuV4FVGhbietyCUH4x/qMvTrNF.vGb5K3z3aull2/.\\\",\\\"updated_at\\\":\\\"2024-07-13T13:48:12Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:12.132430"], ["id", 33]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.5ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jiTC89FqKv.ycnAm3EdCS.EPYn9pMDz6EDrBiAJ92Tvt6YCvq8Rgi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:12.170913"], ["updated_at", "2024-07-13 13:48:12.170913"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$CFSc6aSIluJjc4DkCJJSW.Ee17HlZVV2wTYDLVYyEdsU7GqZ.VKIW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:12.185703"], ["updated_at", "2024-07-13 13:48:12.185703"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"kz_omtUQNC-nlJXbjEmhXg\\\":{\\\"token\\\":\\\"$2a$04$XYAaqhPzdoCp9JrVKk588ua.OIVb8W6V7F7DfmI4Yk2VuL40vPVv.\\\",\\\"expiry\\\":1722088092,\\\"updated_at\\\":\\\"2024-07-13T13:48:12Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:12.188435"], ["id", 35]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 35]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 849)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$f7NZhfw9EF0ot1WL94dXaeEQZ1fuW7XzFxsVf/33veEMWj2bdop0O"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:12.204779"], ["updated_at", "2024-07-13 13:48:12.204779"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"AK2G86-SRPFIXIuK7mIhPQ\\\":{\\\"token\\\":\\\"$2a$04$o2MICtXpLvvqABQQY30jlu855/rAwsrX5DFQYndJ.V9U6adxTSKym\\\",\\\"expiry\\\":1722088092}}\""], ["updated_at", "2024-07-13 13:48:12.216547"], ["id", 36]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"AK2G86-SRPFIXIuK7mIhPQ\\\":{\\\"token\\\":\\\"$2a$04$aHWUBRtLsuZOgNyyH8OcsO0.jxBiEQauSCx1eZ6dZNGXW5op.LwAi\\\",\\\"expiry\\\":1722088092,\\\"previous_token\\\":\\\"$2a$04$o2MICtXpLvvqABQQY30jlu855/rAwsrX5DFQYndJ.V9U6adxTSKym\\\",\\\"updated_at\\\":\\\"2024-07-13T13:48:12Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:12.221941"], ["id", 36]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$HCDRiHd8hUMXbuZbguAATOWQHqNt4UX8Px5xOF799VTK.rjVKUDju"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:12.228376"], ["updated_at", "2024-07-13 13:48:12.228376"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:48:12 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6SbIYOisNW5vuhuqZfZhHuQJBRm0vDTxH090GqbUc.Md00fodVCRa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:33.041341"], ["updated_at", "2024-07-13 13:48:33.041341"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"leNhtot5OsLcVoQvzKRpsQ\\\":{\\\"token\\\":\\\"$2a$04$qAkwLGFkJCV/w.1bfzTDq.UqTYiVqqnaYmkggGPao3VuWqrkIw4KG\\\",\\\"expiry\\\":1722088113}}\""], ["updated_at", "2024-07-13 13:48:33.044644"], ["id", 38]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"leNhtot5OsLcVoQvzKRpsQ\\\":{\\\"token\\\":\\\"$2a$04$1EwVF25EJAipIFNwYM6HJ.R.hqgXG9cm1z3VilY1vX4O5cT092wqO\\\",\\\"expiry\\\":1722088113,\\\"previous_token\\\":\\\"$2a$04$qAkwLGFkJCV/w.1bfzTDq.UqTYiVqqnaYmkggGPao3VuWqrkIw4KG\\\",\\\"updated_at\\\":\\\"2024-07-13T13:48:33Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:33.051035"], ["id", 38]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.4ms | Allocations: 17024)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$RP2Am8FFZcmUSD0WX1sQG.msghtRHF2e8568e9OJoY/0EvE3LxEiW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:33.089872"], ["updated_at", "2024-07-13 13:48:33.089872"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$IqZC.tyGuDV2IZRAv4BjqO75kt5TUBGUy31aaBSizpkKqOLcC1HYe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:33.103139"], ["updated_at", "2024-07-13 13:48:33.103139"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DPF_YGdaqcl7J327QkWaqg\\\":{\\\"token\\\":\\\"$2a$04$R6K5/2dIPjQzLK1Ps7CTa.3GFC9KTOAZ/P.OEPfqoE/PW3wLc3wc2\\\",\\\"expiry\\\":1722088113,\\\"updated_at\\\":\\\"2024-07-13T13:48:33Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:33.105703"], ["id", 40]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 40]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 849)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$X4kCrG3TaCgwy0NSz20nPuYoZP94y/Wveq5TILlYpXCP4QXDZKBvO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:33.122637"], ["updated_at", "2024-07-13 13:48:33.122637"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"xHxiQlDyigb3h8w4Es8YfQ\\\":{\\\"token\\\":\\\"$2a$04$MIlt1gxUDPoiReW39Ucy2OyY.oHK5V7O38avkmQhcy0EhFigrNLVm\\\",\\\"expiry\\\":1722088113}}\""], ["updated_at", "2024-07-13 13:48:33.133339"], ["id", 41]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"xHxiQlDyigb3h8w4Es8YfQ\\\":{\\\"token\\\":\\\"$2a$04$ajUE3bhjGY9i5QRAVw9ynu/C/5bUjFS4iaEDMrv7/31bLDdpbZrFS\\\",\\\"expiry\\\":1722088113,\\\"previous_token\\\":\\\"$2a$04$MIlt1gxUDPoiReW39Ucy2OyY.oHK5V7O38avkmQhcy0EhFigrNLVm\\\",\\\"updated_at\\\":\\\"2024-07-13T13:48:33Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:33.138663"], ["id", 41]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$wyI1uAAcO4fmjzZ8twGeRepsGKlsx44kbpPwHPtzeMMsgKUAc4Vr."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:33.146991"], ["updated_at", "2024-07-13 13:48:33.146991"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:48:33 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:45 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$NnDkNrBgGjqMlnOD9sEcludvf.WOXOoRIQkHCnLOGZQkub4bslOh."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:45.130402"], ["updated_at", "2024-07-13 13:48:45.130402"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"apA08Paz_ZhkwCTP9KL2kA\\\":{\\\"token\\\":\\\"$2a$04$Kz.HIKFlCJgqWAWzD9wMNuHiCYKiR3xI/WRFRIWuAdZvZV0rZIRNS\\\",\\\"expiry\\\":1722088125}}\""], ["updated_at", "2024-07-13 13:48:45.134572"], ["id", 43]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"apA08Paz_ZhkwCTP9KL2kA\\\":{\\\"token\\\":\\\"$2a$04$K7RUxFE7v7LE4WPERNSJPeeSgpnINeHHiekhhAopy4c76S5Ik1ICC\\\",\\\"expiry\\\":1722088125,\\\"previous_token\\\":\\\"$2a$04$Kz.HIKFlCJgqWAWzD9wMNuHiCYKiR3xI/WRFRIWuAdZvZV0rZIRNS\\\",\\\"updated_at\\\":\\\"2024-07-13T13:48:45Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:45.140535"], ["id", 43]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 9.6ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:45 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:45 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:45 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$eIQbgepqw71ptC5l2UmtAuYjTzXvBX07LaweKsxKYLR1y7q8ZruFK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:45.179605"], ["updated_at", "2024-07-13 13:48:45.179605"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:48:45 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$E58C1x8LCkjWcDCDQQqIF.SZRr9Tr/PlUkiBQfjDa3gA6RkGrJDrG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:45.196084"], ["updated_at", "2024-07-13 13:48:45.196084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:48:45 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"5KdCsqnPg6v_f5xNDEltyQ\\\":{\\\"token\\\":\\\"$2a$04$EQ.MUFatSVG6kRkx7.KMO.uPigOReSiLK/TMsG2ZiXxgY7X6s6CQy\\\",\\\"expiry\\\":1722088125}}\""], ["updated_at", "2024-07-13 13:48:45.206279"], ["id", 45]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mCustomer Update (1.0ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"5KdCsqnPg6v_f5xNDEltyQ\\\":{\\\"token\\\":\\\"$2a$04$4v6Pkl6BqC3UeLbphse8g.DGtX.hm6VaarvQc1GNj8rgMJbYWh22W\\\",\\\"expiry\\\":1722088125,\\\"previous_token\\\":\\\"$2a$04$EQ.MUFatSVG6kRkx7.KMO.uPigOReSiLK/TMsG2ZiXxgY7X6s6CQy\\\",\\\"updated_at\\\":\\\"2024-07-13T13:48:45Z\\\"}}\""], ["updated_at", "2024-07-13 13:48:45.211577"], ["id", 45]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.5ms | Allocations: 3310)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$VTENYJkcXHMSxQ7G3N5SkeHvt4yAlV1GeT5LXEZQ/ZcUQK6FSKIF6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:48:45.222568"], ["updated_at", "2024-07-13 13:48:45.222568"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:48:45 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3uNFsUsuDAGVP7Wfes6FeehL3ydrNTYlwHxla6MBwpVafM4LL9jVu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:51:54.658463"], ["updated_at", "2024-07-13 13:51:54.658463"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ZPe_9TQiNtVvgoMqhEykDA\\\":{\\\"token\\\":\\\"$2a$04$U0ynV2Ivbp1AQ0wpphnQNOoyNDCxjIvoAgsTLI7JMhFgBJmlb/Vt2\\\",\\\"expiry\\\":1722088314}}\""], ["updated_at", "2024-07-13 13:51:54.661601"], ["id", 47]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 47], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ZPe_9TQiNtVvgoMqhEykDA\\\":{\\\"token\\\":\\\"$2a$04$tfHiKILquS8LgFGStsKp2.UgK0.oYApyI0GquNleqx.vpqc7SmU/y\\\",\\\"expiry\\\":1722088314,\\\"previous_token\\\":\\\"$2a$04$U0ynV2Ivbp1AQ0wpphnQNOoyNDCxjIvoAgsTLI7JMhFgBJmlb/Vt2\\\",\\\"updated_at\\\":\\\"2024-07-13T13:51:54Z\\\"}}\""], ["updated_at", "2024-07-13 13:51:54.667594"], ["id", 47]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 8.5ms | Allocations: 17024)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.0ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$QoFLJO2ZCdssGBtsV4oBzuVuxh8IgNAGX3ryzbTp4Bo5wqYUci72y"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:51:54.706366"], ["updated_at", "2024-07-13 13:51:54.706366"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 183)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 158)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$v2ePVgvvCmYj5MIZrrUBN.5oUZLbreYrSGcARUsQUjxhaRvB9N/82"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:51:54.732402"], ["updated_at", "2024-07-13 13:51:54.732402"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"LWXxkLv_k1l4ft3wV8tTYg\\\":{\\\"token\\\":\\\"$2a$04$0et.k5lT57R57VKeH6fNguYrc5WcHhq03grOF9/CwiAxA8oF990mK\\\",\\\"expiry\\\":1722088314}}\""], ["updated_at", "2024-07-13 13:51:54.744957"], ["id", 49]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"LWXxkLv_k1l4ft3wV8tTYg\\\":{\\\"token\\\":\\\"$2a$04$BTgZvUVMO/ZPXVxNnpYcOuPu9XEP2tUk6G8MzQLJ7/sTkLBCN1F/O\\\",\\\"expiry\\\":1722088314,\\\"previous_token\\\":\\\"$2a$04$0et.k5lT57R57VKeH6fNguYrc5WcHhq03grOF9/CwiAxA8oF990mK\\\",\\\"updated_at\\\":\\\"2024-07-13T13:51:54Z\\\"}}\""], ["updated_at", "2024-07-13 13:51:54.750561"], ["id", 49]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 3291)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$inp2ujdFAWwqi3zN12kIjO/I8IkIzXrptns5D2ARyn2YNQQGrE5Ue"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:51:54.756957"], ["updated_at", "2024-07-13 13:51:54.756957"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:51:54 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$iJBeLuZCgm7qKu/nKjdqH.QjvdfvzOHmRb.ociqQ4K2eZZUdqD2tm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:22.203380"], ["updated_at", "2024-07-13 13:55:22.203380"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"dG8hrEG8bNTNSEWyu3HkSw\\\":{\\\"token\\\":\\\"$2a$04$0GUalODKNB4CfjLC8NaL3.jCXUbCVTeCx5TG.XAUNypqL2i/p/2cC\\\",\\\"expiry\\\":1722088522}}\""], ["updated_at", "2024-07-13 13:55:22.206921"], ["id", 51]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"dG8hrEG8bNTNSEWyu3HkSw\\\":{\\\"token\\\":\\\"$2a$04$/UfPb7qQnWY4yLDdqk77WOrH/ZMergkdVxri6LMny/gBtH6AQxhFK\\\",\\\"expiry\\\":1722088522,\\\"previous_token\\\":\\\"$2a$04$0GUalODKNB4CfjLC8NaL3.jCXUbCVTeCx5TG.XAUNypqL2i/p/2cC\\\",\\\"updated_at\\\":\\\"2024-07-13T13:55:22Z\\\"}}\""], ["updated_at", "2024-07-13 13:55:22.213097"], ["id", 51]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 10.4ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Wz1HwEgLW1nlkgeOWgAP3.eOoK68m7qN2mQ0xP8.RqdhJhJqoBHF6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:22.250312"], ["updated_at", "2024-07-13 13:55:22.250312"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$BHGxSZ4LDLRdeeW0EXu1zum1jIjUfbf6rJSS2l9zM.52cUiT4XVfK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:22.263559"], ["updated_at", "2024-07-13 13:55:22.263559"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"S6F1Ks9_Yzji9rCwaEjbxA\\\":{\\\"token\\\":\\\"$2a$04$CCf4u8QeC2ZRoPU39AVqGe9D2HN7GjflO5AgNePxCpNGlf4lwcz2S\\\",\\\"expiry\\\":1722088522,\\\"updated_at\\\":\\\"2024-07-13T13:55:22Z\\\"}}\""], ["updated_at", "2024-07-13 13:55:22.266061"], ["id", 53]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 53]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 849)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$IhsU0NrVlK2MZ/daGW8mM.A96s.xza1Lnhgt5kGhAfjUDfpMUKMeW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:22.280960"], ["updated_at", "2024-07-13 13:55:22.280960"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"dV4Z7B9ctm3CUysHdZDZ5Q\\\":{\\\"token\\\":\\\"$2a$04$FO4chZ2pasnWonqcd3UkheRlhw6gTY2GjACSy6NZjOylkBeKDa6BG\\\",\\\"expiry\\\":1722088522}}\""], ["updated_at", "2024-07-13 13:55:22.291860"], ["id", 54]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"dV4Z7B9ctm3CUysHdZDZ5Q\\\":{\\\"token\\\":\\\"$2a$04$tHOyLZlAf8dw4EXxzGBBl.kkjdT3B2fUdvYfVOJglM4sc1A3DmHq2\\\",\\\"expiry\\\":1722088522,\\\"previous_token\\\":\\\"$2a$04$FO4chZ2pasnWonqcd3UkheRlhw6gTY2GjACSy6NZjOylkBeKDa6BG\\\",\\\"updated_at\\\":\\\"2024-07-13T13:55:22Z\\\"}}\""], ["updated_at", "2024-07-13 13:55:22.297624"], ["id", 54]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$VWtPZhOgqfA3Ga4MQcI0a.bNb4J.JvWbs4exs3zN4AA1Ufh0Jb9/u"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:22.303735"], ["updated_at", "2024-07-13 13:55:22.303735"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:55:22 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$JYagj1tj9rYxvz2N/1AxiucdoZmAgfCy3t5Q1p1WqrhkHjOYd76w."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:50.774244"], ["updated_at", "2024-07-13 13:55:50.774244"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"M02ip72t8rsol_bFMVmG1Q\\\":{\\\"token\\\":\\\"$2a$04$9eHvcPcDlGybaBqoemlFhOeCk06plycA0o.vasHbQat5FZ5.3UY6O\\\",\\\"expiry\\\":1722088550}}\""], ["updated_at", "2024-07-13 13:55:50.777430"], ["id", 56]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"M02ip72t8rsol_bFMVmG1Q\\\":{\\\"token\\\":\\\"$2a$04$.DjA22Nw2Kd5tw062PJndeYUgrvciXhyEGNe3s5y6petZALkmm4dy\\\",\\\"expiry\\\":1722088550,\\\"previous_token\\\":\\\"$2a$04$9eHvcPcDlGybaBqoemlFhOeCk06plycA0o.vasHbQat5FZ5.3UY6O\\\",\\\"updated_at\\\":\\\"2024-07-13T13:55:50Z\\\"}}\""], ["updated_at", "2024-07-13 13:55:50.783333"], ["id", 56]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 8.6ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.0ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$z1ER2Olx.ajy9yboueHg1uZs9iYdAACvG3VUR5uG5RVT1XZ6JQcyC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:50.822612"], ["updated_at", "2024-07-13 13:55:50.822612"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$eInbCeBKQm8CqBz2Caoe6.Gis13q5tQUWcKXQ/JlBPpbcvX5Q5QUG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:50.837042"], ["updated_at", "2024-07-13 13:55:50.837042"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"CyB_16VDyWxS5Pljs9UecA\\\":{\\\"token\\\":\\\"$2a$04$y6mubOWg4LtZ7MEitPmf..sH5vO8kOW8DhKKGzkWdQHywpXKzNAgq\\\",\\\"expiry\\\":1722088550,\\\"updated_at\\\":\\\"2024-07-13T13:55:50Z\\\"}}\""], ["updated_at", "2024-07-13 13:55:50.839494"], ["id", 58]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 58]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 849)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$4WO9TYGWy0KSWtGlVjC1rOTNN3eC0t23wmifOa0TLZAOyNadRRMla"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:50.856097"], ["updated_at", "2024-07-13 13:55:50.856097"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"8r3U47w_6ivMRe8mElZ5Yw\\\":{\\\"token\\\":\\\"$2a$04$jWo1SZ8mDmWHCOA5cUu8lOX70nr6D3Nj9go8QXvBYtl2FgMpgP9VS\\\",\\\"expiry\\\":1722088550}}\""], ["updated_at", "2024-07-13 13:55:50.866981"], ["id", 59]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"8r3U47w_6ivMRe8mElZ5Yw\\\":{\\\"token\\\":\\\"$2a$04$tF0wbC3c/QrY6H.7lnH/defDG3.53boC0W1lTfySnV7w4dV5tjC/G\\\",\\\"expiry\\\":1722088550,\\\"previous_token\\\":\\\"$2a$04$jWo1SZ8mDmWHCOA5cUu8lOX70nr6D3Nj9go8QXvBYtl2FgMpgP9VS\\\",\\\"updated_at\\\":\\\"2024-07-13T13:55:50Z\\\"}}\""], ["updated_at", "2024-07-13 13:55:50.872072"], ["id", 59]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$K3PN8g/J5lrES0uwcqH0neaOC7pTBQ5QBrUxaJ9y838R6GqCthzcK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:55:50.878141"], ["updated_at", "2024-07-13 13:55:50.878141"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:55:50 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Bh1zlTYGAqf/tgQC2j4Jk.lokLu6nbpkJB3R9SeiW1X3uN29I0Wzi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:57:31.375234"], ["updated_at", "2024-07-13 13:57:31.375234"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"8HahBXjCqnWHnbkLay6Ueg\\\":{\\\"token\\\":\\\"$2a$04$SnbUyR.2uHHg1zrWeW58yO6wmGBxsyhai9ePoWAYi8YuIuU1peE/y\\\",\\\"expiry\\\":1722088651}}\""], ["updated_at", "2024-07-13 13:57:31.378503"], ["id", 61]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"8HahBXjCqnWHnbkLay6Ueg\\\":{\\\"token\\\":\\\"$2a$04$bCk543uA9eSvbccRrb77G.DNMxtTdX13KjN4yp.bXLo1lVpDrB5ZG\\\",\\\"expiry\\\":1722088651,\\\"previous_token\\\":\\\"$2a$04$SnbUyR.2uHHg1zrWeW58yO6wmGBxsyhai9ePoWAYi8YuIuU1peE/y\\\",\\\"updated_at\\\":\\\"2024-07-13T13:57:31Z\\\"}}\""], ["updated_at", "2024-07-13 13:57:31.384370"], ["id", 61]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 9.9ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.0ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jwmBNKeA16ArTpUPJ2LehOgPLl.wHN48ixtBFzuueVYSNcGIyVOAK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:57:31.422547"], ["updated_at", "2024-07-13 13:57:31.422547"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9sS0TQQ8CLtJiS5bATvURu6aJzXOhfh4zSkcw7IBWmJsV/vlOxyR6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:57:31.437224"], ["updated_at", "2024-07-13 13:57:31.437224"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"zWLzMxgo3uwl2qhoaRoNRg\\\":{\\\"token\\\":\\\"$2a$04$W9LkK6SDMWldCm6VoKfHeu849NLO/8sMwI2DoLcdBFEUvlpKUlQ4K\\\",\\\"expiry\\\":1722088651,\\\"updated_at\\\":\\\"2024-07-13T13:57:31Z\\\"}}\""], ["updated_at", "2024-07-13 13:57:31.439761"], ["id", 63]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 63]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 849)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$on4tK/LSi.sHY2.7VL/SVuVhcjwZh4CLwjGrWFbXHOd2NZk0o5ssy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:57:31.453517"], ["updated_at", "2024-07-13 13:57:31.453517"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"NA9NE2ydiMgNAvnZYBCLlQ\\\":{\\\"token\\\":\\\"$2a$04$vWQQt2h/uxa1ijATTqBz8uRcSujKkOqymcJyLZlacV73GTNytx3/u\\\",\\\"expiry\\\":1722088651,\\\"updated_at\\\":\\\"2024-07-13T13:57:31Z\\\"}}\""], ["updated_at", "2024-07-13 13:57:31.456407"], ["id", 64]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 64]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 543)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2CiprY6Oy/5TLSEF6QxmZupuQHUG/mXDViy.sE/un8upThW8R5hTa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:57:31.468508"], ["updated_at", "2024-07-13 13:57:31.468508"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 65], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Rr_G0dVPIO0gs4yCnlfk-w\\\":{\\\"token\\\":\\\"$2a$04$r2YJ2MuqdhMTeaOeYny2y.TB02UW8qvxTP1NVBF43c7epQ0wucFfS\\\",\\\"expiry\\\":1722088651}}\""], ["updated_at", "2024-07-13 13:57:31.478671"], ["id", 65]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 65], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Rr_G0dVPIO0gs4yCnlfk-w\\\":{\\\"token\\\":\\\"$2a$04$wzuUC/YTiw/0a/g8jsCW0uMpIq.Ed81J6g9tjOSsrBwzLIVAhW3Iy\\\",\\\"expiry\\\":1722088651,\\\"previous_token\\\":\\\"$2a$04$r2YJ2MuqdhMTeaOeYny2y.TB02UW8qvxTP1NVBF43c7epQ0wucFfS\\\",\\\"updated_at\\\":\\\"2024-07-13T13:57:31Z\\\"}}\""], ["updated_at", "2024-07-13 13:57:31.507070"], ["id", 65]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 3.5ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$F8SwU7Ce3v4XB0zwAt5kyuA/uJie2MXoqp1Av3yv9kUGRyMZg.oim"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:57:31.514242"], ["updated_at", "2024-07-13 13:57:31.514242"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:57:31 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Blpme6.kfbnXvkgZEJ3QAu.sxc0ETgNibUgaIfKiQksu5ya4.sOWG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:58:12.316988"], ["updated_at", "2024-07-13 13:58:12.316988"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"vfE-TGxpSXE18SWg2Tr_Qg\\\":{\\\"token\\\":\\\"$2a$04$pTwIDUPYy1rhfnfRFq/YZ.UnnYqopr6jPR3kp0y27dzE0hF7lOtTG\\\",\\\"expiry\\\":1722088692}}\""], ["updated_at", "2024-07-13 13:58:12.320808"], ["id", 67]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 67], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"vfE-TGxpSXE18SWg2Tr_Qg\\\":{\\\"token\\\":\\\"$2a$04$o7JSRbmTPKCoPKvyRxbyNeL9ZUAzLgq0F4/P.mukdy3d62GKHsg3i\\\",\\\"expiry\\\":1722088692,\\\"previous_token\\\":\\\"$2a$04$pTwIDUPYy1rhfnfRFq/YZ.UnnYqopr6jPR3kp0y27dzE0hF7lOtTG\\\",\\\"updated_at\\\":\\\"2024-07-13T13:58:12Z\\\"}}\""], ["updated_at", "2024-07-13 13:58:12.326874"], ["id", 67]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.7ms | Allocations: 17024)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gR1YE/4QUw/VKg5VO/n8suqDqDElwa1GyaHOowL3omc0cJIdfMqaO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:58:12.364587"], ["updated_at", "2024-07-13 13:58:12.364587"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$yQ.LqULwTpfjxelKxqoTiOAj6/3F2.ljyoPttL8Ry5.3kxSG3BX8m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:58:12.377573"], ["updated_at", "2024-07-13 13:58:12.377573"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-aN_ytr-vA1Wwv9Q7QNkWg\\\":{\\\"token\\\":\\\"$2a$04$kAp1f1tkz2KZQqZe97unru6WarnkRKkGaMXhbk69IO4HMVRt.lrmS\\\",\\\"expiry\\\":1722088692,\\\"updated_at\\\":\\\"2024-07-13T13:58:12Z\\\"}}\""], ["updated_at", "2024-07-13 13:58:12.380154"], ["id", 69]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 69]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 849)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Fba2.5IockMoCYXR..cLl.wmjcKVsCtone5WK1gRSP7YtzrkWSyCi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:58:12.394361"], ["updated_at", "2024-07-13 13:58:12.394361"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"NXgevzZkiQ2tpDNjLuJXzg\\\":{\\\"token\\\":\\\"$2a$04$0jII.4J45TOm8KdosNkJTe8l/jtlEFpTDMPIG4dZIGVkn1mHHKs1K\\\",\\\"expiry\\\":1722088692,\\\"updated_at\\\":\\\"2024-07-13T13:58:12Z\\\"}}\""], ["updated_at", "2024-07-13 13:58:12.397092"], ["id", 70]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 70]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 543)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$E4x3pzZDQkhj/O0a1tb4PeEkFZZ2la8YEr892OsRp5vm5W64phj4m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:58:12.409229"], ["updated_at", "2024-07-13 13:58:12.409229"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"qftB6WNBO_FdAQMCob3NCw\\\":{\\\"token\\\":\\\"$2a$04$vjQkD6A8x4AdcQtGUBZrROU9z/CeE9XJKR6HJt7uxpwtEf1oczUWu\\\",\\\"expiry\\\":1722088692}}\""], ["updated_at", "2024-07-13 13:58:12.418807"], ["id", 71]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"qftB6WNBO_FdAQMCob3NCw\\\":{\\\"token\\\":\\\"$2a$04$jSnxGNcBuPglejfQebL6iewT6.vWiNHjm8TyAOzmW4EcYF9oCKS8G\\\",\\\"expiry\\\":1722088692,\\\"previous_token\\\":\\\"$2a$04$vjQkD6A8x4AdcQtGUBZrROU9z/CeE9XJKR6HJt7uxpwtEf1oczUWu\\\",\\\"updated_at\\\":\\\"2024-07-13T13:58:12Z\\\"}}\""], ["updated_at", "2024-07-13 13:58:12.423707"], ["id", 71]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ju8750Z3yFkdVCa39vbQmu3PTC312oCkjqGJZ5exYAN7bfo/5B2mK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:58:12.429750"], ["updated_at", "2024-07-13 13:58:12.429750"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:58:12 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$5A1LRcfmefIlhDEVraLyoO/AF4G9YNWKmlrCrtMUeSKJTyhaxjHh2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:58:57.460614"], ["updated_at", "2024-07-13 13:58:57.460614"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"57ITpGM3mfzz9RYzdRgl_Q\\\":{\\\"token\\\":\\\"$2a$04$pXmS0293Tm3FzurGmLxZ0OSsYpxLnCAFC/ptspcqLOri4ocB32j0e\\\",\\\"expiry\\\":1722088737,\\\"updated_at\\\":\\\"2024-07-13T13:58:57Z\\\"}}\""], ["updated_at", "2024-07-13 13:58:57.465637"], ["id", 73]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:58:57 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 73]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 4122)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$f1ULIL2r2oSiAploONR84.WyOp4eKvrAS3wvbRDdokdGoanBX08Sm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:01.465798"], ["updated_at", "2024-07-13 13:59:01.465798"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"g3gD2mwVFmUx6PGTm0_I5Q\\\":{\\\"token\\\":\\\"$2a$04$vqnnKXNTyeS8sow5SFGu3O6SJyZtqiaqsMeQODnGt/ssavjljhllO\\\",\\\"expiry\\\":1722088741}}\""], ["updated_at", "2024-07-13 13:59:01.469021"], ["id", 74]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"g3gD2mwVFmUx6PGTm0_I5Q\\\":{\\\"token\\\":\\\"$2a$04$dNTzYbaokk5pPb6uOuSGKOKqA2ZXCmBuvj27bwez82PLxXFU6P0/.\\\",\\\"expiry\\\":1722088741,\\\"previous_token\\\":\\\"$2a$04$vqnnKXNTyeS8sow5SFGu3O6SJyZtqiaqsMeQODnGt/ssavjljhllO\\\",\\\"updated_at\\\":\\\"2024-07-13T13:59:01Z\\\"}}\""], ["updated_at", "2024-07-13 13:59:01.474973"], ["id", 74]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.1ms | Allocations: 17024)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dU7tvdVlcqgdX0nvd91.2uTaFhKDhFVKBl6nu2hWcV6sq7Drj5O9m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:01.512475"], ["updated_at", "2024-07-13 13:59:01.512475"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$UQiidsxhZPAg3.jjTPo5h.ObdHNu5wT/JwnNCHNcm9ZRTm3rsaiFC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:01.525013"], ["updated_at", "2024-07-13 13:59:01.525013"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"8OxL6qTTzLUg2L35XO84kg\\\":{\\\"token\\\":\\\"$2a$04$YFtcilOVExh4zQnJjHD3peuq4/bVkBcuX2r9E/ODolF9Dokf4ofZ.\\\",\\\"expiry\\\":1722088741,\\\"updated_at\\\":\\\"2024-07-13T13:59:01Z\\\"}}\""], ["updated_at", "2024-07-13 13:59:01.527492"], ["id", 76]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 76]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 849)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$b1VaJjYaCpsScPsAi6k8oeoqPFQocelE3o2wd8f8DLBlJgbAtu566"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:01.540296"], ["updated_at", "2024-07-13 13:59:01.540296"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"6t8TppVmQLK0SdabXAyB_w\\\":{\\\"token\\\":\\\"$2a$04$ctTkWRaDwKv9jBq4djNCZ.s0u15iFOIVN/4VvpJxqiN8RlYRa1zu.\\\",\\\"expiry\\\":1722088741,\\\"updated_at\\\":\\\"2024-07-13T13:59:01Z\\\"}}\""], ["updated_at", "2024-07-13 13:59:01.542852"], ["id", 77]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 77]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 543)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$uVNlmtkCiJKovtQEAaXJEuKhnf2pK1pjmQ0HO1Zwqyw6JoAyVL6Ke"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:01.554726"], ["updated_at", "2024-07-13 13:59:01.554726"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"6Aer566SZCg4CHemqcRxiQ\\\":{\\\"token\\\":\\\"$2a$04$kk7Nxet/L5bukO2CmN.WReV8R02VD47nvVwRGhoNZafptBpufKngq\\\",\\\"expiry\\\":1722088741}}\""], ["updated_at", "2024-07-13 13:59:01.564766"], ["id", 78]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"6Aer566SZCg4CHemqcRxiQ\\\":{\\\"token\\\":\\\"$2a$04$qZfaz5cuA/XT/YdilnNyreM685zDStgHaPdvZ3ztakD.3EQzGFmQ6\\\",\\\"expiry\\\":1722088741,\\\"previous_token\\\":\\\"$2a$04$kk7Nxet/L5bukO2CmN.WReV8R02VD47nvVwRGhoNZafptBpufKngq\\\",\\\"updated_at\\\":\\\"2024-07-13T13:59:01Z\\\"}}\""], ["updated_at", "2024-07-13 13:59:01.570178"], ["id", 78]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$h7cYW0m9qySuFYcZb2VSwu5wFB9xLl2spBD7vhD3XtmdXVYz6PQ8G"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:01.576641"], ["updated_at", "2024-07-13 13:59:01.576641"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:59:01 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Wgbb22vu0yylXYFRQrO0n.Us4ROSAk9ChwXBQziaUUTnZ3S7FOUme"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:42.553066"], ["updated_at", "2024-07-13 13:59:42.553066"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"qxERBqTiPdkhuSrAH-DQsw\\\":{\\\"token\\\":\\\"$2a$04$rwoBwn743ynO8MNuJKREfO7Pm/KnizsgW0Cuh3JcpuB5PRh16TKOu\\\",\\\"expiry\\\":1722088782}}\""], ["updated_at", "2024-07-13 13:59:42.556007"], ["id", 80]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"qxERBqTiPdkhuSrAH-DQsw\\\":{\\\"token\\\":\\\"$2a$04$I8.Or5B0mbl7fZm8rjapQuCrjaCon8RVSx.WAFpu/bj1l4xK//V16\\\",\\\"expiry\\\":1722088782,\\\"previous_token\\\":\\\"$2a$04$rwoBwn743ynO8MNuJKREfO7Pm/KnizsgW0Cuh3JcpuB5PRh16TKOu\\\",\\\"updated_at\\\":\\\"2024-07-13T13:59:42Z\\\"}}\""], ["updated_at", "2024-07-13 13:59:42.561682"], ["id", 80]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 7.7ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$fXnJt9AEbXJBoD36GH6B6OLPFVN4S.8nSDRjXi7vJJFxjE9W38qcW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:42.599454"], ["updated_at", "2024-07-13 13:59:42.599454"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$zJYbrw0wbCS0TOMsXWgrkuS3//vmDsfz94zej.LSvSI2Kfm7WmGS2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:42.612905"], ["updated_at", "2024-07-13 13:59:42.612905"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sRSi7B0rjgRInDuXgYjN1w\\\":{\\\"token\\\":\\\"$2a$04$oZCHrBHxI1hLN6Cf/CIu7.04OMd4fhfwLI0YMJRluRDk87vamP8Iy\\\",\\\"expiry\\\":1722088782,\\\"updated_at\\\":\\\"2024-07-13T13:59:42Z\\\"}}\""], ["updated_at", "2024-07-13 13:59:42.615143"], ["id", 82]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 82]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 849)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 173)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$FyWQKHPdlOEoEyvn32lZM.JwEiO7n6XOiF98JCj2fDma2rnyTk1sC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:42.633962"], ["updated_at", "2024-07-13 13:59:42.633962"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"PGVkUmJcNSU-ZC5wAk7X7Q\\\":{\\\"token\\\":\\\"$2a$04$A.Tp.wU4vlZixDTbN86v6eDQ9AaefWGIv3UGTWSYHev6/J93AC32.\\\",\\\"expiry\\\":1722088782}}\""], ["updated_at", "2024-07-13 13:59:42.644694"], ["id", 83]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"PGVkUmJcNSU-ZC5wAk7X7Q\\\":{\\\"token\\\":\\\"$2a$04$UdZmfWPq6X5GAWk5o9tXV.GwKfeD/a5mJ1Qc.iUtf//qdv0kEwPvK\\\",\\\"expiry\\\":1722088782,\\\"previous_token\\\":\\\"$2a$04$A.Tp.wU4vlZixDTbN86v6eDQ9AaefWGIv3UGTWSYHev6/J93AC32.\\\",\\\"updated_at\\\":\\\"2024-07-13T13:59:42Z\\\"}}\""], ["updated_at", "2024-07-13 13:59:42.649406"], ["id", 83]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$IZcR3Eb5iTzNLqZpUA02C.9.eT6MlrK/3hluxqgeLiRlo.32ud5.u"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 13:59:42.655583"], ["updated_at", "2024-07-13 13:59:42.655583"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 13:59:42 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gge9C823XPdi69hbEm4KDOupr3GKp29NlZR8tmMelJslfAg4arr/2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:00:27.727282"], ["updated_at", "2024-07-13 14:00:27.727282"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ME4PUjcJ0aG4Tku5DJubwQ\\\":{\\\"token\\\":\\\"$2a$04$zKasvFATqbH5bRO2BrhJSuO3MqEyFQOvOQ3B4RcBsRD/gtHTSsA3m\\\",\\\"expiry\\\":1722088827}}\""], ["updated_at", "2024-07-13 14:00:27.730317"], ["id", 85]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 85], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ME4PUjcJ0aG4Tku5DJubwQ\\\":{\\\"token\\\":\\\"$2a$04$0M1Zj4xWkFgaq2BPha08kunZy..yf8Z9FPEoSB0Rx8.We0ASNHPJq\\\",\\\"expiry\\\":1722088827,\\\"previous_token\\\":\\\"$2a$04$zKasvFATqbH5bRO2BrhJSuO3MqEyFQOvOQ3B4RcBsRD/gtHTSsA3m\\\",\\\"updated_at\\\":\\\"2024-07-13T14:00:27Z\\\"}}\""], ["updated_at", "2024-07-13 14:00:27.736008"], ["id", 85]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 8.0ms | Allocations: 17023)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 2036)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1735)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$hEqOzYlYg8iYlopcTp2CxeaLdwdxcHqHgjvUz1kr7BNg7NcgjiqKa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:00:27.778737"], ["updated_at", "2024-07-13 14:00:27.778737"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1789)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6WH9dv3t/o5YAxL71Q89KO/u9zVJY.uXkoRzi1ncwWL2CycH3NUbO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:00:27.791574"], ["updated_at", "2024-07-13 14:00:27.791574"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"WIwvngP0wxc1bz4weBb4JA\\\":{\\\"token\\\":\\\"$2a$04$NHI7K75PA.XHT0xJQKeJDun/p2gsxbLZDa4wt7q7DRmz4RYxAJsR2\\\",\\\"expiry\\\":1722088827,\\\"updated_at\\\":\\\"2024-07-13T14:00:27Z\\\"}}\""], ["updated_at", "2024-07-13 14:00:27.794143"], ["id", 87]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 87]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 849)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 173)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$aujfB6T0Xc6UvYh2YuWMguxiS8Xvcp9uXy7bE9HiF8XW6y8osECU."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:00:27.813546"], ["updated_at", "2024-07-13 14:00:27.813546"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DzE5dTIiLG9RTP3pmlwQ9Q\\\":{\\\"token\\\":\\\"$2a$04$XYtaQ9QNgk271HbQwluWDO.1/jzkVP41A0ai5mX8uJxBWLGPChYX2\\\",\\\"expiry\\\":1722088827}}\""], ["updated_at", "2024-07-13 14:00:27.823963"], ["id", 88]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DzE5dTIiLG9RTP3pmlwQ9Q\\\":{\\\"token\\\":\\\"$2a$04$WaxS1hmj1/aKMHtpsH/pKurqgyL03zCCMOSFFnFksEfAvC8.FYwyu\\\",\\\"expiry\\\":1722088827,\\\"previous_token\\\":\\\"$2a$04$XYtaQ9QNgk271HbQwluWDO.1/jzkVP41A0ai5mX8uJxBWLGPChYX2\\\",\\\"updated_at\\\":\\\"2024-07-13T14:00:27Z\\\"}}\""], ["updated_at", "2024-07-13 14:00:27.829398"], ["id", 88]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 3225)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$h7pUr4LCYFkYjeEYZNbT6us4P5eBf9pYq.TAme1MZZMwOiRb0Ew56"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:00:27.835827"], ["updated_at", "2024-07-13 14:00:27.835827"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:00:27 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 599)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$HA7GdF0/2DhDmiERcoSFgexi26vQeaa7k.KpKXLSJi5cp9yj2V/Ge"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:25:52.767986"], ["updated_at", "2024-07-13 14:25:52.767986"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"25OmlhOM9pYUmaASBBje2Q\\\":{\\\"token\\\":\\\"$2a$04$Bk1By/bDJ7FrKUivY9VvBO989kt0FDbVCaBrEBDMvm7fiJj9PAm1K\\\",\\\"expiry\\\":1722090352,\\\"updated_at\\\":\\\"2024-07-13T14:25:52Z\\\"}}\""], ["updated_at", "2024-07-13 14:25:52.772471"], ["id", 90]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7eEDrtjr4Z8hYaVE.IwBxuE9l5EjMesT89QEoRL.0wfUWofHje3ZW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:26:53.427972"], ["updated_at", "2024-07-13 14:26:53.427972"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"prEsxh4Rjyr_BeOwWBnsYA\\\":{\\\"token\\\":\\\"$2a$04$MgBwlqMpjV/9Vy8FLSFjKuyt0d6Gy4K.zVixiix2htf3dr2i6QnNe\\\",\\\"expiry\\\":1722090413,\\\"updated_at\\\":\\\"2024-07-13T14:26:53Z\\\"}}\""], ["updated_at", "2024-07-13 14:26:53.431590"], ["id", 91]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customer/91" for 127.0.0.1 at 2024-07-13 14:26:53 +0000
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/v1/customer/invalid" for 127.0.0.1 at 2024-07-13 14:26:53 +0000
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.0ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$AuVlU0331VUzuKu3AKw4J.D/JzFT9b.qIbqtR0IA7G2V3tS1p7JIi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:27:25.845833"], ["updated_at", "2024-07-13 14:27:25.845833"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"AvqH2cFRRyUhJuEBIKJckg\\\":{\\\"token\\\":\\\"$2a$04$MNGAq2KIKb00uMKBSMPJk.jsibzUX.PWbk6u9toCWUFEUbFWa7p.y\\\",\\\"expiry\\\":1722090445,\\\"updated_at\\\":\\\"2024-07-13T14:27:25Z\\\"}}\""], ["updated_at", "2024-07-13 14:27:25.850370"], ["id", 92]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/92" for 127.0.0.1 at 2024-07-13 14:27:25 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"92"}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 141)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.5ms | Allocations: 681)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 92], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 3.1ms | ActiveRecord: 1.4ms | Allocations: 4670)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/v1/customers/invalid" for 127.0.0.1 at 2024-07-13 14:27:25 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"invalid"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2741)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jpO8QUzKBh/XAandPoPUSeSK.MAqSUjpD8l0y.hwKrg3IK3b1TNVG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:27:56.397848"], ["updated_at", "2024-07-13 14:27:56.397848"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"cseFVvzU-zUbboirFuA7fg\\\":{\\\"token\\\":\\\"$2a$04$6Vmp53qhW/JiIULE2jC4Be.udLc0HiTNlTngb.4WdunNPH30Eqieq\\\",\\\"expiry\\\":1722090476,\\\"updated_at\\\":\\\"2024-07-13T14:27:56Z\\\"}}\""], ["updated_at", "2024-07-13 14:27:56.402331"], ["id", 93]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/93" for 127.0.0.1 at 2024-07-13 14:27:56 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"93"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 141)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 681)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.1ms | ActiveRecord: 1.7ms | Allocations: 4670)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:27:56 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 2741)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$my6MerdAm9Vz7ExRVYVe1O4gfQyPt57hs9fGjH8WuaxugKMN9kMmW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:28:09.436782"], ["updated_at", "2024-07-13 14:28:09.436782"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"TpFp2Qa1aIfK0iI-x81_ig\\\":{\\\"token\\\":\\\"$2a$04$QVssYI80mODKiSgB/C2mUu5KI9iwWTQI9zUpOSzWMsvJzsgrwEKV.\\\",\\\"expiry\\\":1722090489,\\\"updated_at\\\":\\\"2024-07-13T14:28:09Z\\\"}}\""], ["updated_at", "2024-07-13 14:28:09.440546"], ["id", 94]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/94" for 127.0.0.1 at 2024-07-13 14:28:09 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"94"}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 141)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 681)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 94], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.1ms | ActiveRecord: 1.5ms | Allocations: 4670)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$PpxFS.4Y0Pa/Ndx.wMxFO.qUIKy7pI0DpjkvY/LGw18Pg1FbrHnH2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:28:09.475280"], ["updated_at", "2024-07-13 14:28:09.475280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"4Y-lo8JRuXeq9uKjFd2bxA\\\":{\\\"token\\\":\\\"$2a$04$6tfoISs/.mmaxRT.z/6KuOb1E3K2I56K2RCRCWu.KXy9rUuCAoLT6\\\",\\\"expiry\\\":1722090489,\\\"updated_at\\\":\\\"2024-07-13T14:28:09Z\\\"}}\""], ["updated_at", "2024-07-13 14:28:09.477784"], ["id", 95]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:28:09 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 27)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 0.3ms | Allocations: 161)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 95], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 1.8ms | Allocations: 1634)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2aQBxLAx0WD.rsws4B9Czu8Y39rU3hs.U.CwtH5pl3dkBvGqK2jpS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:28:27.326390"], ["updated_at", "2024-07-13 14:28:27.326390"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"RmpXgBbHt6pMttXLWTheqg\\\":{\\\"token\\\":\\\"$2a$04$CPCNcQrBMsDpEsJVhK1SqOWvzKz2C7olJK2q.B7DiSskjjxZwqvhu\\\",\\\"expiry\\\":1722090507,\\\"updated_at\\\":\\\"2024-07-13T14:28:27Z\\\"}}\""], ["updated_at", "2024-07-13 14:28:27.330338"], ["id", 96]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/96" for 127.0.0.1 at 2024-07-13 14:28:27 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"96"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 141)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 681)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 96], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 96], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.2ms | ActiveRecord: 1.8ms | Allocations: 4670)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$oIMsQO6kXzNlI1QNuVsupuqgPZtnLqt0HhwnnR/gqe19HMNoQBRqC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:28:36.846652"], ["updated_at", "2024-07-13 14:28:36.846652"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"2-fI0Jf4ewc20dcGMHahYA\\\":{\\\"token\\\":\\\"$2a$04$lBD.p1Vvgtym/qTmmFauM.lRwMB55A0jiH/4om/ZazE51DeMrQEBC\\\",\\\"expiry\\\":1722090516,\\\"updated_at\\\":\\\"2024-07-13T14:28:36Z\\\"}}\""], ["updated_at", "2024-07-13 14:28:36.851374"], ["id", 97]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:28:36 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 141)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 681)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 97], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 97], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.1ms | ActiveRecord: 1.7ms | Allocations: 4670)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$nn81SuK2T4PVWyUBNjixz.JAQuryRQyF1.yAVg18jgNyIrzUzwl5C"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:29:36.161250"], ["updated_at", "2024-07-13 14:29:36.161250"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"WJh5VLv-mt5ERBgBdFDt0w\\\":{\\\"token\\\":\\\"$2a$04$JpZrSXFzd3gOnjV0HkFPIe6oKY8HPB9ENiyMYXwyBmWjLMJUlqNcm\\\",\\\"expiry\\\":1722090576,\\\"updated_at\\\":\\\"2024-07-13T14:29:36Z\\\"}}\""], ["updated_at", "2024-07-13 14:29:36.164776"], ["id", 98]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:29:36 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (ActiveRecord: 0.8ms | Allocations: 1733)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.1ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$1lO9NGLgvzr5xU54Bxzz9OcvdWDOvwfgQw/zUEt.vt/p6XpFV40Tu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:31:14.232250"], ["updated_at", "2024-07-13 14:31:14.232250"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"KOekdSGPf4HN9m5_IoT-_A\\\":{\\\"token\\\":\\\"$2a$04$Sk8HXxMSnmIafR4O30jsL.vUpNHSOmZ2yfjvJWh3p7xmK1QeWH4Ze\\\",\\\"expiry\\\":1722090674,\\\"updated_at\\\":\\\"2024-07-13T14:31:14Z\\\"}}\""], ["updated_at", "2024-07-13 14:31:14.237489"], ["id", 99]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:31:14 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1805)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$KaCHlp.vUOBMvmPWzNjTBeNnhKae7biXU.cg14n07J35Nd7Wh6sRy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:33:33.051399"], ["updated_at", "2024-07-13 14:33:33.051399"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/100" for 127.0.0.1 at 2024-07-13 14:33:33 +0000
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ZmuydwJITWjBGNzz/AYy4Oytob8t2wjc55A9TL4HJWhx4Q9HL2Jc2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:33:54.500460"], ["updated_at", "2024-07-13 14:33:54.500460"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/101" for 127.0.0.1 at 2024-07-13 14:33:54 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"101"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 3590)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$AegWc/7hDRNqqz65CE9wD..cgTYNd/Nj5xD0ISYOxmjcjvYKRy4qm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:37:22.818979"], ["updated_at", "2024-07-13 14:37:22.818979"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sjLlVhKYpQA1BsuteOxnzw\\\":{\\\"token\\\":\\\"$2a$04$tAwBEIq7OrcrVoHFSHyVTuRGFy0Z2qhewMdk88msrxjI6xKK9jcdm\\\",\\\"expiry\\\":1722091042,\\\"updated_at\\\":\\\"2024-07-13T14:37:22Z\\\"}}\""], ["updated_at", "2024-07-13 14:37:22.823251"], ["id", 102]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/102" for 127.0.0.1 at 2024-07-13 14:37:22 +0000
Processing by Api::V1::CustomersController#update as HTML
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"102", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 14:37:22.843344"], ["id", 102]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 18ms (ActiveRecord: 1.6ms | Allocations: 3943)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$GEp9BdkSkJnJs2JQuKafNOxDWz0m1AoGwiKA5.8fP/nUO0QV3xxym"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:37:53.388330"], ["updated_at", "2024-07-13 14:37:53.388330"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"aa9gBQnaBh8u18nVSyd3Dg\\\":{\\\"token\\\":\\\"$2a$04$i7eeOBXXZnUa8XA6B/gk2.PK6CMAHtKgpIc0/acnA2UdhxJyfMIiG\\\",\\\"expiry\\\":1722091073,\\\"updated_at\\\":\\\"2024-07-13T14:37:53Z\\\"}}\""], ["updated_at", "2024-07-13 14:37:53.392104"], ["id", 103]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/103" for 127.0.0.1 at 2024-07-13 14:37:53 +0000
Processing by Api::V1::CustomersController#update as HTML
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"103", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 14:37:53.411229"], ["id", 103]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 9ms (ActiveRecord: 1.6ms | Allocations: 3942)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$uzxSXvyKpnrSLPJSNtkxsewMdBCC/Cz/Y/g7s/AsgS8WAss9dE2Ky"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.491811"], ["updated_at", "2024-07-13 14:50:47.491811"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"oyW98KOwF1Vm9rOeV_Y6ag\\\":{\\\"token\\\":\\\"$2a$04$Oyc9Cw.yKIM8azT8YK6JQ.OSWCengaSfPzi0PahhdL4w4d2gCtSYK\\\",\\\"expiry\\\":1722091847}}\""], ["updated_at", "2024-07-13 14:50:47.495118"], ["id", 104]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"oyW98KOwF1Vm9rOeV_Y6ag\\\":{\\\"token\\\":\\\"$2a$04$xxP38Dnt.bEHh20XXWKeLuNssLaAsZKEu4ZgOBXv47ZqUVw21zNba\\\",\\\"expiry\\\":1722091847,\\\"previous_token\\\":\\\"$2a$04$Oyc9Cw.yKIM8azT8YK6JQ.OSWCengaSfPzi0PahhdL4w4d2gCtSYK\\\",\\\"updated_at\\\":\\\"2024-07-13T14:50:47Z\\\"}}\""], ["updated_at", "2024-07-13 14:50:47.501327"], ["id", 104]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 9.9ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.pNmnqz2VC.H9jo9DqCCxOo9hDlj8aSVvY.6puk0nx5UfAjU.YVJe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.539892"], ["updated_at", "2024-07-13 14:50:47.539892"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$zvMOkWodqhO.aGmU5UADnuRhdmZ8ee3LZnGMaquzIwd4FrS1yDf6."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.554736"], ["updated_at", "2024-07-13 14:50:47.554736"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"xOaqKfao-dz7ZvXYHOoJkQ\\\":{\\\"token\\\":\\\"$2a$04$DHDjt4YKy.B7vxokYDIOKu7ehmiM/4lJ4dHnUW5weU49d6wXRixLq\\\",\\\"expiry\\\":1722091847,\\\"updated_at\\\":\\\"2024-07-13T14:50:47Z\\\"}}\""], ["updated_at", "2024-07-13 14:50:47.557297"], ["id", 106]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 106]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$a01ZZqSINRrUkAxTRvk5wuIvmIQN.tQFtl5BEXKmJh/6yhn8HOBW6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.577356"], ["updated_at", "2024-07-13 14:50:47.577356"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"JrC2j76XWr9diF-LRcSuAg\\\":{\\\"token\\\":\\\"$2a$04$MMwvOHq4VAt/C.vsuZ6kj.fT7CBw5LjL4jdO.NPRnrZ3hjK4SO1Re\\\",\\\"expiry\\\":1722091847}}\""], ["updated_at", "2024-07-13 14:50:47.587908"], ["id", 107]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"JrC2j76XWr9diF-LRcSuAg\\\":{\\\"token\\\":\\\"$2a$04$YLCkt4Zmhkwu/3t71ZR4oORkIZoxWeCemlDD1LESgZCrYKkr31Fdq\\\",\\\"expiry\\\":1722091847,\\\"previous_token\\\":\\\"$2a$04$MMwvOHq4VAt/C.vsuZ6kj.fT7CBw5LjL4jdO.NPRnrZ3hjK4SO1Re\\\",\\\"updated_at\\\":\\\"2024-07-13T14:50:47Z\\\"}}\""], ["updated_at", "2024-07-13 14:50:47.593377"], ["id", 107]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$tt0dKnw4S1Xy/ZdtiINRteVPATfH/DKcCIiC3hzqO98msRSPQ9Xoq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.602868"], ["updated_at", "2024-07-13 14:50:47.602868"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$kbn34haW1WGouBQyTNbyoOgwKJXTbCdqGJ8esvC3SK.uW2UeRiw2m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.615390"], ["updated_at", "2024-07-13 14:50:47.615390"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"y3etUkEryHFJW6ozeLDbuA\\\":{\\\"token\\\":\\\"$2a$04$HAqUWj.Ep59fBO.BRHqFIu/M7LxO7Ayk.NczNg5XU9UrEAGBNMSKi\\\",\\\"expiry\\\":1722091847,\\\"updated_at\\\":\\\"2024-07-13T14:50:47Z\\\"}}\""], ["updated_at", "2024-07-13 14:50:47.618632"], ["id", 109]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/109" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"109"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 109], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.2ms | ActiveRecord: 2.2ms | Allocations: 3625)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$XoQQnJ9vn02V8TDUxBOi4u4uRZtSWUIPxhxRo7luGovzqzAUsG7gS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.667166"], ["updated_at", "2024-07-13 14:50:47.667166"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"wJfmvtCK-VJvJ-rUvVG2bA\\\":{\\\"token\\\":\\\"$2a$04$kWqf17cIKlj1bfCUmVkpGeTS.5qATJOzxNdPST78vaFnCL6EEeU8S\\\",\\\"expiry\\\":1722091847,\\\"updated_at\\\":\\\"2024-07-13T14:50:47Z\\\"}}\""], ["updated_at", "2024-07-13 14:50:47.670542"], ["id", 110]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 466)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$8Ja8T7iEqp4B6LSJBdjPOerJ5WwJbT6hKfPZPpCY6IAyR4CyDA7Gu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.682953"], ["updated_at", "2024-07-13 14:50:47.682953"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/111" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"111"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$pMMtYpGxSjgDBmAV2XFuHOqm2O19TDVZ3DWEjztSSpnih/CxRwhne"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:50:47.691830"], ["updated_at", "2024-07-13 14:50:47.691830"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"IpozuL1j17w5HpflkklG8w\\\":{\\\"token\\\":\\\"$2a$04$q73BrBmuRysIx0RQ2cYu1.rtS7W1ffzrkidp/BpPeGvp8BJOOFebm\\\",\\\"expiry\\\":1722091847,\\\"updated_at\\\":\\\"2024-07-13T14:50:47Z\\\"}}\""], ["updated_at", "2024-07-13 14:50:47.694479"], ["id", 112]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/112" for 127.0.0.1 at 2024-07-13 14:50:47 +0000
Processing by Api::V1::CustomersController#update as HTML
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"112", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 14:50:47.704391"], ["id", 112]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 8ms (ActiveRecord: 1.8ms | Allocations: 2256)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$nWoOeT86NpLMxfUQ5mEGvOkEqemGstup4QfFUcrgT6Hv8BDO0d0vy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:52:41.049598"], ["updated_at", "2024-07-13 14:52:41.049598"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"qZXAY4-_fE8fX6bJj-0FZQ\\\":{\\\"token\\\":\\\"$2a$04$NPhD68yM1nGBZhEL0o7Ihu9jXFGkE2DmUzpMEgyefmrGq09ELMw.6\\\",\\\"expiry\\\":1722091961,\\\"updated_at\\\":\\\"2024-07-13T14:52:41Z\\\"}}\""], ["updated_at", "2024-07-13 14:52:41.053320"], ["id", 113]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/113" for 127.0.0.1 at 2024-07-13 14:52:41 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"id"=>"113"}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
[31mUnpermitted parameter: :id[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 113], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 2.1ms | ActiveRecord: 1.8ms | Allocations: 5301)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:57:06 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$cgtFG2blYnufasDEiMxmgeGAZ9MqGmu8Uc9RL1csMDJLj967ztLjy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.025013"], ["updated_at", "2024-07-13 14:57:07.025013"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"VvoejI6e-cLVdFkYutL_8A\\\":{\\\"token\\\":\\\"$2a$04$U2MTKfQwRMRBCwyoW.Twmu73W/0sDHJUMrxpOn2.w3/2i72kbi/rK\\\",\\\"expiry\\\":1722092227}}\""], ["updated_at", "2024-07-13 14:57:07.028368"], ["id", 114]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 114], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 114], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"VvoejI6e-cLVdFkYutL_8A\\\":{\\\"token\\\":\\\"$2a$04$dXq/q6EU2yrfBWmo.ecEn.wUja.m46zriHlZvtyivfm6qgrRr4Kwi\\\",\\\"expiry\\\":1722092227,\\\"previous_token\\\":\\\"$2a$04$U2MTKfQwRMRBCwyoW.Twmu73W/0sDHJUMrxpOn2.w3/2i72kbi/rK\\\",\\\"updated_at\\\":\\\"2024-07-13T14:57:07Z\\\"}}\""], ["updated_at", "2024-07-13 14:57:07.034304"], ["id", 114]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 9.7ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$a73AARPzf4Z2kzi6U4s0ZuMC7VgjPayT96RNCLsa8CzulAeJfB6eO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.071478"], ["updated_at", "2024-07-13 14:57:07.071478"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6s9xe1vNC3C0kian5GoM6uYFukX/thSD7UTJd.EdK/pG3BbtopVCy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.085828"], ["updated_at", "2024-07-13 14:57:07.085828"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"aSCP1TTxis9CNoAH6uBtHQ\\\":{\\\"token\\\":\\\"$2a$04$8giQ6b1aZGnRJYNI42yLo.vMrgnk0ATt.SfcBUso8wfe8NsL8iKU.\\\",\\\"expiry\\\":1722092227,\\\"updated_at\\\":\\\"2024-07-13T14:57:07Z\\\"}}\""], ["updated_at", "2024-07-13 14:57:07.088523"], ["id", 116]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 116]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$XgmJ/6Oc.Pvjvo1mtPBIEe/leFkIpCpKiCsIkgFD7aPqNpNHsL7Am"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.107474"], ["updated_at", "2024-07-13 14:57:07.107474"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 117], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"R2PjW3qSFYTESva0rCThqg\\\":{\\\"token\\\":\\\"$2a$04$4okEgyQb/1lA38uKSwcFNu5TkM4vghNNG5zKqQzL2KsQotVL.3AMm\\\",\\\"expiry\\\":1722092227}}\""], ["updated_at", "2024-07-13 14:57:07.118681"], ["id", 117]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 117], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 117], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"R2PjW3qSFYTESva0rCThqg\\\":{\\\"token\\\":\\\"$2a$04$vVRlSa7hlFMK1dnZKk4rE.UWBl2kjp/aY9JD6r8j9eiltrnh4sqo2\\\",\\\"expiry\\\":1722092227,\\\"previous_token\\\":\\\"$2a$04$4okEgyQb/1lA38uKSwcFNu5TkM4vghNNG5zKqQzL2KsQotVL.3AMm\\\",\\\"updated_at\\\":\\\"2024-07-13T14:57:07Z\\\"}}\""], ["updated_at", "2024-07-13 14:57:07.124439"], ["id", 117]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.7ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$CryEmvuqNOASpVifmpXnNOVv4OXAYphmhU8Z00en1HX.GdDzNXgQ."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.130250"], ["updated_at", "2024-07-13 14:57:07.130250"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 596)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$g.MlXOGeROLduC.u8k5vTOvBfDV6TknJRUranaKDL.S9dd381x/1e"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.141802"], ["updated_at", "2024-07-13 14:57:07.141802"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"GqcF8NnTcJ0RSXlIKI8Nwg\\\":{\\\"token\\\":\\\"$2a$04$PZ3p12elQLVCmIRQ7EEz2e3u92DPOoN6e/0ZgRFv/5rFz6XlMzfYu\\\",\\\"expiry\\\":1722092227,\\\"updated_at\\\":\\\"2024-07-13T14:57:07Z\\\"}}\""], ["updated_at", "2024-07-13 14:57:07.144383"], ["id", 119]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/119" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"119"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 119], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 119], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 119], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 2.1ms | ActiveRecord: 2.0ms | Allocations: 3626)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$DvxmY3anP9xt10Ks0YTid.oq9z11QRqv9B2P5UmZjbZzTFoW0d/pS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.191025"], ["updated_at", "2024-07-13 14:57:07.191025"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ibLPlkm5firC95pp1edrlw\\\":{\\\"token\\\":\\\"$2a$04$yqb75AXa27huBq/7nrGD6utPpVFiE1lMkhsF/R8ZdsBLUSGbCTgYO\\\",\\\"expiry\\\":1722092227,\\\"updated_at\\\":\\\"2024-07-13T14:57:07Z\\\"}}\""], ["updated_at", "2024-07-13 14:57:07.194199"], ["id", 120]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 465)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$t/Nr9Ke/YefSANPA/etdcuv./fZE7/59pz8sRCFEb9UWb2RQQExT."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.206175"], ["updated_at", "2024-07-13 14:57:07.206175"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/121" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"121"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$KbuvFKM1TwY3prCEkGnA4uxiIaTysxl6pZ5cPW9Z6AnHnYcPScCaS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:57:07.215555"], ["updated_at", "2024-07-13 14:57:07.215555"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"GbMs8KFclgrEjiJYjbs-0g\\\":{\\\"token\\\":\\\"$2a$04$Er22sCX4tuglnSCTVkoSUOLiAFteyGDB6S0zEtx.gh7yvh41De/d2\\\",\\\"expiry\\\":1722092227,\\\"updated_at\\\":\\\"2024-07-13T14:57:07Z\\\"}}\""], ["updated_at", "2024-07-13 14:57:07.218140"], ["id", 122]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/122" for 127.0.0.1 at 2024-07-13 14:57:07 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"id"=>"122"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
[31mUnpermitted parameter: :id[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 210)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 122], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 2322)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$IhtWvs1g8ClBE4u0EwmXYeQlvxlGLU.3d2O8uijLwaxtH00fHGb5u"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.794465"], ["updated_at", "2024-07-13 14:58:01.794465"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ZJaFUXOYrar-hXRomyItyA\\\":{\\\"token\\\":\\\"$2a$04$IH/kJM1R2.ugSUQ8016qjuZOmXRMByAlGasH9BDRlK0SAzZr96xCq\\\",\\\"expiry\\\":1722092281}}\""], ["updated_at", "2024-07-13 14:58:01.798157"], ["id", 123]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 123], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ZJaFUXOYrar-hXRomyItyA\\\":{\\\"token\\\":\\\"$2a$04$HVDo/AirrmQsxjIjpvECAuTMCvwWM3BRk2ObmDTYhdiw.MuvrxLPG\\\",\\\"expiry\\\":1722092281,\\\"previous_token\\\":\\\"$2a$04$IH/kJM1R2.ugSUQ8016qjuZOmXRMByAlGasH9BDRlK0SAzZr96xCq\\\",\\\"updated_at\\\":\\\"2024-07-13T14:58:01Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:01.805223"], ["id", 123]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 11.7ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$BPAc3qxG5i1pbcyuV3P.CumkaR/t1AydKi2M1nUov4vCS2qkGsjl2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.844454"], ["updated_at", "2024-07-13 14:58:01.844454"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ageIB4GlH6NaMDNfsH8RSevLwm9Onh85c4M2.a4Xrct0PvEO8m4KW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.857139"], ["updated_at", "2024-07-13 14:58:01.857139"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"dy-quhkCffG_sk4x3086rw\\\":{\\\"token\\\":\\\"$2a$04$Q1mNFuLhJ8lbuDEMFV1VyupisWqWhQi3ic285ooevgeeI8CymAQBK\\\",\\\"expiry\\\":1722092281,\\\"updated_at\\\":\\\"2024-07-13T14:58:01Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:01.859695"], ["id", 125]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 125]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$kRINbz/Jd52DMf4CBdsLGOU8jz8fqI25ubu30DGOKfqN.Im4ba4Ma"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.878220"], ["updated_at", "2024-07-13 14:58:01.878220"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Oy2gO5o_groaDrUsukTqLw\\\":{\\\"token\\\":\\\"$2a$04$fEgpYIIS.H/uW/0i98CmkODG6/YG08P1AF2wi4O5ZfBDFdc5pCIi2\\\",\\\"expiry\\\":1722092281}}\""], ["updated_at", "2024-07-13 14:58:01.888442"], ["id", 126]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Oy2gO5o_groaDrUsukTqLw\\\":{\\\"token\\\":\\\"$2a$04$E0xHL9qE4Wf5Jq2zftdizuh/V0lFsimV4Nug4tT/RrQiOUcLJgITu\\\",\\\"expiry\\\":1722092281,\\\"previous_token\\\":\\\"$2a$04$fEgpYIIS.H/uW/0i98CmkODG6/YG08P1AF2wi4O5ZfBDFdc5pCIi2\\\",\\\"updated_at\\\":\\\"2024-07-13T14:58:01Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:01.894043"], ["id", 126]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$eWT8l0JSQhpFk/Y3.0v1E.wjtxGiZ0GtHSyg4ZT3vmFMk.SUcqtFi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.900799"], ["updated_at", "2024-07-13 14:58:01.900799"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$26UxSObHqj8lACpmHzB7CuLAA2vTo6y0UZcXZqE1nKBkD1zbqFPAW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.933556"], ["updated_at", "2024-07-13 14:58:01.933556"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"LAbhu50Mr3OMsStQO0j42g\\\":{\\\"token\\\":\\\"$2a$04$rgDs9cptD2CEbKrVbrc8muky.2dbkzNep81hO3k1.oWySQnx29adO\\\",\\\"expiry\\\":1722092281,\\\"updated_at\\\":\\\"2024-07-13T14:58:01Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:01.937007"], ["id", 128]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/128" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"128"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.1ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 128], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 3.1ms | ActiveRecord: 2.0ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$njc.dUxHKyXI5f3OvpswteJj4yjgeuPODyDn.t4pX9R2NxWMNNjbK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.960486"], ["updated_at", "2024-07-13 14:58:01.960486"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Aio4mIwLPVg53HBIzQDVZg\\\":{\\\"token\\\":\\\"$2a$04$rDrxMeU26.hhOclVqfHt9O9AX3Ah9pwRo0ube/2cu1tUwFhC8rPT2\\\",\\\"expiry\\\":1722092281,\\\"updated_at\\\":\\\"2024-07-13T14:58:01Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:01.963056"], ["id", 129]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 466)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$TWu3iKYKYsH5aH5oYBGw8eAyRvBmRyqb.b47/G7YVaOHQu3CUADde"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.975608"], ["updated_at", "2024-07-13 14:58:01.975608"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/130" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"130"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$tpwUC7mbge5WJ46oRAhrRuklLphZwoihUv.G6qAqt/nU.5AG7z0Rm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:01.985389"], ["updated_at", "2024-07-13 14:58:01.985389"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"hPLtwJIkmyd9Jt1O8OBHrQ\\\":{\\\"token\\\":\\\"$2a$04$lTUrIPKJREeiQw.PoDyKX.cE0cz4Yz1Lp/cCD71BEUPpBOSq5GJiO\\\",\\\"expiry\\\":1722092281,\\\"updated_at\\\":\\\"2024-07-13T14:58:01Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:01.988467"], ["id", 131]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/131" for 127.0.0.1 at 2024-07-13 14:58:01 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"id"=>"131"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
[31mUnpermitted parameter: :id[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 1.9ms | Allocations: 2316)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$xxP237BTl44uGDGL/1MIE.0B6Kl1cjHcYGcfY0vwcqM2sbUNWvCsK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.350442"], ["updated_at", "2024-07-13 14:58:23.350442"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"OcnnX9gHIkyALm7rEXPJaw\\\":{\\\"token\\\":\\\"$2a$04$PUkxRM1fF.NW7EgDmAf6c.2uNM1Q3zRNVfplLvNx6qZNjOzQqL09S\\\",\\\"expiry\\\":1722092303}}\""], ["updated_at", "2024-07-13 14:58:23.353435"], ["id", 132]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 132], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"OcnnX9gHIkyALm7rEXPJaw\\\":{\\\"token\\\":\\\"$2a$04$melnUVdjN8k9NG4V5wCLJ.Kp1J8m8uUKW9V6bEr5lot5bRWU3ttxO\\\",\\\"expiry\\\":1722092303,\\\"previous_token\\\":\\\"$2a$04$PUkxRM1fF.NW7EgDmAf6c.2uNM1Q3zRNVfplLvNx6qZNjOzQqL09S\\\",\\\"updated_at\\\":\\\"2024-07-13T14:58:23Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:23.359084"], ["id", 132]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 17009)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$su9GlQfB9rCK.6UiOm7y/ee0.cSRK20PQDnkDY4fx.3Bxq0oPCfaq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.396970"], ["updated_at", "2024-07-13 14:58:23.396970"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$yhVdx0LlndcKOoy7gaOuiOjF.ofHVD.ie9LF5O/r4gl7ZrbXDzcDO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.410797"], ["updated_at", "2024-07-13 14:58:23.410797"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"CT7_OrqO-Ib_fKdiG950pA\\\":{\\\"token\\\":\\\"$2a$04$m6M92KJD/YpG9I.PjGp3O.HlzyMBaInJbV.6oBuXxTAeuB/nYcObq\\\",\\\"expiry\\\":1722092303,\\\"updated_at\\\":\\\"2024-07-13T14:58:23Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:23.413337"], ["id", 134]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 134]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Ztu5g5RSNmG.ZIFYZC4rN.fgIfDgsHdfOKNO7vSiBydbK9GIXMp1C"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.431565"], ["updated_at", "2024-07-13 14:58:23.431565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SBN9SFrKYWOWntlNaEZjlA\\\":{\\\"token\\\":\\\"$2a$04$Gp0DQhljzSERg5XPQGsDRO1RdS0ajBLpmYLNRx1H/P62NjF1s5/si\\\",\\\"expiry\\\":1722092303}}\""], ["updated_at", "2024-07-13 14:58:23.442676"], ["id", 135]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SBN9SFrKYWOWntlNaEZjlA\\\":{\\\"token\\\":\\\"$2a$04$9qdA/.zIuIjWAZ52IsMtCePgHOStuWvrR8.c1TKXu0I42bt.K2Yoq\\\",\\\"expiry\\\":1722092303,\\\"previous_token\\\":\\\"$2a$04$Gp0DQhljzSERg5XPQGsDRO1RdS0ajBLpmYLNRx1H/P62NjF1s5/si\\\",\\\"updated_at\\\":\\\"2024-07-13T14:58:23Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:23.447980"], ["id", 135]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$futRWNIzkUBnmn1wQf2DluFkwCb3.OvnlRNKcaBa3xbChtS6vhhI2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.454314"], ["updated_at", "2024-07-13 14:58:23.454314"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$LlO4wMgcXItWTbWu9YoGv.TriN4r/cHzssd4BmW.xsdg/NHBTIYMq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.489464"], ["updated_at", "2024-07-13 14:58:23.489464"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Dh0UMR-YNoM50XkAG2M_vQ\\\":{\\\"token\\\":\\\"$2a$04$GgFa3DqcA7.c3kcbDVfo2uqcBCxbIA4JkNO5/g5nXhW8yrdvViV7y\\\",\\\"expiry\\\":1722092303,\\\"updated_at\\\":\\\"2024-07-13T14:58:23Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:23.493067"], ["id", 137]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/137" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"137"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 137], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 2.2ms | ActiveRecord: 2.1ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$FF5UvvCHZhDAVDpslKbsKehAcT0PYxLiSjevMqrhQHfckd1IcEuu6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.516794"], ["updated_at", "2024-07-13 14:58:23.516794"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"MtRGvJDp-RrU0vcFfcUEXQ\\\":{\\\"token\\\":\\\"$2a$04$ofFyiMlUqMzmqp/FR.nIOOiPLQRT2KVK8Mm7TazNR7DPheLkAN6jS\\\",\\\"expiry\\\":1722092303,\\\"updated_at\\\":\\\"2024-07-13T14:58:23Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:23.519356"], ["id", 138]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 466)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$qvTgRjePz/9rIUHPy7wl7.pmk8ZaXGEHkR9885ix376JAEufMBRXu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.532393"], ["updated_at", "2024-07-13 14:58:23.532393"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/139" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"139"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dUAYHWi8j6zzNe4gQ8VHEupqt7a9zloggxQI/vXbhFHSH5frc4hZ6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 14:58:23.541747"], ["updated_at", "2024-07-13 14:58:23.541747"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"XzImztMgCILpaYDR2De2sA\\\":{\\\"token\\\":\\\"$2a$04$9JpI8wwB8F/aY1CvC5TFP..HcroWmK3X45zOWdQ.MhCWMIr0mgdnS\\\",\\\"expiry\\\":1722092303,\\\"updated_at\\\":\\\"2024-07-13T14:58:23Z\\\"}}\""], ["updated_at", "2024-07-13 14:58:23.544171"], ["id", 140]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/140" for 127.0.0.1 at 2024-07-13 14:58:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"id"=>"140"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 140], ["LIMIT", 1]]
[31mUnpermitted parameter: :id[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 140], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 140], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 1.6ms | Allocations: 2316)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:02 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Bpb4NlA.IE9Qy8zwrv1.ReinZuF0BNYy4C0qITPQcPqmuKxbEthDS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:02.953369"], ["updated_at", "2024-07-13 15:00:02.953369"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"7Dif6o39yoX9E0VIGHstmQ\\\":{\\\"token\\\":\\\"$2a$04$dMl47tDKRkThmuJzv5hxo.dNsZ5T3gTyAeD4OM9iJlMJpSK72Nc7K\\\",\\\"expiry\\\":1722092402}}\""], ["updated_at", "2024-07-13 15:00:02.956517"], ["id", 141]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 141], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 141], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"7Dif6o39yoX9E0VIGHstmQ\\\":{\\\"token\\\":\\\"$2a$04$K7nf6HyUgWhJn3XaOnGYZ.WdUyDBSEoBEthOl4zySQ7aBCFVwVS9a\\\",\\\"expiry\\\":1722092402,\\\"previous_token\\\":\\\"$2a$04$dMl47tDKRkThmuJzv5hxo.dNsZ5T3gTyAeD4OM9iJlMJpSK72Nc7K\\\",\\\"updated_at\\\":\\\"2024-07-13T15:00:02Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:02.962138"], ["id", 141]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 7.8ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:02 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:02 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:02 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jzGAJS1eXTa4Sd4KjYscWOnfNfKH7qDygIYDWXms361Bd6QWKXZe2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:02.999227"], ["updated_at", "2024-07-13 15:00:02.999227"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$uHZHx6oBs6rkGa.YQrZbv.wjZFa6F4H2FRJnXApOqsqi6nDpw4o.2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:03.011756"], ["updated_at", "2024-07-13 15:00:03.011756"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"pagfCxp2r6IT7uh-Mh4tCw\\\":{\\\"token\\\":\\\"$2a$04$.UP7wwyN23xTqM2MmpasH.Zw5FG7HOfnCp.k.9r4eX2lC0YDcSpey\\\",\\\"expiry\\\":1722092403,\\\"updated_at\\\":\\\"2024-07-13T15:00:03Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:03.014345"], ["id", 143]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 143]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3LYsQDX9iAT4EpuuN.oTw.NN/2csZq2ZzgNOsvVVTOtfdC/cgbcKu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:03.032401"], ["updated_at", "2024-07-13 15:00:03.032401"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 144], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"l5OmH5x4xo8AIAKhATcb4Q\\\":{\\\"token\\\":\\\"$2a$04$e3OFULhYtT2yiDe9O25mHOwfuDTpVGnYm9VlvH8aYeWzefrU2/1eS\\\",\\\"expiry\\\":1722092403}}\""], ["updated_at", "2024-07-13 15:00:03.043167"], ["id", 144]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 144], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"l5OmH5x4xo8AIAKhATcb4Q\\\":{\\\"token\\\":\\\"$2a$04$jgGOoPfCMmPpQqVvAgwkLeGMmC9nU83OoihMyXqGF1lxV9ziLr6bW\\\",\\\"expiry\\\":1722092403,\\\"previous_token\\\":\\\"$2a$04$e3OFULhYtT2yiDe9O25mHOwfuDTpVGnYm9VlvH8aYeWzefrU2/1eS\\\",\\\"updated_at\\\":\\\"2024-07-13T15:00:03Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:03.048496"], ["id", 144]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$/LRWqRKgSVH8XXxDT8E4J.dTY7Eyv/0fnc9afdLsEWbt2I3.7Hor6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:03.054831"], ["updated_at", "2024-07-13 15:00:03.054831"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$E37daCYFNARCtlNXYKYyGeJ3F0Zpv4rBHdV0WL7mJdHqPrBj8Pl16"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:03.066290"], ["updated_at", "2024-07-13 15:00:03.066290"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"fC7FRNoQjCl5AdTurYijaA\\\":{\\\"token\\\":\\\"$2a$04$YguditZQnfdGMDNmHZYj2OJbCeZlFiAdQvvX4BorVIvCg4u0Os48i\\\",\\\"expiry\\\":1722092403,\\\"updated_at\\\":\\\"2024-07-13T15:00:03Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:03.068975"], ["id", 146]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/146" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"146"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 146], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.1ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 146], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 146], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.1ms | ActiveRecord: 1.9ms | Allocations: 3625)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$4Od1k9FH7IB1IOXcv8prtu2BSaQwILCK4lwOW3GXO7fa2OcflHUEC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:03.089147"], ["updated_at", "2024-07-13 15:00:03.089147"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"z4UsB_etT_Zx6zTGC-eM4A\\\":{\\\"token\\\":\\\"$2a$04$9VntFfP6RxoLfHETOqcky.ey8ZgBzUVpz5DBQETSdJtZ1vB5m7X.q\\\",\\\"expiry\\\":1722092403,\\\"updated_at\\\":\\\"2024-07-13T15:00:03Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:03.091844"], ["id", 147]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 466)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$qLlwnYi6GZ/X3K71iS8lLucwwru6McsRj2dr5VAV6FiFc2ZbrT.DK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:03.129808"], ["updated_at", "2024-07-13 15:00:03.129808"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/148" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"148"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.H4J7cIvoMY/o3xxOa5ci.7hSOeXVzqWVBy8T1ZeGHGhqcQOh7hC6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:03.139240"], ["updated_at", "2024-07-13 15:00:03.139240"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"7Rtt3x9dhuscBy4iW7-k1A\\\":{\\\"token\\\":\\\"$2a$04$y5//hruhtYPXe64Q02RFOearZwF1vWDoqFQL7df3lb4VDyNz9vwgy\\\",\\\"expiry\\\":1722092403,\\\"updated_at\\\":\\\"2024-07-13T15:00:03Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:03.141978"], ["id", 149]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/149" for 127.0.0.1 at 2024-07-13 15:00:03 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"id"=>"149"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
[31mUnpermitted parameter: :id[0m
[31mUnpermitted parameter: :id[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 1.2ms | Allocations: 210)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 149], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"7Rtt3x9dhuscBy4iW7-k1A\\\":{\\\"token\\\":\\\"$2a$04$y5//hruhtYPXe64Q02RFOearZwF1vWDoqFQL7df3lb4VDyNz9vwgy\\\",\\\"expiry\\\":1722092403,\\\"updated_at\\\":\\\"2024-07-13T15:00:22Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:22.575198"], ["id", 149]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19431ms (Views: 1.8ms | ActiveRecord: 2.6ms | Allocations: 116274)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$k6.D6cKmLBl32B/Nno6y1O3QIc9btygO7vmbnJGX5q3oOOCJ.ItU6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.529419"], ["updated_at", "2024-07-13 15:00:35.529419"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"nvsKnaksWTevUkpWLBXEzw\\\":{\\\"token\\\":\\\"$2a$04$W.S7wNbJBfGI0KsDWEyfH.NP742Ub1SH8xm1y9v3JA.ygusdrtflK\\\",\\\"expiry\\\":1722092435}}\""], ["updated_at", "2024-07-13 15:00:35.533009"], ["id", 150]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"nvsKnaksWTevUkpWLBXEzw\\\":{\\\"token\\\":\\\"$2a$04$aQ0kICqYFyS8aywWN.lDSuvWNkMPuLcrVvVb1JD1OElI3gWMJ.Wra\\\",\\\"expiry\\\":1722092435,\\\"previous_token\\\":\\\"$2a$04$W.S7wNbJBfGI0KsDWEyfH.NP742Ub1SH8xm1y9v3JA.ygusdrtflK\\\",\\\"updated_at\\\":\\\"2024-07-13T15:00:35Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:35.539046"], ["id", 150]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 9.3ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$mFZ9aQ/oPjSJPTwujbPqqeMjIpzM3zgXXQ5bXwqGzRNBtps0YzVpi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.577615"], ["updated_at", "2024-07-13 15:00:35.577615"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$h/MQ27lukyFAU1IBeQ08N.3gvdFfEQNcwU95XhPzXNtqZbWcIPkfS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.592304"], ["updated_at", "2024-07-13 15:00:35.592304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"rlMs6hxZbytFor_muCfhXA\\\":{\\\"token\\\":\\\"$2a$04$DrYXzOqwv/M4EDuIWsAwpe21X2S2b6bTiGHjDuTpLybmKbk45H64O\\\",\\\"expiry\\\":1722092435,\\\"updated_at\\\":\\\"2024-07-13T15:00:35Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:35.594969"], ["id", 152]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 152]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6kMSKw8PZSG2sdQT4UBZeuLPUrsJVee5/u1ha/E2oaZJVFBGSFXAa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.615393"], ["updated_at", "2024-07-13 15:00:35.615393"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 153], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"WQ15XTrKQQBi-rCvogHKzA\\\":{\\\"token\\\":\\\"$2a$04$aiQQ8mGnesBRzt5abv82ku/BIat2Yq3B15WayOS6bhegEP1zQoOSO\\\",\\\"expiry\\\":1722092435}}\""], ["updated_at", "2024-07-13 15:00:35.626006"], ["id", 153]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 153], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 153], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"WQ15XTrKQQBi-rCvogHKzA\\\":{\\\"token\\\":\\\"$2a$04$NxRp8kB5rxiyTOM6QSh5WOmwZ2GkuxhArge5BYA.01HI226GHZYAW\\\",\\\"expiry\\\":1722092435,\\\"previous_token\\\":\\\"$2a$04$aiQQ8mGnesBRzt5abv82ku/BIat2Yq3B15WayOS6bhegEP1zQoOSO\\\",\\\"updated_at\\\":\\\"2024-07-13T15:00:35Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:35.631674"], ["id", 153]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$iOWhntaS6mxUUk3zn2q3nOfrZThdCXeyyizYDiQkWnlt1rCot2Rom"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.637995"], ["updated_at", "2024-07-13 15:00:35.637995"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$YzSfQfoP8EH0O3oe9YvtvuEEhwTqB90pFQArCfDYOEF2SAebKsL8a"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.675766"], ["updated_at", "2024-07-13 15:00:35.675766"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"G36FbZg1_bc4ohzWiixUuQ\\\":{\\\"token\\\":\\\"$2a$04$gmGG/URqYu9PkX05PvyTsODmkq3z04AMO5FKl02SLSrXTrwiFa3LC\\\",\\\"expiry\\\":1722092435,\\\"updated_at\\\":\\\"2024-07-13T15:00:35Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:35.679445"], ["id", 155]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/155" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"155"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 155], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 2.2ms | ActiveRecord: 2.3ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$qst1kLbmynbttMb8i/Ghh.kjWqLijRDmr6Z7joLi003U4/F8fd1y6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.701880"], ["updated_at", "2024-07-13 15:00:35.701880"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"h_asanPdShFMaX4twEebHg\\\":{\\\"token\\\":\\\"$2a$04$kxOxOa9QDkSxVk1fMPyYau2bVvyWg8KE6OiNOSa.Vr1xNr.nyB0Wu\\\",\\\"expiry\\\":1722092435,\\\"updated_at\\\":\\\"2024-07-13T15:00:35Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:35.705159"], ["id", 156]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 466)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$RmwSUKw7PMR3SzTrXF2ix.cdauuFGGV9KDsmu59pCGEsSBeYdwzLW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.718428"], ["updated_at", "2024-07-13 15:00:35.718428"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/157" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"157"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gkAxUpzz./UVswmRXXc1O.xqrtKDXh4Iwdi9vIVEtMyvNn8LEPgMK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:35.727684"], ["updated_at", "2024-07-13 15:00:35.727684"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mzFz0HWigOFOo7IF3dhBmw\\\":{\\\"token\\\":\\\"$2a$04$7X23OkhiXzq1ZRBj5efYK.CE1fYxzy99ISOomNuh18aG7htGwDXrS\\\",\\\"expiry\\\":1722092435,\\\"updated_at\\\":\\\"2024-07-13T15:00:35Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:35.730302"], ["id", 158]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/158" for 127.0.0.1 at 2024-07-13 15:00:35 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"158", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:00:44.063572"], ["id", 158]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 1.1ms | Allocations: 209)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 158], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mzFz0HWigOFOo7IF3dhBmw\\\":{\\\"token\\\":\\\"$2a$04$7X23OkhiXzq1ZRBj5efYK.CE1fYxzy99ISOomNuh18aG7htGwDXrS\\\",\\\"expiry\\\":1722092435,\\\"updated_at\\\":\\\"2024-07-13T15:00:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:44.075549"], ["id", 158]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8343ms (Views: 1.8ms | ActiveRecord: 5.2ms | Allocations: 96732)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$wWQ1fa3lRve64Y9/HHQzIuA7PXJixRpgWCNcYHSunjtDrckva4dbC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.188645"], ["updated_at", "2024-07-13 15:00:53.188645"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"lq7hhDDfpMuCNjmRs6r8EA\\\":{\\\"token\\\":\\\"$2a$04$UCHwHRNZ4G58B8.GkUiLVOteDd9F1XsYf5rz2HvSmG3oxKGW/lh7i\\\",\\\"expiry\\\":1722092453}}\""], ["updated_at", "2024-07-13 15:00:53.191887"], ["id", 159]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 159], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"lq7hhDDfpMuCNjmRs6r8EA\\\":{\\\"token\\\":\\\"$2a$04$q2MmTgd90De4I744cOpfNe7Ezwut8cigOWGYxeRdvZDxPAS0AL4pG\\\",\\\"expiry\\\":1722092453,\\\"previous_token\\\":\\\"$2a$04$UCHwHRNZ4G58B8.GkUiLVOteDd9F1XsYf5rz2HvSmG3oxKGW/lh7i\\\",\\\"updated_at\\\":\\\"2024-07-13T15:00:53Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:53.197765"], ["id", 159]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 10.2ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$SsJRfSPFecUOrmcXPCg/RunrvK8hxLvNMgjCfA2.LPUntD2zkW65q"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.236749"], ["updated_at", "2024-07-13 15:00:53.236749"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$FmEzFf3YlSt1lpxGIjGRSuCl1oIZ20krc1PK6jAwIR5cdBuyNyeDq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.250778"], ["updated_at", "2024-07-13 15:00:53.250778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"alWO-eviyqNzPioYVdHMQg\\\":{\\\"token\\\":\\\"$2a$04$/IgqU1c5mV77LZ2qvXc8ye4oB/3RWb8N3Qtu6qBOut87gC5hJoRhm\\\",\\\"expiry\\\":1722092453,\\\"updated_at\\\":\\\"2024-07-13T15:00:53Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:53.253262"], ["id", 161]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 161]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$qjnFPGAsHuIXCMvJsCAsheM4NC1LTGn/FZ44bP.591LYpJicWMPz2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.276224"], ["updated_at", "2024-07-13 15:00:53.276224"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"X4wlACzXCkwko0hI9dJ_NQ\\\":{\\\"token\\\":\\\"$2a$04$hO/p/twHTdrTUaX8c7nEuO18Ne.wzdDi/B2Aw6PaS5H.HhKd2br4m\\\",\\\"expiry\\\":1722092453}}\""], ["updated_at", "2024-07-13 15:00:53.286096"], ["id", 162]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 162], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"X4wlACzXCkwko0hI9dJ_NQ\\\":{\\\"token\\\":\\\"$2a$04$Km9FOcWo77GI41XO88V.D.jMSq3xrYYRWt4CcN4KZuySXoemzGW72\\\",\\\"expiry\\\":1722092453,\\\"previous_token\\\":\\\"$2a$04$hO/p/twHTdrTUaX8c7nEuO18Ne.wzdDi/B2Aw6PaS5H.HhKd2br4m\\\",\\\"updated_at\\\":\\\"2024-07-13T15:00:53Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:53.315854"], ["id", 162]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 3.6ms | Allocations: 3210)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$EkYP6n/unzmT6N689ar9MeKNrG592HBjhCB9ez6.nHgUxlOPNzvqS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.323478"], ["updated_at", "2024-07-13 15:00:53.323478"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 596)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.urtlkPzoHG7ZzI1Jst9BOCrTa9iMYH/EM3vcZH5PjOgAAiC70C6W"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.336765"], ["updated_at", "2024-07-13 15:00:53.336765"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"aaS0wCEQpOxRJo9E910ykA\\\":{\\\"token\\\":\\\"$2a$04$57Q/yPYKrf5oRw4P7jIVcOTpRalMDl4A5jbaGFBKLL5hm8bgIo7NC\\\",\\\"expiry\\\":1722092453,\\\"updated_at\\\":\\\"2024-07-13T15:00:53Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:53.340130"], ["id", 164]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/164" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"164"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 164], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.1ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 164], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 164], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.4ms | ActiveRecord: 1.9ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$/pPwhyWLe2FPX9hJwQV5o.r3EKG.nhs7HfcUNbPx35pmlpdMN6JWy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.362018"], ["updated_at", "2024-07-13 15:00:53.362018"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SmA1FG-1RvWycJGQzgLeEw\\\":{\\\"token\\\":\\\"$2a$04$DFm9qrVRVeDkSySbI6dJUO4gkWI1q8d0D1bajXOnlLR4yEWcQAlyC\\\",\\\"expiry\\\":1722092453,\\\"updated_at\\\":\\\"2024-07-13T15:00:53Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:53.364482"], ["id", 165]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 465)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$5V6VVWn3maEXDw0NuEPIx.VEx.hQbuFX..rp5exQo8YVJi2l54tuW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.378898"], ["updated_at", "2024-07-13 15:00:53.378898"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/166" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"166"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9CfUORF7ThaGfXqYDDR/weW.DJuE8eJsg.UKMPTRY8bKSwtweC1f6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:00:53.387838"], ["updated_at", "2024-07-13 15:00:53.387838"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Hb74P3rKUNM2sYubMNnOeA\\\":{\\\"token\\\":\\\"$2a$04$MdUpcxeFLflGAb07oqwqUeZeqGoOQDT0hdypbSXHOxzpdjfO0SSAG\\\",\\\"expiry\\\":1722092453,\\\"updated_at\\\":\\\"2024-07-13T15:00:53Z\\\"}}\""], ["updated_at", "2024-07-13 15:00:53.390456"], ["id", 167]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/167" for 127.0.0.1 at 2024-07-13 15:00:53 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"167", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 167], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:00:53.399459"], ["id", 167]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 167], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 167], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 3.4ms | Allocations: 2567)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$YUgFlPaAZfEEZLbcmzfd5ebUVoqJoBsq2qxPX/QGTRG2p0YzNPAFy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.242189"], ["updated_at", "2024-07-13 15:01:18.242189"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"EXubEsqTTxf8EVGt7Q2gLg\\\":{\\\"token\\\":\\\"$2a$04$u6HKyuxHPU1Bt6rirQRsq.onZ2EOUJqPuYm/CC815XDf9LoDnIO1.\\\",\\\"expiry\\\":1722092478}}\""], ["updated_at", "2024-07-13 15:01:18.245862"], ["id", 168]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 168], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 168], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"EXubEsqTTxf8EVGt7Q2gLg\\\":{\\\"token\\\":\\\"$2a$04$SvWJR781dTWAZbz9Sdq..OJycN0pdAF8E4sWxyXTpocLr.e8gKEYK\\\",\\\"expiry\\\":1722092478,\\\"previous_token\\\":\\\"$2a$04$u6HKyuxHPU1Bt6rirQRsq.onZ2EOUJqPuYm/CC815XDf9LoDnIO1.\\\",\\\"updated_at\\\":\\\"2024-07-13T15:01:18Z\\\"}}\""], ["updated_at", "2024-07-13 15:01:18.252835"], ["id", 168]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 10.9ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$w.JnY5GRI.OcV46D/00vqeuEBQs6.MWKhAcSipeEdOXVXo/QHiksq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.291958"], ["updated_at", "2024-07-13 15:01:18.291958"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Su/ezImPxFRZLhhFBSf/uOE5xkL4WHP5lkftVhcC3dHd2w8CGyQIi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.305037"], ["updated_at", "2024-07-13 15:01:18.305037"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-W2kftYgp7ULQXI-u7gVWw\\\":{\\\"token\\\":\\\"$2a$04$laKY6U8d2hb2ZBJ946jA5.ff3kO/lqs.aSBQSPE59Edf1aZGPohyW\\\",\\\"expiry\\\":1722092478,\\\"updated_at\\\":\\\"2024-07-13T15:01:18Z\\\"}}\""], ["updated_at", "2024-07-13 15:01:18.307611"], ["id", 170]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 170]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$JDFary/GUoikTewXVneoIOHiq2ABxOUPEymiZC5p9EajC6DdO2LLK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.328681"], ["updated_at", "2024-07-13 15:01:18.328681"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 171], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sAiEZ3xnqy80cL9MFGq0Uw\\\":{\\\"token\\\":\\\"$2a$04$zlr1CIoAeKWApyXyZKlRXeFUwg4Sy1G8qQh2c/evddx6U6T5VZSVW\\\",\\\"expiry\\\":1722092478}}\""], ["updated_at", "2024-07-13 15:01:18.339608"], ["id", 171]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 171], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 171], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sAiEZ3xnqy80cL9MFGq0Uw\\\":{\\\"token\\\":\\\"$2a$04$TJAiZCdmFAwzJc1DNt.c3uY2SOPczXU3n8tgWmwzO7mmfn0aj5D3W\\\",\\\"expiry\\\":1722092478,\\\"previous_token\\\":\\\"$2a$04$zlr1CIoAeKWApyXyZKlRXeFUwg4Sy1G8qQh2c/evddx6U6T5VZSVW\\\",\\\"updated_at\\\":\\\"2024-07-13T15:01:18Z\\\"}}\""], ["updated_at", "2024-07-13 15:01:18.345246"], ["id", 171]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7miiAOQTccxw4COpMiF4JOfaQ.R7XjdQ9w7geEZ2siCzUyPAhh2RC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.353659"], ["updated_at", "2024-07-13 15:01:18.353659"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 596)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$F/6ijhOBh6RrXkjBCNU/Fe3.HukM5PwuJ.WqZB8am/MjZbwA/Gob6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.365096"], ["updated_at", "2024-07-13 15:01:18.365096"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.2ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"lXVTve0rt9GRYkZTZ5iR_Q\\\":{\\\"token\\\":\\\"$2a$04$VD8rN3JqUQowynxvRNnVteDbebl6A7KKjzwB//V3WUZWYCuLkrVs.\\\",\\\"expiry\\\":1722092478,\\\"updated_at\\\":\\\"2024-07-13T15:01:18Z\\\"}}\""], ["updated_at", "2024-07-13 15:01:18.367514"], ["id", 173]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/173" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"173"}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 173], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 2.2ms | ActiveRecord: 2.0ms | Allocations: 3626)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$eAS9qf67SE7rHe54aUpvZu4SHWYs05jCM7gYV1C3KmTYBUSV2XhKe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.416619"], ["updated_at", "2024-07-13 15:01:18.416619"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1_T-l61HCK_gajJdiRi81w\\\":{\\\"token\\\":\\\"$2a$04$gFKyMXqRjv9Il57pM/xfp.cPllxLO9.nq06RnFxjR1h14fKv2UKQa\\\",\\\"expiry\\\":1722092478,\\\"updated_at\\\":\\\"2024-07-13T15:01:18Z\\\"}}\""], ["updated_at", "2024-07-13 15:01:18.419968"], ["id", 174]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 465)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Vei2u273b6wQu0wFp73ut.vYguaTGoG4/SaSm.xWrE4hIw4rIgj4C"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.431742"], ["updated_at", "2024-07-13 15:01:18.431742"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/175" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"175"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$XToJ8RvrpdoIyLAjKNFhbOJotGSm/0QT6v5fw3N8xulhpAE/8TClO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.440392"], ["updated_at", "2024-07-13 15:01:18.440392"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"m1Whj18-V_5oOPUSzxhyug\\\":{\\\"token\\\":\\\"$2a$04$TJEdDXlfhZWmHrepOLpN.OypzT6C4XwtrsXHvFhxw9ek/ZyNDJQ.6\\\",\\\"expiry\\\":1722092478,\\\"updated_at\\\":\\\"2024-07-13T15:01:18Z\\\"}}\""], ["updated_at", "2024-07-13 15:01:18.443880"], ["id", 176]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/176" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"176", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 176], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:01:18.452990"], ["id", 176]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.6ms | Allocations: 210)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 176], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 176], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.9ms | ActiveRecord: 2.3ms | Allocations: 2573)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$VRk4GSxUptdzLjGMgkAXi.QXDVErDpxv6/D/jM03gh5BpnxOxPY/e"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:01:18.465949"], ["updated_at", "2024-07-13 15:01:18.465949"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"BFuZfkkTYFuceMIzeKCiNg\\\":{\\\"token\\\":\\\"$2a$04$m9uCzXZbDYOId8coQWi1SO6jSsybt.wI23XSjQSlIwIH1QM9hz8hi\\\",\\\"expiry\\\":1722092478,\\\"updated_at\\\":\\\"2024-07-13T15:01:18Z\\\"}}\""], ["updated_at", "2024-07-13 15:01:18.468543"], ["id", 177]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/177" for 127.0.0.1 at 2024-07-13 15:01:18 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "id"=>"177", "customer"=>{"name"=>""}}
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 177], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 8ms (Views: 0.4ms | ActiveRecord: 2.0ms | Allocations: 2049)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$5I2Vj8V3RqDbZMhSCQXlCOfmAHlbcHOVJQfh/0S8JQTcZnDEczaU2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:15.826682"], ["updated_at", "2024-07-13 15:03:15.826682"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"_DrGODgbeW_cAovOt-SL6g\\\":{\\\"token\\\":\\\"$2a$04$RnPlwcPuW5s9iwsMPZy3u.kSoKa5v.yeV7o2pe2yUt/TbgCgsAONm\\\",\\\"expiry\\\":1722092595}}\""], ["updated_at", "2024-07-13 15:03:15.830124"], ["id", 178]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 178], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 178], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"_DrGODgbeW_cAovOt-SL6g\\\":{\\\"token\\\":\\\"$2a$04$xmXPNdwqbHHf9vI2UsIYQ.KAHOGcHntP6b0xXZISnGwkzbSuwNOcS\\\",\\\"expiry\\\":1722092595,\\\"previous_token\\\":\\\"$2a$04$RnPlwcPuW5s9iwsMPZy3u.kSoKa5v.yeV7o2pe2yUt/TbgCgsAONm\\\",\\\"updated_at\\\":\\\"2024-07-13T15:03:15Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:15.836318"], ["id", 178]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.6ms | Allocations: 17009)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$FeGglsY8pAcqnvY/yUn4POODC9jaeA2eQFrl8mFaqtXhxHO8PURSi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:15.877835"], ["updated_at", "2024-07-13 15:03:15.877835"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9sDsZbdFAWGCWHnChIl.0e7b4SQoFM5jrl3iaNTFaBOQzsnNt9Squ"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:15.891339"], ["updated_at", "2024-07-13 15:03:15.891339"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"l8wQLcERazus055UGic1kw\\\":{\\\"token\\\":\\\"$2a$04$EfkeiJY/hn/3tdrF7R0A7O0bpeP4R0p4hObrbTK2.8Kt69LZVlRJm\\\",\\\"expiry\\\":1722092595,\\\"updated_at\\\":\\\"2024-07-13T15:03:15Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:15.894039"], ["id", 180]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 180]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$fKMzfy82ebgeLBLnMV7oy.sl1E5kPOIpvFxRE8lzFpHZSBxzBTOFW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:15.915022"], ["updated_at", "2024-07-13 15:03:15.915022"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 181], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-FqG3CM4UhJIauE1-vzOWQ\\\":{\\\"token\\\":\\\"$2a$04$CW5Tzh1NQ1COidm3R/4dDuy52WbHrPyhRXj1tvcfz3rDh/rOxrXvy\\\",\\\"expiry\\\":1722092595}}\""], ["updated_at", "2024-07-13 15:03:15.925675"], ["id", 181]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 181], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 181], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-FqG3CM4UhJIauE1-vzOWQ\\\":{\\\"token\\\":\\\"$2a$04$d5c9C11V2RQIX9cFzX987OJlK2ZYfaBRB/wFkatGzP41DQGUHFY7y\\\",\\\"expiry\\\":1722092595,\\\"previous_token\\\":\\\"$2a$04$CW5Tzh1NQ1COidm3R/4dDuy52WbHrPyhRXj1tvcfz3rDh/rOxrXvy\\\",\\\"updated_at\\\":\\\"2024-07-13T15:03:15Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:15.931667"], ["id", 181]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.7ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.L14uSI1SxsaE3G5Z4.ZJumNn7FD2qRzdtmA/VnzTb0qO7v.avXXe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:15.938104"], ["updated_at", "2024-07-13 15:03:15.938104"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Jj71sRowh2O6LSr40SDkEeVjjcyG3Gjvnv64a4N77bW/.8UAyRAra"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:15.973469"], ["updated_at", "2024-07-13 15:03:15.973469"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"27_xqQFF5sskTjQewVw_ag\\\":{\\\"token\\\":\\\"$2a$04$yCXIdPTkBorPPZkwT7S1BOoLnAJpYEYTC9K0A.t76TpqM9teRda3K\\\",\\\"expiry\\\":1722092595,\\\"updated_at\\\":\\\"2024-07-13T15:03:15Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:15.977193"], ["id", 183]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/183" for 127.0.0.1 at 2024-07-13 15:03:15 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"183"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 183], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.2ms | Allocations: 667)
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 183], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 183], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.4ms | ActiveRecord: 2.0ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Ntr.wbkoNKWAmKwgEKXDo.7Rp9NQzkufc73mUTopbNmxRIdM7eiQi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:16.000833"], ["updated_at", "2024-07-13 15:03:16.000833"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"rxZ8CQVx1QpWb62LR1ZDoQ\\\":{\\\"token\\\":\\\"$2a$04$G27TMns1vbL.5ki/dbp5I.eejcqPdnsXcQNOy6Q1M5rBX7jwiOYqW\\\",\\\"expiry\\\":1722092596,\\\"updated_at\\\":\\\"2024-07-13T15:03:16Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:16.004520"], ["id", 184]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:03:16 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 466)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$wen6ndoKXeKuBeiHrSJ.A.A/RKIXjD4kQNT4fw3yhjDQoMNCUOtp6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:16.017579"], ["updated_at", "2024-07-13 15:03:16.017579"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/185" for 127.0.0.1 at 2024-07-13 15:03:16 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"185"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2c4oJWBUFzPLfh6Ehh8jp.HXSXkroI4d2JfTPE6DbHVBeggukxVWC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:16.026906"], ["updated_at", "2024-07-13 15:03:16.026906"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mSMEIHEEDpiZvg2mr9YUJQ\\\":{\\\"token\\\":\\\"$2a$04$oDT28Nfzah.P1.8LKbzriuXeo7xa4O.m9L8yf8hDe0NrqjVH3ff3q\\\",\\\"expiry\\\":1722092596,\\\"updated_at\\\":\\\"2024-07-13T15:03:16Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:16.029604"], ["id", 186]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/186" for 127.0.0.1 at 2024-07-13 15:03:16 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"186", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:03:16.039151"], ["id", 186]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 186], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.7ms | ActiveRecord: 3.0ms | Allocations: 2567)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$t3hpIf.KYBmDy.Xi7Gspx.7ZLIKsR4dJNBDN57L0Fwra46dQiM1Mq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:16.050976"], ["updated_at", "2024-07-13 15:03:16.050976"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"kWnGQsEcQnO0Kk7x5KjEAQ\\\":{\\\"token\\\":\\\"$2a$04$SelvV1cs29leGGFiaBYq7.bShXEMQlVd0ecj0cH45pY0fNqRFJZqe\\\",\\\"expiry\\\":1722092596,\\\"updated_at\\\":\\\"2024-07-13T15:03:16Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:16.053445"], ["id", 187]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/187" for 127.0.0.1 at 2024-07-13 15:03:16 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"187", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 187], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 9ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 2056)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3HUbdA4ZRH1.n7dKuQ9gweNDV85Lt0Dj9rOMp0E4iXynm0hHlfdry"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:16.071786"], ["updated_at", "2024-07-13 15:03:16.071786"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"EYxPm9idFZJH3ddy3mDZNQ\\\":{\\\"token\\\":\\\"$2a$04$GtMM6y3mjj5KiPft3xO2W.1NfYGTiYUI/FPIYqHbGUyYwPZM7Mvvi\\\",\\\"expiry\\\":1722092596,\\\"updated_at\\\":\\\"2024-07-13T15:03:16Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:16.074765"], ["id", 188]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/188" for 127.0.0.1 at 2024-07-13 15:03:16 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"188", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 188], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 6ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 2049)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$PE6XvER3XGGkL2zU8lejtO0OSGJdZryUsE6FCAa2ceGFejIzvXuCq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:16.089179"], ["updated_at", "2024-07-13 15:03:16.089179"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ar2rGK8BAhCENB4dPdw1cQ\\\":{\\\"token\\\":\\\"$2a$04$EXh0PZ2WJq6NOIz41dhXOuEchYdHUInIGRTW2MwCqye6zzJ3A9Pry\\\",\\\"expiry\\\":1722092596,\\\"updated_at\\\":\\\"2024-07-13T15:03:16Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:16.091702"], ["id", 189]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/189" for 127.0.0.1 at 2024-07-13 15:03:16 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"189", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 189], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 189], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 189], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1838)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Kz8yHIkKOi9uFf24vzanNO0b0GKLk1TKJP1VbAUbDDkfShkQsJKHS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:03:16.107209"], ["updated_at", "2024-07-13 15:03:16.107209"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jlne0sDxQUnNiAEbNnANZQ\\\":{\\\"token\\\":\\\"$2a$04$AA14ev7VKvL5/5BbHJc8muMiSfuqVU5qphADvgCoYc83E1a/dleLy\\\",\\\"expiry\\\":1722092596,\\\"updated_at\\\":\\\"2024-07-13T15:03:16Z\\\"}}\""], ["updated_at", "2024-07-13 15:03:16.110004"], ["id", 190]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$P1bZI1efa9MQjuXPWKrC8e8b36NsdIbKdJ.bLFyEMfOqMPP6u63zS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.235172"], ["updated_at", "2024-07-13 15:04:17.235172"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mxJMVn7OaK3e9YL2NQU73w\\\":{\\\"token\\\":\\\"$2a$04$rP/7Qi/v9n1SbcDTKDQU6.dYTteiSwtZE.DQHacoMs1Etxczw8I4G\\\",\\\"expiry\\\":1722092657}}\""], ["updated_at", "2024-07-13 15:04:17.238805"], ["id", 191]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 191], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 191], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mxJMVn7OaK3e9YL2NQU73w\\\":{\\\"token\\\":\\\"$2a$04$9oIVHi4IMGuReRUcPPH7IugzlAPGH/biY8TyVuhUFxGfECXi.0lv2\\\",\\\"expiry\\\":1722092657,\\\"previous_token\\\":\\\"$2a$04$rP/7Qi/v9n1SbcDTKDQU6.dYTteiSwtZE.DQHacoMs1Etxczw8I4G\\\",\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.245048"], ["id", 191]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 9.3ms | Allocations: 17001)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$AIM1f.clrK/Gvs2rEQTIYOqZdQ9QjpYN/PU//ik8usV65p0QBl9Aq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.282337"], ["updated_at", "2024-07-13 15:04:17.282337"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jAtqfo.MGpjbiHmkQFR4.eH9rPguZ/tuxvT5zbv7Y955hY22Tq9Ke"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.295577"], ["updated_at", "2024-07-13 15:04:17.295577"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"W7NSyCOR4d63MMPCeLGlMg\\\":{\\\"token\\\":\\\"$2a$04$OSNT8QuXPFnjREnURPbCNeKwfaBp2DtQ2FqAheWYgQBp4dw9ERS9a\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.298231"], ["id", 193]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 193]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 846)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.1toAZDt4PcUlYKA/6h3KOgvEqP.HH3.01v1vdzJUOxTywQ7MnSna"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.315873"], ["updated_at", "2024-07-13 15:04:17.315873"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ReeWEiOfhYIQGNr2x1vOvw\\\":{\\\"token\\\":\\\"$2a$04$MfEaMaYXeAazah5t5XfbseqnuoJgYWKFrsk7ZzCXCMuhuix/FHDjO\\\",\\\"expiry\\\":1722092657}}\""], ["updated_at", "2024-07-13 15:04:17.327593"], ["id", 194]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ReeWEiOfhYIQGNr2x1vOvw\\\":{\\\"token\\\":\\\"$2a$04$aW52NUC98ErFEu7ad.pJm.Ksh/.E0p.eowo5pIuwJSgz.wHG0/jwe\\\",\\\"expiry\\\":1722092657,\\\"previous_token\\\":\\\"$2a$04$MfEaMaYXeAazah5t5XfbseqnuoJgYWKFrsk7ZzCXCMuhuix/FHDjO\\\",\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.332925"], ["id", 194]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$msbmmTIsS..boylbneqPgezFCNakutjPwR5D4jMn4nniVqxixIJP6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.339037"], ["updated_at", "2024-07-13 15:04:17.339037"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$WbhVSJ3UJKx4rx5Gi0y86.ai1.8I9OPzrGaXBYBvFy.o1yXUhzFYK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.374475"], ["updated_at", "2024-07-13 15:04:17.374475"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"tHbney8Y_MlXAkL0CQo9pg\\\":{\\\"token\\\":\\\"$2a$04$gyndHw0lsARxboSyvByHre0NLSYUjFzH9Z1p0vPUa.VbtuEntNiMO\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.378268"], ["id", 196]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/196" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"196"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.1ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 196], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 196], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.3ms | ActiveRecord: 1.9ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$OXwqDjTARl09KmQcaN7LaOEHDJPON8UKygRx3mzPaAvy6zEyUK8TW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.401105"], ["updated_at", "2024-07-13 15:04:17.401105"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"aAKTlF_KmVyEtf6dIRbtrg\\\":{\\\"token\\\":\\\"$2a$04$B4VxbNeviozv2JvGmnK9a./zf3fex/IdWV2SBtO87QpanrhT0WQSO\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.403545"], ["id", 197]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gqaNHIBl8qN6ZZ2G6n8ideoLpyYO.jnzjTWY4.6Y68t5lVXxUxqr6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.416442"], ["updated_at", "2024-07-13 15:04:17.416442"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/198" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"198"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$8Smdz0dcumEWODeupp7ZFuSx8Zbl71SSOC5SAe/V1C03TiLzbAYh6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.426408"], ["updated_at", "2024-07-13 15:04:17.426408"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"eDdGuvXivF6EQ8rsoS-pag\\\":{\\\"token\\\":\\\"$2a$04$ImmrcTKOAHRF3UtNIZMn5uRPoxKRTaGv329lIjfDHgiIPLnc/ilhu\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.429130"], ["id", 199]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/199" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"199", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:04:17.436717"], ["id", 199]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 199], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.7ms | ActiveRecord: 2.5ms | Allocations: 2567)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6ZXjplTmEe6U5jccq1Sl..kZ88vjwJHkAT0a/aBtNK187hIk7uNJq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.449495"], ["updated_at", "2024-07-13 15:04:17.449495"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Yy6gsiA09uJHAowQamWANw\\\":{\\\"token\\\":\\\"$2a$04$lueBPxzXFV6oX30XbPBuYeS1qQ/mLbsn/VPzSIfPye6sB8RG1aXkm\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.452270"], ["id", 200]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/200" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"200", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.4ms | ActiveRecord: 1.7ms | Allocations: 2056)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$/hNIpqdEf4uKezNzAeVPYumTzvB1KEipTF5byJOQAJ06twNV.BBVy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.467590"], ["updated_at", "2024-07-13 15:04:17.467590"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ix6RlFsdEEw0rk9yXIoo0w\\\":{\\\"token\\\":\\\"$2a$04$8mk70liRbYaB8wYGCGEz..iXZxdfI1RcrbnbKSMwc/8u6nWfd9RY.\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.470060"], ["id", 201]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/201" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"201", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 201], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 8ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 2049)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Tv4ku6p7fVweRCvM8H72qeeW21gEXiZ6APUmxSW6fbhBpycXYH.6y"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.486531"], ["updated_at", "2024-07-13 15:04:17.486531"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Ts1YZhVZUHv2rMZZiUm78Q\\\":{\\\"token\\\":\\\"$2a$04$mqWFEl8lDfqXudSyX1LjaOJj9r1SXG14psJrkfT06JDHQjnu9yQwi\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.489008"], ["id", 202]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/202" for 127.0.0.1 at 2024-07-13 15:04:17 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"202", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 202], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 202], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 202], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1838)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$X3353Vv4GbQP9OPvkkMGk.D4hW3T0NvCM1j0j8z7Sf9O84Ak380Pi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:17.503633"], ["updated_at", "2024-07-13 15:04:17.503633"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"V2v4h9V2sijfx8jOcFtzxw\\\":{\\\"token\\\":\\\"$2a$04$zff926FUg4nTnPxKtOL7XOl.IRJyU22x2o/iOa.lQSIW0ol0NzpWG\\\",\\\"expiry\\\":1722092657,\\\"updated_at\\\":\\\"2024-07-13T15:04:17Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:17.506160"], ["id", 203]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$0QbMsMve4Hb/dkof7oe27umqEodDGp1D54Y4PF4Pisz7V1XJdhgNC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:44.846971"], ["updated_at", "2024-07-13 15:04:44.846971"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jlkV_ox5TX1NdbLh1t94Kg\\\":{\\\"token\\\":\\\"$2a$04$cBTPCdJv6Ed5Mv9l5vVQdud4HQaI6CHwW.KsCtPOFTHOgj.PLoQ42\\\",\\\"expiry\\\":1722092684}}\""], ["updated_at", "2024-07-13 15:04:44.850050"], ["id", 204]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 204], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 204], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jlkV_ox5TX1NdbLh1t94Kg\\\":{\\\"token\\\":\\\"$2a$04$iWi0EOgaLk/UtbAHN1MBEeg3rp5rVgAnh7Z7I7aby4tM15sDC8PTK\\\",\\\"expiry\\\":1722092684,\\\"previous_token\\\":\\\"$2a$04$cBTPCdJv6Ed5Mv9l5vVQdud4HQaI6CHwW.KsCtPOFTHOgj.PLoQ42\\\",\\\"updated_at\\\":\\\"2024-07-13T15:04:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:44.856166"], ["id", 204]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 8.1ms | Allocations: 17006)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$guP1TNnW9sH91AUlEWOGUe0KAC05zTvvu5dWhnofPv3WkBuoHOfK6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:44.893807"], ["updated_at", "2024-07-13 15:04:44.893807"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$n3QEArWc/ISRyzmDg9iWceE5PxzmmX0nFObeNjzs6qw7nZQ3KeVwG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:44.907062"], ["updated_at", "2024-07-13 15:04:44.907062"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-x7vmVt-7DpADd-MxHFEJA\\\":{\\\"token\\\":\\\"$2a$04$gtb0.z/GaYw995pN6UyC4uvH/YXQCv/SkJEP9dpqkkA6J9rrhVSte\\\",\\\"expiry\\\":1722092684,\\\"updated_at\\\":\\\"2024-07-13T15:04:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:44.909956"], ["id", 206]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 206]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$5ZWEK8tkWS2EEAMQdX3CQePyCwoWvjLtq3mNEljEOFKzcKIFytIAq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:44.928971"], ["updated_at", "2024-07-13 15:04:44.928971"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 207], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Z6KAVkpVqDJS5t8DBnWEvg\\\":{\\\"token\\\":\\\"$2a$04$FLe4pGpr2ru4Tlcivm3mje2eSFBN5mdILcgI8gwJYSH.3nXLheAs.\\\",\\\"expiry\\\":1722092684}}\""], ["updated_at", "2024-07-13 15:04:44.939500"], ["id", 207]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 207], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 207], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Z6KAVkpVqDJS5t8DBnWEvg\\\":{\\\"token\\\":\\\"$2a$04$gEvXgmAgaGbQhdkMvi6MwuFWAbzaG5Jc720BSZchXhyALQ67ealIO\\\",\\\"expiry\\\":1722092684,\\\"previous_token\\\":\\\"$2a$04$FLe4pGpr2ru4Tlcivm3mje2eSFBN5mdILcgI8gwJYSH.3nXLheAs.\\\",\\\"updated_at\\\":\\\"2024-07-13T15:04:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:44.945046"], ["id", 207]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$rMiv78IbDiPOXNAO5GQpr.alvZy5/xzZjyiv3ibkyd0n.VvN.uuIW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:44.951454"], ["updated_at", "2024-07-13 15:04:44.951454"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$TsRp.X810pvDuHc0p5pnFO47hbTRLwJW6xkWe4TO9ZLwXDsk/kQH2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:44.987067"], ["updated_at", "2024-07-13 15:04:44.987067"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SfeSDTuppMknvqtF0-GaXQ\\\":{\\\"token\\\":\\\"$2a$04$FQWAdGCporsZ9urCsnzCSu4w3wrGVqHlcmv9PHszMLItPn.KvTSea\\\",\\\"expiry\\\":1722092684,\\\"updated_at\\\":\\\"2024-07-13T15:04:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:44.990890"], ["id", 209]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/209" for 127.0.0.1 at 2024-07-13 15:04:44 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"209"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 209], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 209], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 209], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SfeSDTuppMknvqtF0-GaXQ\\\":{\\\"token\\\":\\\"$2a$04$FQWAdGCporsZ9urCsnzCSu4w3wrGVqHlcmv9PHszMLItPn.KvTSea\\\",\\\"expiry\\\":1722092684,\\\"updated_at\\\":\\\"2024-07-13T15:04:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:45.007628"], ["id", 209]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 2.3ms | ActiveRecord: 2.8ms | Allocations: 3819)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jntDpN/i.aiM9dKKexCYDOUxA3Pb6emG8E49cbw7gRpT3v4fLLY0q"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:45.015007"], ["updated_at", "2024-07-13 15:04:45.015007"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"uVGmX2g-uigKIFOLSFzhzg\\\":{\\\"token\\\":\\\"$2a$04$Gj/CUufeV.ml0fCg9nIYMeDxRhSakA32mg5boR2AskrT9o41.thOq\\\",\\\"expiry\\\":1722092685,\\\"updated_at\\\":\\\"2024-07-13T15:04:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:45.017591"], ["id", 210]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:04:45 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 467)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$sobCInAGK0j3vQXiXyVDHO400jPckspqpIJznhVi887sBVy6/GRcy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:45.031049"], ["updated_at", "2024-07-13 15:04:45.031049"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/211" for 127.0.0.1 at 2024-07-13 15:04:45 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"211"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$OPEcOXJWmL.fUcpcqq7kJ.3Thto7w.Lc5k0XcTpjEz51ws0pVIZo6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:45.039765"], ["updated_at", "2024-07-13 15:04:45.039765"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"KFB-V0UoaBFZUMt5IjMHAw\\\":{\\\"token\\\":\\\"$2a$04$m/BlfTvq7yEruwmpJO7aguMXde0wInwuDxOhcS.ZodvgEYi725Yle\\\",\\\"expiry\\\":1722092685,\\\"updated_at\\\":\\\"2024-07-13T15:04:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:45.042499"], ["id", 212]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/212" for 127.0.0.1 at 2024-07-13 15:04:45 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"212", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:04:45.050289"], ["id", 212]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 212], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.7ms | ActiveRecord: 2.8ms | Allocations: 2567)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ZMQ8l6zySPoVHXUvc1o04.c1u7XwvumvALuVGKx5lTBEgf1OvRFoq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:45.064033"], ["updated_at", "2024-07-13 15:04:45.064033"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"pRZoRzKbjJJlx9DWYyaiig\\\":{\\\"token\\\":\\\"$2a$04$WtMaR.gnXWm2kSyPKtPLsOfAYE.HhTI0pE2Zc9HNyKbCSZfD7Wnhm\\\",\\\"expiry\\\":1722092685,\\\"updated_at\\\":\\\"2024-07-13T15:04:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:45.066671"], ["id", 213]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/213" for 127.0.0.1 at 2024-07-13 15:04:45 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"213", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 2056)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$iaXxxxX/s9oNec.lVyqepe6UhOC4vnmq3El4nbcPr2g62WQBRX9dC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:45.081166"], ["updated_at", "2024-07-13 15:04:45.081166"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"BQknxIOEjy112fECVL7bUg\\\":{\\\"token\\\":\\\"$2a$04$FMNiHOP45zLpMyxeRm5bLuHjTr6jxHVSksANf4/.NVGnj5v7MPWPe\\\",\\\"expiry\\\":1722092685,\\\"updated_at\\\":\\\"2024-07-13T15:04:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:45.083644"], ["id", 214]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/214" for 127.0.0.1 at 2024-07-13 15:04:45 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"214", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 2049)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$etI58iJrw7GwK4U5unyQS.0y7f.rr23Om4JNGPxJIZNbhgEaAqwwu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:45.100602"], ["updated_at", "2024-07-13 15:04:45.100602"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mL1-UCSTICKmHQzsa83M-Q\\\":{\\\"token\\\":\\\"$2a$04$dM9IG7ujz3G31etAZ3lmjuL3wTO6.YopO2k288TxLMX3dz/euRZte\\\",\\\"expiry\\\":1722092685,\\\"updated_at\\\":\\\"2024-07-13T15:04:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:45.103065"], ["id", 215]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/215" for 127.0.0.1 at 2024-07-13 15:04:45 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"215", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 215], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1838)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$MLMIF.yen3BwPd5gPJXWDO4gUyqjGKCqQw4ggo8/lzgGjgjCULPoa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:04:45.117534"], ["updated_at", "2024-07-13 15:04:45.117534"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Gu-0apWS4dgdrEPp4mYI3w\\\":{\\\"token\\\":\\\"$2a$04$8ZLg.3auU4CX1OAa4kFYYugyQmCS63kaP2lSRw8x5aDhGNmtNON12\\\",\\\"expiry\\\":1722092685,\\\"updated_at\\\":\\\"2024-07-13T15:04:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:04:45.120827"], ["id", 216]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$mTD2JkKCYSqD7aZ4eIjlR.Q.2N6SrKWWktgqxNgFEay3YrabIj6BK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.542541"], ["updated_at", "2024-07-13 15:05:07.542541"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"5nIqivd2rBgh1opi_NxulA\\\":{\\\"token\\\":\\\"$2a$04$0sW1nGhIomBDfyEZpfzB3ulU4Yg8WKDw5LK.mI2nHVbmvcH35OyrG\\\",\\\"expiry\\\":1722092707}}\""], ["updated_at", "2024-07-13 15:05:07.545613"], ["id", 217]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 217], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 217], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"5nIqivd2rBgh1opi_NxulA\\\":{\\\"token\\\":\\\"$2a$04$wMdaPypO/M9hk/uTvhUZGe02K7j8A5FzD3z58dtsOZn6gFb.r9Xmq\\\",\\\"expiry\\\":1722092707,\\\"previous_token\\\":\\\"$2a$04$0sW1nGhIomBDfyEZpfzB3ulU4Yg8WKDw5LK.mI2nHVbmvcH35OyrG\\\",\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.551323"], ["id", 217]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 9.4ms | Allocations: 17006)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gTgPDL/HvFCP1uPp11w1uuy6PvtZwYLFxSfN3e8n5q9mm40rFZq62"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.589213"], ["updated_at", "2024-07-13 15:05:07.589213"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$98xaq/etom7huJ5f30dWwOYQs1k8rk.zJWCbQn0q7eRYeIa1rTuH6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.605827"], ["updated_at", "2024-07-13 15:05:07.605827"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"bJOjkH70Wcyw8NYliLH25w\\\":{\\\"token\\\":\\\"$2a$04$NSoc0Q1n3gw.GliwZA2rLuQ3xPHnOwyrgLjNzN7ly6RNxa466XElW\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.608356"], ["id", 219]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 219]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$BV..4omGly19lgT1gEJDxeWuHV2XbUlU5dDKLoNtaSa1pe9HMJTT2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.627664"], ["updated_at", "2024-07-13 15:05:07.627664"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1iLTwsKnb3ovqcoyE7BGqg\\\":{\\\"token\\\":\\\"$2a$04$v87Q6A2XuSIGuPiWwPBQeuk3m/fCJagX41F7.2QPvltXbYD.Tbb8e\\\",\\\"expiry\\\":1722092707}}\""], ["updated_at", "2024-07-13 15:05:07.663518"], ["id", 220]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1iLTwsKnb3ovqcoyE7BGqg\\\":{\\\"token\\\":\\\"$2a$04$MCKgOp6U7rMXgdSEiS08z.dRKw2FoipRgrf.y9z70cvX.9XL4dgB.\\\",\\\"expiry\\\":1722092707,\\\"previous_token\\\":\\\"$2a$04$v87Q6A2XuSIGuPiWwPBQeuk3m/fCJagX41F7.2QPvltXbYD.Tbb8e\\\",\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.671050"], ["id", 220]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 3.7ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$kfsjBu2GpXUJPAoNw8cbBuDxZ4HL0NXxGOFGW17EuZVctw5ub9sJe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.678632"], ["updated_at", "2024-07-13 15:05:07.678632"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$M4gfasvzyWR8vehgfsIzoO1z76F8rB9oXjgq8rQxaGytyqhy3TNOe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.691251"], ["updated_at", "2024-07-13 15:05:07.691251"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"7niwNiGZj4nSk7uJR2i-8A\\\":{\\\"token\\\":\\\"$2a$04$QZENPUTyNuw/cwS334lni.49fDCt8EhF8CYPeWEBrIaNGzoqKdlaG\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.694014"], ["id", 222]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/222" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"222"}
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.7ms | Allocations: 667)
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 222], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 222], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.9ms | ActiveRecord: 2.7ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$uvvu2/17KRBipSxV/.eZM.hNAWx8MNOQztpuVMOCZMKBW95nwL0Lm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.716699"], ["updated_at", "2024-07-13 15:05:07.716699"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"KmN1IPfstE0u6OdLN4WvZQ\\\":{\\\"token\\\":\\\"$2a$04$1aVyWvQl2gPUW.bD6feHp.nD5PtYBDBDVvYDsRKQ6HDPGp9Z2OlaK\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.719553"], ["id", 223]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 466)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$bcyAReX3lvtwqhMFLwFzruluMcyElfzM.PGYJqAdKX2oeFmkrLYOu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.732200"], ["updated_at", "2024-07-13 15:05:07.732200"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/224" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"224"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gsuVWLf18FguguUf7xyIw./e8vc.UqOmf/ZUZzMCu.sVcLcVGiXrO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.740669"], ["updated_at", "2024-07-13 15:05:07.740669"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"InoZai4euGKlHP-_1Bq19w\\\":{\\\"token\\\":\\\"$2a$04$tIaWRQDkmMEuyp8SCpboierz7PorisovSig4k.TjGQglDQXb9yBsO\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.743952"], ["id", 225]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/225" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"225", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:05:07.752414"], ["id", 225]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 225], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.7ms | ActiveRecord: 3.2ms | Allocations: 2567)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$mFLT3Hu/l.j.biFlzsnl9.nzX/3M9Okc2fqqay.KgVskSdv.cSFay"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.764465"], ["updated_at", "2024-07-13 15:05:07.764465"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"A7lxMy6IxVed2cS0_Wy8KA\\\":{\\\"token\\\":\\\"$2a$04$b5rCK8udHGb0t8ixPAFMZeArXpvN3XchSmyA4HlBne34NMO2w4hQe\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.766983"], ["id", 226]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/226" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"226", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 226], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.3ms | ActiveRecord: 1.7ms | Allocations: 2056)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$paCq4CItUJEw1YPtJyZTZ.gfMv9LdEOqv9rBuYuZoKUUwLYAmQy5."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.781905"], ["updated_at", "2024-07-13 15:05:07.781905"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"53FoaxVsAsANs96OETbogw\\\":{\\\"token\\\":\\\"$2a$04$e0LH9LQbJQ4Z2J55uXGwjeEd/dlo6Nmx5Ws8ShH6im.xhdudvzS5i\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.786004"], ["id", 227]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/227" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"227", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 227], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 227], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 227], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 2049)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6G24JpjV1p1QpQTIPXC8He0s4ImOy/8MJykAraTbt5K/AnUPdeBWK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.801534"], ["updated_at", "2024-07-13 15:05:07.801534"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"AXYwsA4O2T80lNZ6UYY-hg\\\":{\\\"token\\\":\\\"$2a$04$O1nzvmAQ8wUxpRtGumUVHewegGYjBtzVGKgkvrB6R2M67RDb6.nhm\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.804528"], ["id", 228]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/228" for 127.0.0.1 at 2024-07-13 15:05:07 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"228", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 228], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 228], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 228], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1838)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$NkUphqrINDcYdYywWQCpge75wt3neDGPvmA5cP8r5ZVgMkufoHyN2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:05:07.821057"], ["updated_at", "2024-07-13 15:05:07.821057"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"z_5UvIRdgf8HHNC3AbLokQ\\\":{\\\"token\\\":\\\"$2a$04$aeooeC8MFSXTtpsNjnLMou.KR/XOz6nJnW61Nl1uYOA8DpN0k08Gu\\\",\\\"expiry\\\":1722092707,\\\"updated_at\\\":\\\"2024-07-13T15:05:07Z\\\"}}\""], ["updated_at", "2024-07-13 15:05:07.823586"], ["id", 229]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$TG5.YRjfpIet6s1p9QoNQOqynKZUqhij8eMifixJCPfgP7ZLfDn5W"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:00.870845"], ["updated_at", "2024-07-13 15:06:00.870845"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Og0FAaAEuiSI28DREss3HA\\\":{\\\"token\\\":\\\"$2a$04$z/nwYfB5a6ZlRCDSLQmWFOuvo59oF.4GKgtvJtBiSHLIuUSa1dQQC\\\",\\\"expiry\\\":1722092760}}\""], ["updated_at", "2024-07-13 15:06:00.874717"], ["id", 230]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 230], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 230], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Og0FAaAEuiSI28DREss3HA\\\":{\\\"token\\\":\\\"$2a$04$EHXsy0Jb72EPH5WG8TwUGuMry7h3cx3UAx/I/UyG.oqZAC1u0j2Nq\\\",\\\"expiry\\\":1722092760,\\\"previous_token\\\":\\\"$2a$04$z/nwYfB5a6ZlRCDSLQmWFOuvo59oF.4GKgtvJtBiSHLIuUSa1dQQC\\\",\\\"updated_at\\\":\\\"2024-07-13T15:06:00Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:00.881386"], ["id", 230]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 10.6ms | Allocations: 17010)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.4ms | ActiveRecord: 0.8ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$n/7XvViFv8em9BUZ1v1h.OuhivcA4CJM1K1nePFfHm0yrNuCAMQ22"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:00.921716"], ["updated_at", "2024-07-13 15:06:00.921716"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$LUGD2Nxva1IEHTJWX8FRM.IXWmv5M9ToEinVPphfQbi0SPLQZiJXm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:00.935339"], ["updated_at", "2024-07-13 15:06:00.935339"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"GQtqE4I70uRbhHOJea0lhQ\\\":{\\\"token\\\":\\\"$2a$04$aI5Htz7ZZ9vmONBsMFbtOuEdPt0J7eTMgSh2vmXD/.N4xqSWwPz6q\\\",\\\"expiry\\\":1722092760,\\\"updated_at\\\":\\\"2024-07-13T15:06:00Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:00.938024"], ["id", 232]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 232]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$zUOq4AIwCQVItAxnnuxiq.BEbFMCBGF.01r0TAlcDtgm2HJu/EN9O"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:00.957585"], ["updated_at", "2024-07-13 15:06:00.957585"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:06:00 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.7ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 233], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"NBkP48dAmqpZJMtxQL2_hA\\\":{\\\"token\\\":\\\"$2a$04$pwOlCqz6pewtBpgXX6p5Qe6TufpQHmS6gKP9yzjRA/ZgdvGhpNB.u\\\",\\\"expiry\\\":1722092760}}\""], ["updated_at", "2024-07-13 15:06:00.989467"], ["id", 233]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 233], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 233], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"NBkP48dAmqpZJMtxQL2_hA\\\":{\\\"token\\\":\\\"$2a$04$B.hNJHWOwyVjD8iQDF2s9uDJno6ns4qXnnas4btV.rEyavbcjyy5O\\\",\\\"expiry\\\":1722092760,\\\"previous_token\\\":\\\"$2a$04$pwOlCqz6pewtBpgXX6p5Qe6TufpQHmS6gKP9yzjRA/ZgdvGhpNB.u\\\",\\\"updated_at\\\":\\\"2024-07-13T15:06:00Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:00.996926"], ["id", 233]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$kt9DvXEhbgYW4dN4oJJe9uwHX4p04z1TtZiEzlVxgj429/CisnDva"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.003450"], ["updated_at", "2024-07-13 15:06:01.003450"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$/xNFOqGLW3Mszof0MFfDa.3UB0pu5vlfjNnHdIYh.FIsMO8cN0D/."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.014450"], ["updated_at", "2024-07-13 15:06:01.014450"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"YRx7LPKroqWYSdudiNMUAQ\\\":{\\\"token\\\":\\\"$2a$04$K/8kMe1jzCLL4cRBOgz9aeOIU5dDoxRbncTBIy1nVCub.uxINPYAy\\\",\\\"expiry\\\":1722092761,\\\"updated_at\\\":\\\"2024-07-13T15:06:01Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:01.017042"], ["id", 235]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/235" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"235"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 0.9ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.2ms | ActiveRecord: 2.2ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9RoL.iG86FzSQIpJw2xOU.zsNvQbHjJWl9e0bBVDLIECvjJfS/O9m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.039564"], ["updated_at", "2024-07-13 15:06:01.039564"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"3lR_yGLa7k-HkMJ827ADVw\\\":{\\\"token\\\":\\\"$2a$04$2fN1/lIuC/NG63FKkpKFNOhLiczwtAuqtCJFEVeiYUf68jx31K01K\\\",\\\"expiry\\\":1722092761,\\\"updated_at\\\":\\\"2024-07-13T15:06:01Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:01.042153"], ["id", 236]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 466)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$h9OKPw7IDgTQRO2HLsYHFO1JOb5JDfgW1USrrOCjnHEoqVojZFzY2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.055355"], ["updated_at", "2024-07-13 15:06:01.055355"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/237" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"237"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dGAUrz8WenfliMfaRzBmEu2..XXJwsaL6.5gll7QzpUjcQe0DK4.W"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.064243"], ["updated_at", "2024-07-13 15:06:01.064243"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"_pwhp5OPxoLKM16LopDWIA\\\":{\\\"token\\\":\\\"$2a$04$5e60AwI9btYznDfCGdhxwOWnjIoi0B5r.6HBgxagCFnWdXX5YfHSK\\\",\\\"expiry\\\":1722092761,\\\"updated_at\\\":\\\"2024-07-13T15:06:01Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:01.066893"], ["id", 238]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/238" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"238", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:06:01.074598"], ["id", 238]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 238], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 238], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.7ms | ActiveRecord: 2.8ms | Allocations: 2566)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7EcypMUFnEH6Qn6.vp8xKek/KvhoOAP6WDFKezxogK9.Ousjd1rG."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.087842"], ["updated_at", "2024-07-13 15:06:01.087842"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"A9TalW7XJH-01JrT10myNw\\\":{\\\"token\\\":\\\"$2a$04$.2GVa3RfSuuAAXEbWHa81ORKdMWuHTJiypDPKHAm4GeH5BRW/Sqh6\\\",\\\"expiry\\\":1722092761,\\\"updated_at\\\":\\\"2024-07-13T15:06:01Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:01.090512"], ["id", 239]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/239" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"239", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1150)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$8A6TqWkvapRtRzkB.p6HjeV5Px4WCQXtR4hsmA16kEmayknQmaVHy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.101977"], ["updated_at", "2024-07-13 15:06:01.101977"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ARitvhREEL8nSSVLLKui1Q\\\":{\\\"token\\\":\\\"$2a$04$pOwispGk30mLsAJF1F29He7bCxnHwRvOAuFU9rUjtz.OfHen17b/e\\\",\\\"expiry\\\":1722092761,\\\"updated_at\\\":\\\"2024-07-13T15:06:01Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:01.104641"], ["id", 240]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/240" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"240", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 240], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$iqp46rTYGmoig/VkdvhhJux8qct0Ph6A5OWmYTj72C0Ql8lZL7q/G"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.118004"], ["updated_at", "2024-07-13 15:06:01.118004"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Agbz_uuyHfKDN9leo_2BBA\\\":{\\\"token\\\":\\\"$2a$04$0b.WV7K8r7UY1MtoidisnOfHXpuhmvpCfix6780EeJ/WRBduqqbay\\\",\\\"expiry\\\":1722092761,\\\"updated_at\\\":\\\"2024-07-13T15:06:01Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:01.121251"], ["id", 241]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/241" for 127.0.0.1 at 2024-07-13 15:06:01 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"241", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 241], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 917)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$XFnsJjDRA2MtOCO7tVbtB.QPujJcu4uAjh.yIxqtuRKeO67W3edwO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:01.133171"], ["updated_at", "2024-07-13 15:06:01.133171"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"7k_z4N4PH3bFa4qair_CbA\\\":{\\\"token\\\":\\\"$2a$04$tLVCxgH1w80OQoV4qeejse60EjxFAYh83tSgQevb1znlCBatbjgWy\\\",\\\"expiry\\\":1722092761,\\\"updated_at\\\":\\\"2024-07-13T15:06:01Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:01.135870"], ["id", 242]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$rhfY5S6gJhQRXGkjWnSR2efJ0B9.ZVxZqc/0bLybSt.3cq.f85RHm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.314458"], ["updated_at", "2024-07-13 15:06:32.314458"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ODDlFzS7xZtGCJCavIpG1A\\\":{\\\"token\\\":\\\"$2a$04$PxGaGLyj2dZng8Ro34RPEOTgV2HoX5oQchPYcM8JXxybtqBtJ8YIa\\\",\\\"expiry\\\":1722092792}}\""], ["updated_at", "2024-07-13 15:06:32.317855"], ["id", 243]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 243], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 243], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ODDlFzS7xZtGCJCavIpG1A\\\":{\\\"token\\\":\\\"$2a$04$YBs3LGwRJTuwN3Lbe0SqtOhRn.mxcSKkKpI1gy085UrikOedF8/Na\\\",\\\"expiry\\\":1722092792,\\\"previous_token\\\":\\\"$2a$04$PxGaGLyj2dZng8Ro34RPEOTgV2HoX5oQchPYcM8JXxybtqBtJ8YIa\\\",\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.324351"], ["id", 243]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 10.5ms | Allocations: 17006)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9vuLFZSyT0/gQylEVvLHZ.FC.L4y6gQ7zrCux4oEbHpWhrWqjxFyW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.362269"], ["updated_at", "2024-07-13 15:06:32.362269"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ZU03ogIDqWG8iJ6lIhcS7.fKi4FdgRtB6KFl0RvOo2Yspt2/0he4i"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.376748"], ["updated_at", "2024-07-13 15:06:32.376748"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"oowcTSZxAe3G70fpNzZ6Yg\\\":{\\\"token\\\":\\\"$2a$04$DKEhHSQ3RvOLelHurl2CMOSbzNzkQCz5kFyWeoTpjXatkEmCzTaQi\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.379342"], ["id", 245]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 245]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Md/rcTQ3JT5ea22n63tEgugObRD.vRijFfyQTBtxGg30kNqo8pTca"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.398525"], ["updated_at", "2024-07-13 15:06:32.398525"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 246], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"GUoCRl_Gj7Eu0Pen5c68HQ\\\":{\\\"token\\\":\\\"$2a$04$zL3SuVzpIK3ZKaCrVPik1ORs.af1fxwuSwFaGYHO9asIUGk1a4NZO\\\",\\\"expiry\\\":1722092792}}\""], ["updated_at", "2024-07-13 15:06:32.409634"], ["id", 246]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 246], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 246], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"GUoCRl_Gj7Eu0Pen5c68HQ\\\":{\\\"token\\\":\\\"$2a$04$aw.kwy4Tlz8PruhEsxSju.emR5TyDLNQleSKy3Yj.Cbh8kEa2xu2a\\\",\\\"expiry\\\":1722092792,\\\"previous_token\\\":\\\"$2a$04$zL3SuVzpIK3ZKaCrVPik1ORs.af1fxwuSwFaGYHO9asIUGk1a4NZO\\\",\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.415230"], ["id", 246]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Sm6bi7M0BUWW/we8/guqduAr.mWQXVPIJ8f7ZHh0HDAIx2C76kJkS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.421658"], ["updated_at", "2024-07-13 15:06:32.421658"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$pJ6SZdY1oIdu6ErwCSI/AeivRNjGMWGCWJLGLQ1TuAFv8Q/6Ks0US"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.434466"], ["updated_at", "2024-07-13 15:06:32.434466"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1WQISCCOFD3UpBofdWlt1g\\\":{\\\"token\\\":\\\"$2a$04$ikKrcanwp.c8zd87iVN5L..2YTsp69ufZlandMVFqDAkbz7HpFXWi\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.437332"], ["id", 248]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/248" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"248"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 248], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.1ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 248], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 248], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.2ms | ActiveRecord: 2.0ms | Allocations: 3625)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ahfmbIrgkTZc71OKPolgie6d9TuRiqGYgkvyzG0Tw2nSI7prQ37m2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.484288"], ["updated_at", "2024-07-13 15:06:32.484288"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"QICYR2AqU1qZBxgsAe7T6Q\\\":{\\\"token\\\":\\\"$2a$04$W5gyxUwpivPcFcUs/D/WXOa3NdMWawBC2Z89clepRqlLdcBF48yWq\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.487090"], ["id", 249]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$OIna9jihMQ13j3UoYXbeMOE4Iscafd/cLCTAMqt5GS41.U7EUdBCG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.499898"], ["updated_at", "2024-07-13 15:06:32.499898"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/250" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"250"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$l5u/kQtK5tHiZYReXpfP7OrO441aO1u6vw0yRuH55VhKORQ0zb9ki"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.508917"], ["updated_at", "2024-07-13 15:06:32.508917"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-lV27o4PBFzprQxkUoTUCQ\\\":{\\\"token\\\":\\\"$2a$04$auKKwGy/U68rB64QBrdGJO1p6G67C5VO1dJwo5YdvAWFNa8e4erGC\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.511401"], ["id", 251]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/251" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"251", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:06:32.518449"], ["id", 251]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.7ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 1.1ms | Allocations: 210)
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (1.0ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 251], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 1.3ms | ActiveRecord: 3.6ms | Allocations: 2572)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$m5e6nCWXvTmcSbjT/T.qTeGbSTKxSzc5Mk87TX1MEgKkU1qmkuUyy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.533479"], ["updated_at", "2024-07-13 15:06:32.533479"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"hYZCQPaeO8DjUBqlDdcqkw\\\":{\\\"token\\\":\\\"$2a$04$lp9lmhhDBG/zS32LWedtdOWAeI7M.KcoSmNNOb7JpfMG6Mq7SN7UG\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.536566"], ["id", 252]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/252" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"252", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 252], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1151)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$D4xJ0olFm/Iwj/Uda.qsdO.ErfaJmLBwkllGIMmMy0tYZe9AEv3tu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.548912"], ["updated_at", "2024-07-13 15:06:32.548912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"LomLRXm2OoETO2L7BMqHiw\\\":{\\\"token\\\":\\\"$2a$04$dtQASQ09zfSjY4BOgOCNc.8O/ibwOSMdWlmUPppsI.QmRtMbiojbW\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.551550"], ["id", 253]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/253" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"253", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 253], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$R7otZ10KQ9MfCu34COe4vu2WCdWBQ5brxqP.31mHvmiNdLHDrg9H2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.566099"], ["updated_at", "2024-07-13 15:06:32.566099"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"PJQLeAg7Qjhx_HGyroG_wg\\\":{\\\"token\\\":\\\"$2a$04$ggRpbMsJptE./Nps7/9YbuGenHLlaJJ3F9Qi/zc318/WM9CGs92ty\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.568578"], ["id", 254]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/254" for 127.0.0.1 at 2024-07-13 15:06:32 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"254", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 254], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 917)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$fGi5a/jzqeBWpVu1M4R7D.4cUFd6UbOYHivpQsOkSN2gpOVs20Mte"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:06:32.580135"], ["updated_at", "2024-07-13 15:06:32.580135"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Rn7SFdulIL3eN0ivc-6Fkw\\\":{\\\"token\\\":\\\"$2a$04$i7OeKDREZmMoPFS/1gtCLejDUsCIgVxJCT0vgTH.L745FltzQxG7K\\\",\\\"expiry\\\":1722092792,\\\"updated_at\\\":\\\"2024-07-13T15:06:32Z\\\"}}\""], ["updated_at", "2024-07-13 15:06:32.582963"], ["id", 255]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:08:49 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dBcmpPjyf21niPOAjNXCseNnh.bRBlLZOmLJd.7tt.3vuepBrbEla"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:49.947238"], ["updated_at", "2024-07-13 15:08:49.947238"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jhqKD4vJ99IRXMpG81-tyw\\\":{\\\"token\\\":\\\"$2a$04$ls0XPFQldguHQVFaBh9EWu6ngz.dMW3lhFun2QhppLWh65fCO9gOi\\\",\\\"expiry\\\":1722092929}}\""], ["updated_at", "2024-07-13 15:08:49.950319"], ["id", 256]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 256], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 256], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jhqKD4vJ99IRXMpG81-tyw\\\":{\\\"token\\\":\\\"$2a$04$NRAPEKgnPgfVEr7HA7x/IOOTe8g6qNZg2xeWRx4wNHUNGNdsTM.IK\\\",\\\"expiry\\\":1722092929,\\\"previous_token\\\":\\\"$2a$04$ls0XPFQldguHQVFaBh9EWu6ngz.dMW3lhFun2QhppLWh65fCO9gOi\\\",\\\"updated_at\\\":\\\"2024-07-13T15:08:49Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:49.957238"], ["id", 256]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 7.8ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:08:49 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:08:49 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:08:49 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$LRil.uLkVZ7ikPagUdsEVOHDcXxk91JDMAk8CPqvMM/7kjFbNt0n2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:49.996812"], ["updated_at", "2024-07-13 15:08:49.996812"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:08:49 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Tm6KwspCgaipDz5eiVOwaunoZBmy6eMwy32NUZWBystFfEYzggJye"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.010643"], ["updated_at", "2024-07-13 15:08:50.010643"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"RHhS5zQATmgNxD2ldxbFeA\\\":{\\\"token\\\":\\\"$2a$04$o656v2JYJb3WLJxdLY01JO04ENXGeMfXigL1epMg2JDPefndiQiaK\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.013137"], ["id", 258]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 258]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$n6gkP28xzT56DCNgrr0edu2Q9hJ2wjHNi8U1iAMy4DcUsaGqAQSqS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.053213"], ["updated_at", "2024-07-13 15:08:50.053213"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"5zbhvUIa41NScdE3uzmfNw\\\":{\\\"token\\\":\\\"$2a$04$NtwbsqUoK5qX7z5E5wrZ6ODDO/BffHaw6UMpS6DXbidHG5mCR8hyi\\\",\\\"expiry\\\":1722092930}}\""], ["updated_at", "2024-07-13 15:08:50.064151"], ["id", 259]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"5zbhvUIa41NScdE3uzmfNw\\\":{\\\"token\\\":\\\"$2a$04$W3uy3AywABXPK.npZhthteWLJQoPvnY.7TXioTbJuhFs2I9OxQo.y\\\",\\\"expiry\\\":1722092930,\\\"previous_token\\\":\\\"$2a$04$NtwbsqUoK5qX7z5E5wrZ6ODDO/BffHaw6UMpS6DXbidHG5mCR8hyi\\\",\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.071333"], ["id", 259]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$e02VH0iFn5IvvmGzuSrvyOhrjkEz0ARqksYl13c2hlnzybYJnmkz."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.077649"], ["updated_at", "2024-07-13 15:08:50.077649"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Gw5c/uUOAm97px5jKi.zu.2eutuWXxC.K4uLhx5RbS6zfE8j6kmZC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.089104"], ["updated_at", "2024-07-13 15:08:50.089104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Jedx7r3UgY1z0aJVD0ipCQ\\\":{\\\"token\\\":\\\"$2a$04$CjrbyhKbsMNmAWTegUfUtendp6GNcw3gQKx8lmTSU2USwrE6qr6t2\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.091690"], ["id", 261]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/261" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"261"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.5ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.8ms | ActiveRecord: 1.8ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$baviOKYefVmW.fXKW5OUG.jXVEz9gbDYEJRj9QrEBrBipf6alLkJK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.113092"], ["updated_at", "2024-07-13 15:08:50.113092"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"cgLcbi7THRpdXzXejvnSpA\\\":{\\\"token\\\":\\\"$2a$04$nzE/mBy7c8YeqqmJh6EC7ODAB.0vdpqtzPFJMOssExmHlcA7QyNyS\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.115701"], ["id", 262]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 466)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$JkOfds.0FNGttjH3W/gjRefT3EF0IddO2dGYmZaXQy62OdZnMUtyy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.127110"], ["updated_at", "2024-07-13 15:08:50.127110"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/263" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"263"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$WMYxYAGg.EPCTiyRRDnQr.VXTQrvhdshEFC/pkYtwGqb46TcyqN2K"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.136678"], ["updated_at", "2024-07-13 15:08:50.136678"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"znmzB8pEDWQnYTicL6XGWQ\\\":{\\\"token\\\":\\\"$2a$04$R0kzHtZtM0xZY6mWhnitT.Uis4HOvCdO7W7/kVmdR8bATFsKJ.Ura\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.139273"], ["id", 264]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/264" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"264", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 264], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:08:50.146624"], ["id", 264]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 264], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 264], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.7ms | ActiveRecord: 3.1ms | Allocations: 2566)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$iP3k8bPTiFFnRimB5zdcD.hvpHZDNXahQLuGzEaH98NPl8pLjlUvG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.158381"], ["updated_at", "2024-07-13 15:08:50.158381"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"XMwWdI7VzcCB8-VumMREcA\\\":{\\\"token\\\":\\\"$2a$04$SYayFUsFQyYtylWbKpBmyOJvmWV5nLZiCMhTitAxxSsvlncFNPVaC\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.161762"], ["id", 265]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/265" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"265", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 1150)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$fwjxtAzAFoUJFPRxDjq44upDOFYt5SBphFB8X6FuIJVpADvh1.8YS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.174512"], ["updated_at", "2024-07-13 15:08:50.174512"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"h2U5pPKr0CQmwbbHRle4Tw\\\":{\\\"token\\\":\\\"$2a$04$T1Of1AULgx.YDoSIXgdsKu.eeWKRnqZsYj7JReI7.CIWGh/5aURZy\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.177017"], ["id", 266]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/266" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"266", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 266], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$xx.KZcMpBCb3FZAy2/K6POjYCp.Rv0LPwwUadfU3bpSGqtCMUJ5/."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.188488"], ["updated_at", "2024-07-13 15:08:50.188488"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"CQ-vX8YscKAnAm3PMgZa7A\\\":{\\\"token\\\":\\\"$2a$04$kXpcCEe09l6TD4hFqFZUrOPNpaFpb17E16DjvlWWzwhS2x0PJV1ou\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.191396"], ["id", 267]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/267" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"267", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 267], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 917)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$lnGF4lilbbQHEw6w4DoIQeaNhJziqvK9peejc5eHzjFydX/qdHk4O"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:08:50.204419"], ["updated_at", "2024-07-13 15:08:50.204419"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"P8PpcgXrn2Y-PiIsKjm4kQ\\\":{\\\"token\\\":\\\"$2a$04$rKz/pDWX8sxq/rC.Dy/gfezvuvmxbX1L/oSZLMvUYjEpjQeq9SSaK\\\",\\\"expiry\\\":1722092930,\\\"updated_at\\\":\\\"2024-07-13T15:08:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:08:50.207060"], ["id", 268]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$YvvDE8bAEN0Xf05jpRNmZORI6oTm251Yx7wUfTB70FiDo3kukDWGW"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:08:50.211529"], ["updated_at", "2024-07-13 15:08:50.211529"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/268" for 127.0.0.1 at 2024-07-13 15:08:50 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"268", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 268], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (8.3ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:08:50.218115"], ["id", 268]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 9.3ms | Allocations: 1161)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$GhSbtk56AmBzbVvMoPjhteoNYgsCqzxsIKCGx3PKyc/3KpEDQiLFa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.087782"], ["updated_at", "2024-07-13 15:09:13.087782"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"AvwqSLrvFvhf9gyOf2-L7w\\\":{\\\"token\\\":\\\"$2a$04$sKfaybCbkCtytx/yGUUSw.YTXDFEfJcYDpO0D8gFOzwschHj78DRG\\\",\\\"expiry\\\":1722092953}}\""], ["updated_at", "2024-07-13 15:09:13.091728"], ["id", 270]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 270], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 270], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"AvwqSLrvFvhf9gyOf2-L7w\\\":{\\\"token\\\":\\\"$2a$04$1V8Hhd7psRXbgDCe8clQcO7AJM5xgs5p9rO/7u4ut5E7sVmCBmfgq\\\",\\\"expiry\\\":1722092953,\\\"previous_token\\\":\\\"$2a$04$sKfaybCbkCtytx/yGUUSw.YTXDFEfJcYDpO0D8gFOzwschHj78DRG\\\",\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.097659"], ["id", 270]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 17006)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$e9HFClM5dQ3Nv40K2.toRumi2Nikp/PS3L1izeG2DaLI9jq0O4t46"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.135487"], ["updated_at", "2024-07-13 15:09:13.135487"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7P/I6Aa5ddp.9hhE3/jIpeI5lk4tTMMO7F38tIL3.wkyPWK8pOnLa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.148724"], ["updated_at", "2024-07-13 15:09:13.148724"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jpnTA4j-NSqTCeGYtVtxQw\\\":{\\\"token\\\":\\\"$2a$04$CiGJfs74zAsOAKYbp9a77u2v6fLK5WYsxGhxw7ppVZDlmYeSjCTri\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.151319"], ["id", 272]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 272]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$DclTw1XokS5S7u1aeLrUy.taqkCdY0eDRoatD3EE6FG8tQAzOhCmC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.169748"], ["updated_at", "2024-07-13 15:09:13.169748"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 273], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"MYpJNdIRJgKUym_7a6-5tg\\\":{\\\"token\\\":\\\"$2a$04$bVBGGQQYfLua.DjKRd40W.YTu19MhZYDW9VOqh715M9ZTBalNeTYS\\\",\\\"expiry\\\":1722092953}}\""], ["updated_at", "2024-07-13 15:09:13.180344"], ["id", 273]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 273], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 273], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"MYpJNdIRJgKUym_7a6-5tg\\\":{\\\"token\\\":\\\"$2a$04$ODUpHeh0Hr6zz9iGF3gjieEq7eYMrVIOIOMDLUuQ3UAhFzNU6064u\\\",\\\"expiry\\\":1722092953,\\\"previous_token\\\":\\\"$2a$04$bVBGGQQYfLua.DjKRd40W.YTu19MhZYDW9VOqh715M9ZTBalNeTYS\\\",\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.185473"], ["id", 273]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$sJmIGw5asf2HdebL61NW8eZgW1com5QiFNXORUzckIKxGh83FL5KK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.192264"], ["updated_at", "2024-07-13 15:09:13.192264"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$b1n4HW0BnPxKFnb1Yc/rbOUHrTE/IkUfPeaBecla4oRJvdl3ml4g2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.204150"], ["updated_at", "2024-07-13 15:09:13.204150"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"p8mQjoqzjsPPICBqe3XYXQ\\\":{\\\"token\\\":\\\"$2a$04$fL3MvLg1MFYUlg60FYDC2OfSd.ZWBtwkPBfqBwJRHjBL7s1MMG.Xy\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.206811"], ["id", 275]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/275" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"275"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 275], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 0.9ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 275], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 275], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 2.0ms | Allocations: 3625)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$IEyjBqE1GBfsFBamRsNAIurgMWoe8zvSwe62zmSeaW8c2mLWvm2Na"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.226881"], ["updated_at", "2024-07-13 15:09:13.226881"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jUZrNaLBzQoUOpIUfyCrXg\\\":{\\\"token\\\":\\\"$2a$04$3MpL7ufmRO6DAkBULD35be9WnabkFhk/G6Wdm5KVf34tgMrjhpdc.\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.229411"], ["id", 276]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$I89fGZHtxnZ06A3brB68CetWIqM75s20OKx634yPdwDpx5b2xIg6G"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.266933"], ["updated_at", "2024-07-13 15:09:13.266933"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/277" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"277"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$nveuBY7bXfEYUa9Pp8S/mO/MmMJHd9bwDDIe5t1J5ZzvBW5c0SCLi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.275865"], ["updated_at", "2024-07-13 15:09:13.275865"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"J3QDTnb-ku92g0F8mR8pAg\\\":{\\\"token\\\":\\\"$2a$04$uI0/tPkQcyXMUjcO1xSZkOoPC.H9iAHdzblbjawmAGnkG5S9Qp7K2\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.278347"], ["id", 278]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/278" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"278", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 278], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:09:13.286062"], ["id", 278]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 210)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 278], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 278], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 1.7ms | Allocations: 2573)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$hGqI65wHdkHG0WgnNhO38uh/O1xs0Dh6wzud/Ra0GLiwJYfAryAmC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.298148"], ["updated_at", "2024-07-13 15:09:13.298148"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"oIDmVC0ZBWZ77pHN9Bf3Jg\\\":{\\\"token\\\":\\\"$2a$04$X/5AS9.439fQQXuE27H4mOvU.4Br/nrIARvzqdbKKe5BOEQUNq8By\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.300792"], ["id", 279]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/279" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"279", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 279], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 279], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 279], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 6ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 2057)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$LMnQmg2qw4l6ynXZTS3ItOZqI8ZIYUP8dx.SdcJ8FtpuORkTNTAUC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.317442"], ["updated_at", "2024-07-13 15:09:13.317442"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1m4uyonWEt3q74KvPC4CuQ\\\":{\\\"token\\\":\\\"$2a$04$tPMoCKB6vwaV1YBQ7EExdeH06paoYH.4lHOiWPpaIef4pr/zdi3ri\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.320085"], ["id", 280]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/280" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"280", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 280], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 280], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 280], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 8ms (Views: 0.4ms | ActiveRecord: 2.0ms | Allocations: 2049)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3P3xWyYHnEZw4bEja1382.yjA2A5z0suE1VOmnww6bnh3pHS8ZJgi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.336194"], ["updated_at", "2024-07-13 15:09:13.336194"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"916Ga-WEbj7G85E6J5dEPQ\\\":{\\\"token\\\":\\\"$2a$04$fVZ/mcvOz0fShegmxik2LeNSHvvTUl1rp41vbj5l9boNujqauyOkK\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.338794"], ["id", 281]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/281" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"281", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 281], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 1838)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$sEdBkMaRcQakoHt5sI78HOigTYpVSQNZltGlFAhngAuDWMJsj3lam"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:13.353987"], ["updated_at", "2024-07-13 15:09:13.353987"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"FtiFHnd9xXKE_N0HR-pFsg\\\":{\\\"token\\\":\\\"$2a$04$KORqWB48Y0a9f1h0lgx/sew54S/icN47I/zkMiumcEpHyhoEuJiIG\\\",\\\"expiry\\\":1722092953,\\\"updated_at\\\":\\\"2024-07-13T15:09:13Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:13.356826"], ["id", 282]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$KmQSUmqMMFgmvGlINz0wd.HTGhjUEinZpfCkdW1vITBhJgyX9sC8q"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:09:13.361505"], ["updated_at", "2024-07-13 15:09:13.361505"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/282" for 127.0.0.1 at 2024-07-13 15:09:13 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"282", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (1.0ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:09:13.367981"], ["id", 282]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.8ms | Allocations: 1162)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$/MhqaDjUTsA73wtmud6dzeFtyzBVSgdl212PEwIBVwSMGqF6DjyMu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.733980"], ["updated_at", "2024-07-13 15:09:55.733980"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$SOU2L0Y/zBdCBXdD/nM3fuEHJaSTgDCA7OuBBSEIV55lcElDBl0SG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.743132"], ["updated_at", "2024-07-13 15:09:55.743132"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"oI_XCPDsh7Zq5D366xtwiA\\\":{\\\"token\\\":\\\"$2a$04$.aoMVE9F8dwdRC6J8CgEW.tNA0wzb.c6xAVrzyT3vRyKaYSt5RKv2\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.745876"], ["id", 285]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$GH9cHejJHBpzRcbSFToJLOtU9Ig2oqktybapOdAxkcg9zXriwWizm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.761353"], ["updated_at", "2024-07-13 15:09:55.761353"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$hxFP6nsOev6awo0L2xPS7u8UhWktIBtmONLKRdL1GvBaV0VwU0t9q"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.770379"], ["updated_at", "2024-07-13 15:09:55.770379"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$vzGPENjSiDTh.9oI9ctjz.wvYObpLzWCr90MVn6X9LsMSsTB2lnyq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.778300"], ["updated_at", "2024-07-13 15:09:55.778300"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"PXfbYsg_qJ9Xt-ZzNdqlrw\\\":{\\\"token\\\":\\\"$2a$04$I7T3GoEEpXhtorA6SNDMe.BU5lg/YEeCSNGCPh1kLVUK9JfPTI5Cm\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.780624"], ["id", 288]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/288" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dgfTrbd2lvGdpPMGvVwwxegI/NOcCpS2gCoZnwLH/4H8UWP1X5SOm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.788762"], ["updated_at", "2024-07-13 15:09:55.788762"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"NyA2RShWKPobrAwtkTULdw\\\":{\\\"token\\\":\\\"$2a$04$1eVbXIwOgD8SwVkuifgObeBqops9uQ9mKeHeDiMOz/LyGDP7PsaJe\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.792931"], ["id", 289]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$HC8Qu6yFJMM6mEKfyg6Q8eN.p2UPETLdsZwfxwnzeks56sEvtPt72"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.802103"], ["updated_at", "2024-07-13 15:09:55.802103"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/290" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$lAk98BM6Fa6bavMf2I.S4ORFRt7Ehb.EJ5hetYEOBAR0y3vhKB1oO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.810240"], ["updated_at", "2024-07-13 15:09:55.810240"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"iHWxjuloqGumO5b1qR45NQ\\\":{\\\"token\\\":\\\"$2a$04$cInmeO5Rd9t/iJ2wrDmuWugCrixB41DnyL7AfB3slDzlTuHe8gBve\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.812784"], ["id", 291]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/291" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$VMCLPa0BhdwiWm.bhcMb/uuBNCOm4fhVotkpAkajM17ohMod.CP9a"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.820932"], ["updated_at", "2024-07-13 15:09:55.820932"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1TxE9PGkZWP9Rb2HzZltww\\\":{\\\"token\\\":\\\"$2a$04$BpWlZBaFD1s.Etr2mGSfCeQhy9ivu3non5.BTsFDfvXPxti3HAPDS\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.825083"], ["id", 292]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/292" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$AJg/ipiTwFKMPu940tb.dutwbOJWLS0jFYuO4hRRxpUS7EtBLrQFO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.834723"], ["updated_at", "2024-07-13 15:09:55.834723"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"r8HFbTdTwwooOhAcwYMfqA\\\":{\\\"token\\\":\\\"$2a$04$nDUYjiLvzpt.zPJ/jE87eebNU6DCNud.85uAPQ2GmNDopiZT2prRW\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.837177"], ["id", 293]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/293" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9LLFUSNoiuB5YnVNvd3wseK4JBYovbeIGU9wWssBa6Xc85BYtKGeC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.845188"], ["updated_at", "2024-07-13 15:09:55.845188"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"dhqEE2sUWz-998oFjxhP-g\\\":{\\\"token\\\":\\\"$2a$04$lLfJ0HOGmBuj3Uy2xS.lSevVrHikp4mwe4k5xwSCX9FTD9407S.RK\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.847663"], ["id", 294]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/294" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$G3QMJm50Tck0bvd7T0vorOctmys7o9348rkMgji0QF3LjQBKFLjNG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:09:55.857923"], ["updated_at", "2024-07-13 15:09:55.857923"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"E24g-t5iypreXXeat6Ojrg\\\":{\\\"token\\\":\\\"$2a$04$IdjRNybVlk.aZkKrrQcj4uae.QSyPu.kg0zuRcAQZPZNKaSBg0HpC\\\",\\\"expiry\\\":1722092995,\\\"updated_at\\\":\\\"2024-07-13T15:09:55Z\\\"}}\""], ["updated_at", "2024-07-13 15:09:55.884498"], ["id", 295]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$TMVywkmgSzFq4grfoOMTv.5Yk4xosiKMOFggxpbUlzeJ64aqpbHfe"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:09:55.890612"], ["updated_at", "2024-07-13 15:09:55.890612"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/295" for 127.0.0.1 at 2024-07-13 15:09:55 +0000
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:04 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Wok0oQWqmDQ93D9Lh5.jQewfC0LTv/5dEtuXROAP3rbQrPgK74lCu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.023055"], ["updated_at", "2024-07-13 15:10:05.023055"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"llD6P3oqBQrpAL2wRMZ70A\\\":{\\\"token\\\":\\\"$2a$04$HyktstMidY7cf8PLfVEpxeQwph2.NMQ6tEZviE05m4/0e2jRsWLxa\\\",\\\"expiry\\\":1722093005}}\""], ["updated_at", "2024-07-13 15:10:05.026298"], ["id", 297]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 297], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 297], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"llD6P3oqBQrpAL2wRMZ70A\\\":{\\\"token\\\":\\\"$2a$04$NpMdGFYtBxKkWsT5Y81OPes2Ac7CWIGH12WRR73aZAJwMO7hDG3ae\\\",\\\"expiry\\\":1722093005,\\\"previous_token\\\":\\\"$2a$04$HyktstMidY7cf8PLfVEpxeQwph2.NMQ6tEZviE05m4/0e2jRsWLxa\\\",\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.032447"], ["id", 297]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.3ms | ActiveRecord: 10.1ms | Allocations: 17006)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Guus0lJZOyrSp5vXD/H.j.dsw41pArHjlDBrDH64L7FusUxItDr7m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.069728"], ["updated_at", "2024-07-13 15:10:05.069728"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$PBbXxSUCdpRyXWPtswoCzeyK8aS97R0sWwQIXqoFeyiT14fYT7ESW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.084420"], ["updated_at", "2024-07-13 15:10:05.084420"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Tqm4Y9nV8kqvPhwFkKGMLA\\\":{\\\"token\\\":\\\"$2a$04$aTI3i9mYrtXBo7r7MBDX.ejJrENftCbeRRzqhtvFOd7PdDov61Y/e\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.087205"], ["id", 299]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 299]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$zf9XOHOSn3mbk.1HBH28QegG4xUaNlP9Ke9ccX5pGMEPTcqLOi0kK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.107475"], ["updated_at", "2024-07-13 15:10:05.107475"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 300], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ObNtfP5cY9KlHs78EX-r-w\\\":{\\\"token\\\":\\\"$2a$04$7xhsZyDZN1pgI4mkMB.ZhOy1NYV8GZYsnHjjzxWc.JPP3Vrh8dn56\\\",\\\"expiry\\\":1722093005}}\""], ["updated_at", "2024-07-13 15:10:05.118111"], ["id", 300]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 300], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 300], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ObNtfP5cY9KlHs78EX-r-w\\\":{\\\"token\\\":\\\"$2a$04$Lc9W4U/Y2NEnu8Q44YPyP.ivuxyFI2apR/KN0X7g2mASmzCj5flya\\\",\\\"expiry\\\":1722093005,\\\"previous_token\\\":\\\"$2a$04$7xhsZyDZN1pgI4mkMB.ZhOy1NYV8GZYsnHjjzxWc.JPP3Vrh8dn56\\\",\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.123362"], ["id", 300]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$cxGUMcxVDSC9OKMObSTqZOQC8laSmMKB0P1.cv4gNr6AjvCnMMVWe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.129450"], ["updated_at", "2024-07-13 15:10:05.129450"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Im.y46mxXq7mcnDTCOP9p.O3eL94mzktZFhr8x4eZGc2HDSRPiDfa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.165181"], ["updated_at", "2024-07-13 15:10:05.165181"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"WIgTVBN1S-qyvkSL4SoPgA\\\":{\\\"token\\\":\\\"$2a$04$yv994njR8rfDA4FAwfcYlehukllz/wzh9.xa4CJr02fyVTki9mt5i\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.168551"], ["id", 302]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/302" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"302"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 302], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.2ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 302], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 302], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.4ms | ActiveRecord: 1.8ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2t.sur3YtrOcYWc05tryAuXC3bL3pDlIWeQuFVixFFe8xCecEOtAy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.190921"], ["updated_at", "2024-07-13 15:10:05.190921"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"UVSb1VNrDfnFTgF1mGxfIA\\\":{\\\"token\\\":\\\"$2a$04$Zanleu2kf2K6EQ0wSbIXNewb8pLXUMLi09wIhtzEVDaqzZy9k3jFG\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.193243"], ["id", 303]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 468)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7uR.nL1C3rMt53dFxl7GJ.mq1aBFgx.8zpuzNJY2w.IB1RO.sfleG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.205856"], ["updated_at", "2024-07-13 15:10:05.205856"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/304" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"304"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$F9WFaKeQaKjAE2uPaa5RSOZ4qxOr7wmQG3fbByVqx2LxgMXZLXJR."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.215516"], ["updated_at", "2024-07-13 15:10:05.215516"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"obZCdHXFu0S1n0PB7vndRA\\\":{\\\"token\\\":\\\"$2a$04$.Luv85qlKrvSmVdFVjcAF.K0iK7ACX2b9gX8ouyGXT6RSf0wlzVI.\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.218068"], ["id", 305]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/305" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"305", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 305], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:10:05.226147"], ["id", 305]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.8ms | Allocations: 209)
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 305], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 305], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 1.2ms | ActiveRecord: 3.0ms | Allocations: 2567)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$8VOtE82PoCujemjHx.uSA.YBm1KbHbZmPxIOC81oaBSEwDy7BeDnO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.239539"], ["updated_at", "2024-07-13 15:10:05.239539"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"vVbj94fXJoHX2wO7LtR6zQ\\\":{\\\"token\\\":\\\"$2a$04$ZSKgDZ.aVBZrVH7JvLoB5ekIWhjPSFq3jL7FKuXrXBi.DyUFZa1fe\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.242139"], ["id", 306]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/306" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"306", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 306], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 306], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 306], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.3ms | ActiveRecord: 1.9ms | Allocations: 2056)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$miJ0syAjZsH0G30/6q49vOVOq/gRuCJehYHVtvt9q9MX2lk8yKoPy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.257385"], ["updated_at", "2024-07-13 15:10:05.257385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"F3kupSuBnwhldPCpklLU8Q\\\":{\\\"token\\\":\\\"$2a$04$PWmKe4Bh7IluDsNXf0cy4.RZTnBGAILri120W5qyYpTtqA1vOYTFW\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.260096"], ["id", 307]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/307" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"307", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 307], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 307], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 307], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (Views: 0.3ms | ActiveRecord: 1.9ms | Allocations: 2049)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$AzMpeJMJCC.ItZdJfOqniupNkmgk6MN9PrjcfNZ.ypVMdm3Qq8fXy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.277646"], ["updated_at", "2024-07-13 15:10:05.277646"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"si0vNo2NdnNYCLXbu0fwNg\\\":{\\\"token\\\":\\\"$2a$04$TMiWUDbCcu6YcCfdjMWbzOctlo4B0W9tKQl7KBsQsuMrg5AbM/FUO\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.280464"], ["id", 308]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/308" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"308", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 308], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 308], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 308], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1838)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$PZ/r4rlFfmoaUCTK846MxOCZT8ua7DXwCKL3ijLc/l5b0zi6Lrbt6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:05.296681"], ["updated_at", "2024-07-13 15:10:05.296681"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"LWMofcp2mN9OUlgqh7Qxcg\\\":{\\\"token\\\":\\\"$2a$04$TtJ3Iu0SgryKhkrLAOiImeBZ3SvDhHipGfDe/uy2N5wIK4rB7r2GK\\\",\\\"expiry\\\":1722093005,\\\"updated_at\\\":\\\"2024-07-13T15:10:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:05.299401"], ["id", 309]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$yWL.0W321MpSb/pkwT4I4eBbP46ptpraX7.s6qTgrRr4AanLvb95K"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:10:05.303574"], ["updated_at", "2024-07-13 15:10:05.303574"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/309" for 127.0.0.1 at 2024-07-13 15:10:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"309", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 309], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:10:05.309924"], ["id", 309]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1205)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$GnnrLn8N5AS2Dj8pOqDqC.raoKLUuTO2FZvdpZ2cbO5qr6Oob1rmK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.299838"], ["updated_at", "2024-07-13 15:10:30.299838"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"bY1WUPeCBUrxb5cP6-VXUg\\\":{\\\"token\\\":\\\"$2a$04$mqkiECh2FKlzyz5eS7KsEeZmJrt00MvdB4MNYchsyukhUkJsT9vuC\\\",\\\"expiry\\\":1722093030}}\""], ["updated_at", "2024-07-13 15:10:30.303203"], ["id", 311]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 311], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 311], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"bY1WUPeCBUrxb5cP6-VXUg\\\":{\\\"token\\\":\\\"$2a$04$7W//fB3YLorxskvj4Cspwua6L26c9t7XFe2vi8Zm2WltEUn0Z0z6q\\\",\\\"expiry\\\":1722093030,\\\"previous_token\\\":\\\"$2a$04$mqkiECh2FKlzyz5eS7KsEeZmJrt00MvdB4MNYchsyukhUkJsT9vuC\\\",\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.310531"], ["id", 311]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 10.7ms | Allocations: 17009)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$3XCcX7Lghc./93aiNd/D7O0drjfj1/MhRyBhs7U6GonjxkNiej7V."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.350467"], ["updated_at", "2024-07-13 15:10:30.350467"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$LAP.yECROtT1NphuJnlABO/qpgJXyTG069COpGTwFCEo7eMnsFtMu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.364177"], ["updated_at", "2024-07-13 15:10:30.364177"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"zkQxmsmxKSh-TIS2_h-dcA\\\":{\\\"token\\\":\\\"$2a$04$T//munF4otf5t0aWO0Yt0O.u45H4RdKtUsV4PA.8cd2T7ebE7X3E2\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.366743"], ["id", 313]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 313]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$TEAB490FafJeuIw2/4TuIe.pl32H07inYNh.r07dsvsKma/cM/5uO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.407450"], ["updated_at", "2024-07-13 15:10:30.407450"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 314], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"FtPDhRzDU2QqCMcZZU6a5g\\\":{\\\"token\\\":\\\"$2a$04$UnczQhLQaJJOZZpP9/ZcbO4Kbj8QgoaaFPMXenvctL8LsWmR4A3K.\\\",\\\"expiry\\\":1722093030}}\""], ["updated_at", "2024-07-13 15:10:30.418711"], ["id", 314]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 314], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 314], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"FtPDhRzDU2QqCMcZZU6a5g\\\":{\\\"token\\\":\\\"$2a$04$s5i/zt7LyvmVCyTX0Klhv.RVZcgtYZlElAHVWwFTWVQpTlyrn5qC2\\\",\\\"expiry\\\":1722093030,\\\"previous_token\\\":\\\"$2a$04$UnczQhLQaJJOZZpP9/ZcbO4Kbj8QgoaaFPMXenvctL8LsWmR4A3K.\\\",\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.425431"], ["id", 314]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.D9P8WU7bwSi9z8M96edq.CkPf6q93d5y13GJsLm44CY.nCdyME3G"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.431854"], ["updated_at", "2024-07-13 15:10:30.431854"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$cnKUYIXdMZwI6WeYOY7XDOEtdclX81nCmAR260/BoqSV0RKWvSrMK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.443162"], ["updated_at", "2024-07-13 15:10:30.443162"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"tbadHrtSR6JkaO3Vl71UxQ\\\":{\\\"token\\\":\\\"$2a$04$Suwb4ULSuFs0B5hVPURNEeDC5uiAlx380gFiBddU7GQaPWv1thh0i\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.445838"], ["id", 316]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/316" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"316"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 316], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.2ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 316], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 316], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 2.5ms | ActiveRecord: 2.0ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$u7hLhCVct86Xe2D.lUPvieRpQAp2MFWpMRyZ9c2.h6sPp9mMl3TNe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.467730"], ["updated_at", "2024-07-13 15:10:30.467730"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"_lVFWtOnn-TSERiW5VdafQ\\\":{\\\"token\\\":\\\"$2a$04$XrdGcchGZkpeqWk6HRiDAe.chIPfgR9rkF/hpzxkCRmulmZlijz1y\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.470488"], ["id", 317]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$qbxS5GQDrs9WrCc/cDJQGO8VvB9P.su/2mr1BZ0Sbmbpevfr7b4yK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.481980"], ["updated_at", "2024-07-13 15:10:30.481980"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/318" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"318"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$f1PAWcvpN8bAvzTjzxNePuboM33ZJkbQ0LgRB9mMwLjp2jNt.snp."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.491777"], ["updated_at", "2024-07-13 15:10:30.491777"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ysNoD9CKW48gOHR0Zv1SNg\\\":{\\\"token\\\":\\\"$2a$04$2BhvWu01lSxYk7sH4icrJuPOnX/N/PIt1mjk2e/qLXaSEH89Al6Ye\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.494473"], ["id", 319]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/319" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"319", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:10:30.501808"], ["id", 319]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 209)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 319], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 2.1ms | Allocations: 2564)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$WnMhjRhcLO//24Mrk9OnsOCPyjp52uAvvjQMz1L04rTrwQNEssPzO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.511787"], ["updated_at", "2024-07-13 15:10:30.511787"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"QFwv6T_yPID7BbahVntpqg\\\":{\\\"token\\\":\\\"$2a$04$SUz/fhYgXcLooon04VQZ4.LWDymOkvqI7sn06fbQfon/lC5eRetI2\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.514553"], ["id", 320]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/320" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"320", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 320], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.3ms | Allocations: 159)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 320], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 320], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 2063)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$8sfG5MARuHBCN7gYQPFL8uTKrYw/RNI4GbP9OMXkEaf0WsIfhoJ.m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.530209"], ["updated_at", "2024-07-13 15:10:30.530209"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"BFE29JD_fEWyRsyRk97XhQ\\\":{\\\"token\\\":\\\"$2a$04$pNXyo.Th11svpi0.t6LwuOQb8n5kR0M8XmK/enX/TZvy7lLPPLPDu\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.532832"], ["id", 321]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/321" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"321", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 321], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.3ms | Allocations: 159)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 321], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 321], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 2060)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$YV5iMxhFWWakZKeEhdQIDOodJjgBiyjQ3Uv21sKngaiz6vuC5pkcK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.548243"], ["updated_at", "2024-07-13 15:10:30.548243"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"h9NLE-M-ochJZVnswfASgQ\\\":{\\\"token\\\":\\\"$2a$04$xK18/6AnNh/4s0rNZ97tkOGnr6HuicdCF681yW4baFMcAymamR6VW\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.550832"], ["id", 322]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/322" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"322", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.3ms | Allocations: 159)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 322], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 2081)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$XOwNDYlbQUE6iRsYv9tQHeaHsNb6oD.J5xW401uV79h3h9u8airli"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:30.569316"], ["updated_at", "2024-07-13 15:10:30.569316"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"tNOlSgJK5c74Rv7uT4kw_g\\\":{\\\"token\\\":\\\"$2a$04$rCZWwhQ7kdrYbxx1V3vwsu6aBigS7PwspbDvlbR/2NDlOglMmsLPW\\\",\\\"expiry\\\":1722093030,\\\"updated_at\\\":\\\"2024-07-13T15:10:30Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:30.571921"], ["id", 323]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$rnma/cGoTS7rtpGZTGYpsuALrO3zFULNea4FS0ypPlTqgAmxdgNxm"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:10:30.576066"], ["updated_at", "2024-07-13 15:10:30.576066"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/323" for 127.0.0.1 at 2024-07-13 15:10:30 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"323", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:10:30.583676"], ["id", 323]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1205)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$eMlqYNrvazMQW1T5PtafjuFNOK3csLAH6NlNgoS8gu7y9Gq7KBUTu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.787358"], ["updated_at", "2024-07-13 15:10:43.787358"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Fh9Gu-eBY4TTZxz-IMPqoA\\\":{\\\"token\\\":\\\"$2a$04$hH3dSDZYwLT87bNsheR0b.9O96p/KG32ttVu8WlgeHcyR5jQSWs4y\\\",\\\"expiry\\\":1722093043}}\""], ["updated_at", "2024-07-13 15:10:43.791130"], ["id", 325]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 325], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 325], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Fh9Gu-eBY4TTZxz-IMPqoA\\\":{\\\"token\\\":\\\"$2a$04$1xW/rAZSbYgYNn118VOXte8V9taS22q9ThgdevA02c86B5atBabga\\\",\\\"expiry\\\":1722093043,\\\"previous_token\\\":\\\"$2a$04$hH3dSDZYwLT87bNsheR0b.9O96p/KG32ttVu8WlgeHcyR5jQSWs4y\\\",\\\"updated_at\\\":\\\"2024-07-13T15:10:43Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:43.797845"], ["id", 325]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 11.2ms | Allocations: 17006)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$t/6oTG3IRooAsl9vi81EPunDRjiPOEGoCkByx2TVA6ZG8.O3uIdAq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.838416"], ["updated_at", "2024-07-13 15:10:43.838416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$HwH2D/p25Zs/wlpfh5JsDep6.nEggwOBDbtRfJ/ojGfxftJIcfEVq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.850980"], ["updated_at", "2024-07-13 15:10:43.850980"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"2xPLW1IG2am8nJVwHJ2Ctw\\\":{\\\"token\\\":\\\"$2a$04$3nN5RCr.Z29aQoKC7s99LOoMzJoYIpIuGv8eztnE9SGaZhu5VRUpm\\\",\\\"expiry\\\":1722093043,\\\"updated_at\\\":\\\"2024-07-13T15:10:43Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:43.853482"], ["id", 327]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 327]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 847)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$hNR7t3NzMn0F7/210571ce3tfSOFGU3rK8sbZbuNxK6oBj9mGFXw6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.871988"], ["updated_at", "2024-07-13 15:10:43.871988"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 328], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"MeFJg5bbQKECXJQ7k8QiSw\\\":{\\\"token\\\":\\\"$2a$04$cXBjJIQMaxVjSP4ILXNdVeVrlOI5ykft9BOBFQ/WvHPmOIf8.Yhzm\\\",\\\"expiry\\\":1722093043}}\""], ["updated_at", "2024-07-13 15:10:43.902896"], ["id", 328]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 328], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 328], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.9ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"MeFJg5bbQKECXJQ7k8QiSw\\\":{\\\"token\\\":\\\"$2a$04$7iZlHIywhEaV3X59HwBwIOEoR5.vFS8gzZN7o4rX3vGxDVz6sv4A2\\\",\\\"expiry\\\":1722093043,\\\"previous_token\\\":\\\"$2a$04$cXBjJIQMaxVjSP4ILXNdVeVrlOI5ykft9BOBFQ/WvHPmOIf8.Yhzm\\\",\\\"updated_at\\\":\\\"2024-07-13T15:10:43Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:43.909266"], ["id", 328]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 4.0ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jb0iFV8OwAROPyZvjZjgVu/GnaBzbcjTXpaBekY3C/sf2ePALHrHO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.917454"], ["updated_at", "2024-07-13 15:10:43.917454"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$h0WllBw94sZ85KQRYYfdjO2uJuxjGKgS2aRTvV5Ti4ke8uP179b.S"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.929090"], ["updated_at", "2024-07-13 15:10:43.929090"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SiH-gXyjPRzfRHLiQDRHeQ\\\":{\\\"token\\\":\\\"$2a$04$CxpdNDCr7/.lr9t8jpvWNeqIk2A5RPor8P4YgFOi9H8mFQQYGtPKG\\\",\\\"expiry\\\":1722093043,\\\"updated_at\\\":\\\"2024-07-13T15:10:43Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:43.931719"], ["id", 330]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/330" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"330"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.9ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 330], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 3.1ms | ActiveRecord: 2.3ms | Allocations: 3629)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7OSsqokP0kEp4lpzv2VQ7uONnT39H15gqNY8mX4NEuRG02AqLOGR."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.957143"], ["updated_at", "2024-07-13 15:10:43.957143"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"hnR7JL_tcHqNuudGYWUEqQ\\\":{\\\"token\\\":\\\"$2a$04$glIzhlzFYw3Hwh.KVcJNTeqyEoCSMnmYSDFUnfvC6WVFMMUv04r2K\\\",\\\"expiry\\\":1722093043,\\\"updated_at\\\":\\\"2024-07-13T15:10:43Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:43.959535"], ["id", 331]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 467)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$/HqEMMqlYRCFMnmA.AyWp.gz/AtS8yYWThDFsGV4qiE7cKOjheTK6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.973555"], ["updated_at", "2024-07-13 15:10:43.973555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/332" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"332"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$0tlswOQ/qiPERmDWoBuUdOjx1fyWVTTare31RQr2jmX.QX.ET9xr2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:43.982090"], ["updated_at", "2024-07-13 15:10:43.982090"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1_ZTzAOITxIR1dVv7zJrqw\\\":{\\\"token\\\":\\\"$2a$04$5dECiSjH9ejjwGs.og/J1e6U8BDHsMiCuIhp5xif9gTzQpeZHv9ge\\\",\\\"expiry\\\":1722093043,\\\"updated_at\\\":\\\"2024-07-13T15:10:43Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:43.985156"], ["id", 333]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/333" for 127.0.0.1 at 2024-07-13 15:10:43 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"333", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:10:43.992247"], ["id", 333]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.7ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 333], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.8ms | ActiveRecord: 3.2ms | Allocations: 2563)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ocpNR5Zu.OfWgwk94TmPH.waNnn7nhQLYI8zwk7OnouCFfPbcoU.C"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:44.005755"], ["updated_at", "2024-07-13 15:10:44.005755"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"pWhaZ4e2T4H4hG1YZ26K7w\\\":{\\\"token\\\":\\\"$2a$04$WGp9X6mtClDSgU.SIjCRreAHFaVVn/8.gbU4pxKcjnXL/RP1S.GNK\\\",\\\"expiry\\\":1722093044,\\\"updated_at\\\":\\\"2024-07-13T15:10:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:44.008239"], ["id", 334]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/334" for 127.0.0.1 at 2024-07-13 15:10:44 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"334", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1150)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2USUARWbflBM79otLY3U0u8ZCHg5e8kpQaJNvaq0vhPYcWnC2Gko6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:44.020520"], ["updated_at", "2024-07-13 15:10:44.020520"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"2KxQQoa0DidKuBhPkp3FIg\\\":{\\\"token\\\":\\\"$2a$04$RiUtJGmyOPCUZRThryLhreNj2Nko4EBxtNQd0ZR.dQNSyvkaFZYba\\\",\\\"expiry\\\":1722093044,\\\"updated_at\\\":\\\"2024-07-13T15:10:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:44.023135"], ["id", 335]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/335" for 127.0.0.1 at 2024-07-13 15:10:44 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"335", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$scIkklDRS9r8/RJsccglYuHXQdVVYlNxhrZ6uUrSwVK85m4k7g/vS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:44.038183"], ["updated_at", "2024-07-13 15:10:44.038183"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"zL2zAMCnt1RV5FaFz35bgg\\\":{\\\"token\\\":\\\"$2a$04$9cTVeb4Wa7bqTgCRmEtdYucwQmArn6pTYp/qM7GdMur/OHiUCPT3m\\\",\\\"expiry\\\":1722093044,\\\"updated_at\\\":\\\"2024-07-13T15:10:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:44.040896"], ["id", 336]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/336" for 127.0.0.1 at 2024-07-13 15:10:44 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"336", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 917)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$TJ1qSJgL5PnUQaDW1O4CWO8CRZ7Y1my3pRxg6iR5Bcw5/Ojvrtuvm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:10:44.053148"], ["updated_at", "2024-07-13 15:10:44.053148"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"h0idK5gMHMeLbuuEJkVN-g\\\":{\\\"token\\\":\\\"$2a$04$AUDTxZo0UkJ/cHHJhsfBHuf9Uj9iO2/7JKmXLupWhh1XtjB6nimQ2\\\",\\\"expiry\\\":1722093044,\\\"updated_at\\\":\\\"2024-07-13T15:10:44Z\\\"}}\""], ["updated_at", "2024-07-13 15:10:44.055759"], ["id", 337]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$GoIw7ChnB1PKatb79STTfuiCyebwpVGORRVHEJ1nWLusIh1t3jd/K"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:10:44.061465"], ["updated_at", "2024-07-13 15:10:44.061465"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/337" for 127.0.0.1 at 2024-07-13 15:10:44 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"337", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 337], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (1.0ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:10:44.068382"], ["id", 337]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1204)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$xwnYQMjdFH0cGojJ2diPGedJF4/ODBDLyZnjoxMFxNFqoZOCVQybi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.428406"], ["updated_at", "2024-07-13 15:11:05.428406"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"0h_7XGvd68-Ak98d3uTDaw\\\":{\\\"token\\\":\\\"$2a$04$1SD0iJ1ZQcLLICZ9pEd6ru85GOrI31h4CM.K5TpE5FmipoZw74tZe\\\",\\\"expiry\\\":1722093065}}\""], ["updated_at", "2024-07-13 15:11:05.431692"], ["id", 339]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 339], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 339], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"0h_7XGvd68-Ak98d3uTDaw\\\":{\\\"token\\\":\\\"$2a$04$NznEXEuq2wY6ERAGLTFXXeKMgDTHDZTI9iR4u5iBl4rCbjaec9g36\\\",\\\"expiry\\\":1722093065,\\\"previous_token\\\":\\\"$2a$04$1SD0iJ1ZQcLLICZ9pEd6ru85GOrI31h4CM.K5TpE5FmipoZw74tZe\\\",\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.437459"], ["id", 339]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 17007)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$DIzeyU1deHJ0KRSX9OUt.uZGt6APYnoZK91bSSeV7RkyWY/hH2okG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.475950"], ["updated_at", "2024-07-13 15:11:05.475950"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$d22AVSuTfl03WRdkC1Y55.KFkqlTG9/U3324iunBQM97K3V8X1Z9e"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.489358"], ["updated_at", "2024-07-13 15:11:05.489358"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"voAijRVXY5-qPZhr1zr5yQ\\\":{\\\"token\\\":\\\"$2a$04$dq1tH/9NK2/GoEV6xgx82.HXmKCgFQAP4OSZVKhNqikcJeyFqJU0u\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.491936"], ["id", 341]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 341]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ONGQMExbjoSPntlQu0dAEu/4l3TTQjt7jcce2UxbhU7wdt8dYA6yG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.513801"], ["updated_at", "2024-07-13 15:11:05.513801"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 342], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"JMSRDQ6GwMzk3s6Aok-cIg\\\":{\\\"token\\\":\\\"$2a$04$mpbX/ZtUkzbx/.LJ309z7OWSlStHsKIFSAD8RRIkxRg0EU9XjaaMy\\\",\\\"expiry\\\":1722093065}}\""], ["updated_at", "2024-07-13 15:11:05.524146"], ["id", 342]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 342], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 342], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"JMSRDQ6GwMzk3s6Aok-cIg\\\":{\\\"token\\\":\\\"$2a$04$4yuVzS8bsVp8U9mpDUtYi.iOm5xJvSwh8rGTy7pHwifBSOtArJReS\\\",\\\"expiry\\\":1722093065,\\\"previous_token\\\":\\\"$2a$04$mpbX/ZtUkzbx/.LJ309z7OWSlStHsKIFSAD8RRIkxRg0EU9XjaaMy\\\",\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.529810"], ["id", 342]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ZPfjjzXy6MMQrpmnc/H7SOe1fIqbg9hMVWGGFiiKPFXcrHK9J28ue"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.536308"], ["updated_at", "2024-07-13 15:11:05.536308"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$6JpnZuLIsYzj9lgTM9HFfOt2LHwFMaBGKzNoX9iw1VnGID8HPBODK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.548866"], ["updated_at", "2024-07-13 15:11:05.548866"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"K3q_cZENK97PKRKVA3BwCQ\\\":{\\\"token\\\":\\\"$2a$04$.Zya2r0awKJEqbndRWxyyu4gpNlQE8aGfLwYwGD.lFK/znJRZvCMK\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.551535"], ["id", 344]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/344" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"344"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 344], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 0.9ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 344], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 344], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.1ms | ActiveRecord: 2.1ms | Allocations: 3627)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$MM3R9QX4vne/hpvMkMFv8ObRMGhfF877kNpLYd/M4sebhpZo7ic4q"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.571649"], ["updated_at", "2024-07-13 15:11:05.571649"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"CctICQ6WIjtzn__Z_Bd8XA\\\":{\\\"token\\\":\\\"$2a$04$pxIrDnY1Sxl7WIuY6827neEkJlkk2VbiaHB/iuxkTOK968ISHdwo6\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.574348"], ["id", 345]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 467)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$vga8Ixz.WpFmPk5Wqyhxoe.TTTj/NEWMkK6BiAM267BpC32pvbg3u"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.586979"], ["updated_at", "2024-07-13 15:11:05.586979"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/346" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"346"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Xt.C2GjwBvcgwRIrm0mhmunbB6oAVRRI24t9DbH4StOR.W0iJFVVC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.596375"], ["updated_at", "2024-07-13 15:11:05.596375"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"peNSd0zemW0ZOKD0KdU3gQ\\\":{\\\"token\\\":\\\"$2a$04$Y8cxZuZo8PygDPNycUHQdegE7B0BLZkFjcgg9fyWUPL0N.XVaqGPa\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.599224"], ["id", 347]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/347" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"347", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:11:05.606530"], ["id", 347]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.8ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 347], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 1.3ms | ActiveRecord: 3.0ms | Allocations: 2563)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$pUt6aK79lA1h2PFDZXNlbuyqaUsxp5Lxg5UM8mJfhEo8f8RdsbsQC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.620480"], ["updated_at", "2024-07-13 15:11:05.620480"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"m3zKcLXT_cQu6lBP2RdpFg\\\":{\\\"token\\\":\\\"$2a$04$VHqvYLAq3oEd227hmc1j1e5WHpg0Asoewwz1LUurfB/SeXqIw1.9W\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.623060"], ["id", 348]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/348" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"348", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 348], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 1150)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$mDLESslSEuaKgnr32FjHaOaXyC9k9dPircbyhGVwGCcNGN0m3jZLK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.634784"], ["updated_at", "2024-07-13 15:11:05.634784"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"KFRYVmqUS8SQFpnlWILx1Q\\\":{\\\"token\\\":\\\"$2a$04$/mTrn09i1jT/E35uDd3cKOMMofBKPMc4fuRvN/L9SNvlns/viUGmq\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.637341"], ["id", 349]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/349" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"349", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 349], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$z9BiFISCJZQYM0SAjeeo2O3br7teQSTLrGr4.K5TbQDZEQgCR2Dx."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.650169"], ["updated_at", "2024-07-13 15:11:05.650169"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SPSx9sF8RMTKm2Sh_WRDhQ\\\":{\\\"token\\\":\\\"$2a$04$8xB.hnWBAGdE8Lq101.Ia.Ooz7Sl0FyyZNU8lyGCk28hrESoW9KN2\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.652635"], ["id", 350]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/350" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"350", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 350], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 917)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$rlDF97YBPUE8RSv3UdesTO9g2O/JJCcbzr73QWWdJc8f/SCDtU5Hm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:11:05.663900"], ["updated_at", "2024-07-13 15:11:05.663900"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"dZi8ZcD9jzH2JOIYS_6DJg\\\":{\\\"token\\\":\\\"$2a$04$eUyrso4HqXkhsB7uHh038OfiFLZ7MoVocNeqdBurIhu4irGrXmiz2\\\",\\\"expiry\\\":1722093065,\\\"updated_at\\\":\\\"2024-07-13T15:11:05Z\\\"}}\""], ["updated_at", "2024-07-13 15:11:05.666545"], ["id", 351]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$jmkglXuTV.a4NAmbmmqJOup8oypwhXQwyWI9yx1h3xqpv5bdk4lTC"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:11:05.670290"], ["updated_at", "2024-07-13 15:11:05.670290"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/351" for 127.0.0.1 at 2024-07-13 15:11:05 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"351", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 351], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:11:05.699823"], ["id", 351]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1205)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gmApF3CgFzC/gNDPNYb/GuIyB14bnbefA4a9WGvbqsgg4d7P7l8vO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.401106"], ["updated_at", "2024-07-13 15:12:25.401106"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sHlTu9_552IJOhTj0DW_Mw\\\":{\\\"token\\\":\\\"$2a$04$jEcaWWj1IyU.JLMrFvDuNuv23DWfUDMsEpxY5unfirbNrIsa5poOS\\\",\\\"expiry\\\":1722093145}}\""], ["updated_at", "2024-07-13 15:12:25.404572"], ["id", 353]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 353], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 353], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sHlTu9_552IJOhTj0DW_Mw\\\":{\\\"token\\\":\\\"$2a$04$v8jEzA/uWGMJDX8xxDns3.R5UGi4Gp5SUoTnv8mgYLOQnPmd0ebpi\\\",\\\"expiry\\\":1722093145,\\\"previous_token\\\":\\\"$2a$04$jEcaWWj1IyU.JLMrFvDuNuv23DWfUDMsEpxY5unfirbNrIsa5poOS\\\",\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.410821"], ["id", 353]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.4ms | Allocations: 17007)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$GGkisPYz6Lzl4YQ0kv4tDOxT6JytxQyj8qOrpJViiIKYdcCOQE0Na"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.450208"], ["updated_at", "2024-07-13 15:12:25.450208"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$8i3vwsPPV873o1G3biP6T.t0XAxxXwQPDQcM9vuUy6ilSYb/w6FDW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.463592"], ["updated_at", "2024-07-13 15:12:25.463592"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"G8O5mrvoeqUE6C0tIcENTg\\\":{\\\"token\\\":\\\"$2a$04$UZEuazu.g3F4Zq8MGms1Eep/xRcDcE0f3TPJlsL6C9nnLR7tNq5h2\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.466143"], ["id", 355]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 355]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$7R5jJW3JZs8P5cXgN0gPA.X.D5cYQ9sxJEKxTIkkwbW3VA8ALOqZi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.485289"], ["updated_at", "2024-07-13 15:12:25.485289"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DQrFUYmAFese_HEJObsEgA\\\":{\\\"token\\\":\\\"$2a$04$bOrZj4ByYrwEDEoDwZSpHOq7/p2rItyHxHx7wL063ty4//08jgM1y\\\",\\\"expiry\\\":1722093145}}\""], ["updated_at", "2024-07-13 15:12:25.496487"], ["id", 356]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 356], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DQrFUYmAFese_HEJObsEgA\\\":{\\\"token\\\":\\\"$2a$04$plFZ8eUJeNJKr.7n9ZMFr.cc/oMO7ZKrMFpnmbzJgtEfJ6azZaot.\\\",\\\"expiry\\\":1722093145,\\\"previous_token\\\":\\\"$2a$04$bOrZj4ByYrwEDEoDwZSpHOq7/p2rItyHxHx7wL063ty4//08jgM1y\\\",\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.501555"], ["id", 356]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ATHGuUzksKOUbuhG3PHhHO6TJ/NQNPdJQB7sXTV3CdKhBm0O4S2ZW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.507412"], ["updated_at", "2024-07-13 15:12:25.507412"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 596)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$CVpodkp2OSSYXifmsIIWTu//0VcTneb2VazHeb33O3NLXmc2qvZBi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.519824"], ["updated_at", "2024-07-13 15:12:25.519824"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"KSXR9q7T3LlCxEl4oWo9Rw\\\":{\\\"token\\\":\\\"$2a$04$3co2IUvpE0KqN2dyCP6uTOBmnIg/AlrzSTnHH7douqbgNc8H3TKyq\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.522474"], ["id", 358]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/358" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"358"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 358], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 2.1ms | ActiveRecord: 2.0ms | Allocations: 3626)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$j/zFd0LJGg17fwPLzDc9euysDox8KoZiNIxN3iJbsnChamM4xcRvq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.570061"], ["updated_at", "2024-07-13 15:12:25.570061"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"2zwMMaVnFZcvJNugool9Sg\\\":{\\\"token\\\":\\\"$2a$04$dBki3uOYmGcpnLX/0VEyReqYkjKNEbTRqJxobiMFlXaPozWKaDAPy\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.573474"], ["id", 359]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.6YogLI0tta/9I.tJpvpoOApYQuLEZohxxj.TMXYr2MAaeddcivry"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.588140"], ["updated_at", "2024-07-13 15:12:25.588140"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/360" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"360"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$PtkSmk93BxbqVbU.p11Cx.QARada0VNfBgNg2VD/yyeUbbQK51dj6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.596972"], ["updated_at", "2024-07-13 15:12:25.596972"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"R3rsh7Bw3jAsv2RD0Lm-jA\\\":{\\\"token\\\":\\\"$2a$04$XeE10y372TX5dbS28in4u.FaVYaqLw/ifDja9vDEMHtfBIjlOIxc2\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.599858"], ["id", 361]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/361" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"361", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:12:25.609140"], ["id", 361]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 210)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 361], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.8ms | ActiveRecord: 3.3ms | Allocations: 2569)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$LYgFacSRNzATGwXfkEy.ROCCcL6LiQhBgxTwVn9Vxl2c.nyAELUZm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.622680"], ["updated_at", "2024-07-13 15:12:25.622680"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"4a0Sh3jMXvk8ScEQBxNn5w\\\":{\\\"token\\\":\\\"$2a$04$8G.2XtATUrSyyVy0iczp3.Gan3XjIsZf07buTGFcvI91nxTQSBpoW\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.625193"], ["id", 362]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/362" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"362", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1150)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$TRqje6peVhTRlMEDxnMg0.SSYqKqMh7CmdX1IyXpT25Fz7JlcQEmO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.638018"], ["updated_at", "2024-07-13 15:12:25.638018"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"LmbKzbjDvHUWRxsAflNyIg\\\":{\\\"token\\\":\\\"$2a$04$UEeG.kHQ36/0k0v2dUZhXuy/SVN/M128tWTMyfexWVbMyvs1Lv3pu\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.641502"], ["id", 363]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/363" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"363", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 363], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$y.fudXE1MJ1vZWm90e4s9e0r0n/8wZ43UEUWmpP7nRgUBq7FQV8wS"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.654593"], ["updated_at", "2024-07-13 15:12:25.654593"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"C-3aB7LJ_2PsEhTQ6Ai39Q\\\":{\\\"token\\\":\\\"$2a$04$/AzDfqns9Tinr2kDnGh8kePVctszWsF1Qlp3eg0iZlL6PcpPgw7rG\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.657086"], ["id", 364]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/364" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"364", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 364], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 917)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$HnnA5xqI0ucpBaSOJRxS5O7KiNfZ3Xr9GhkItO/3/1E.Ahhq7N7Zy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.669544"], ["updated_at", "2024-07-13 15:12:25.669544"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"xE_Yqy0EeSNFT9k_DVvccw\\\":{\\\"token\\\":\\\"$2a$04$.ZvdY7iUqgoCr3tiiZNnhezqiU.y0eHwSVAQiqgYbVyzB92MQA4Qy\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.673174"], ["id", 365]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$NY4hfNKq9Nx4S92xD4WJyOdkJsUBOrZqAdk/HYQmLvbQ0XBwOU1ve"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:12:25.678360"], ["updated_at", "2024-07-13 15:12:25.678360"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/365" for 127.0.0.1 at 2024-07-13 15:12:25 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"365", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 365], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:12:25.684937"], ["id", 365]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 1204)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$rjq/hpF1lPSlf6VGB9yhfuLN0NeN9UZCZul6DUIsyzJwO8bBbdRt."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.691316"], ["updated_at", "2024-07-13 15:12:25.691316"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"QxEky8Ir_s7sUYufxSPKiA\\\":{\\\"token\\\":\\\"$2a$04$l9saadUTmWhmuOzRbl9HSON3sJqZ.S5v5ftJKWfF.UG2K4G9jn3na\\\",\\\"expiry\\\":1722093145,\\\"updated_at\\\":\\\"2024-07-13T15:12:25Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:25.694284"], ["id", 367]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$q8C7ULeZCsvnnJBkFtAvFOn3e2xE48OmV2QTFwF6pHj.eoAbcqutK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:25.700078"], ["updated_at", "2024-07-13 15:12:25.700078"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$yrmUmYOG2WYFGLMdP/mXhOMwtTLjurW1zysiYORFDqBl3eNCbpScm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.788395"], ["updated_at", "2024-07-13 15:12:50.788395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"4SwOKlnqvewvEgsf1ez-Og\\\":{\\\"token\\\":\\\"$2a$04$0cQaYutfQvFfnM/SMHa1CO0NqA5CE4NuVNTRZ7C2ZccTggVyQVWMW\\\",\\\"expiry\\\":1722093170}}\""], ["updated_at", "2024-07-13 15:12:50.791558"], ["id", 369]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 369], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 369], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"4SwOKlnqvewvEgsf1ez-Og\\\":{\\\"token\\\":\\\"$2a$04$wxIovJ23w1BHuGtXuauYF.OZgm8tru969.dbH0SWh8gl4Fepl.4am\\\",\\\"expiry\\\":1722093170,\\\"previous_token\\\":\\\"$2a$04$0cQaYutfQvFfnM/SMHa1CO0NqA5CE4NuVNTRZ7C2ZccTggVyQVWMW\\\",\\\"updated_at\\\":\\\"2024-07-13T15:12:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:50.797545"], ["id", 369]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 8.0ms | Allocations: 17007)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$yD6gyGTpznCXKT/XsTDaMerZ/oeWcYQw5bxbxdLfwaCpYBrjmDVAK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.835161"], ["updated_at", "2024-07-13 15:12:50.835161"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$NfNx.9b/MkY2Tt7bII0cs.GWFI70NvJXLMQK3uwNng6LeRpecxipu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.848280"], ["updated_at", "2024-07-13 15:12:50.848280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"go7Di90ssiKlO5a9UyC3Zg\\\":{\\\"token\\\":\\\"$2a$04$619oc3GCbrxLS2hPo.0Kb.RAeUqMV9g8EIlihst4n57oTJKZESRA2\\\",\\\"expiry\\\":1722093170,\\\"updated_at\\\":\\\"2024-07-13T15:12:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:50.850834"], ["id", 371]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 371]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$uJrN3qyvq.gIh.66k5vY5.9qlLTpHQsbiXVu6Kcz7ViEQ0GYQq4ka"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.868940"], ["updated_at", "2024-07-13 15:12:50.868940"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 372], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"zJuDjaJ-S6-hK-mHQE47Aw\\\":{\\\"token\\\":\\\"$2a$04$wloExxlGRRmqlt1Owm.m/OBElbum3Uiv1syohEQsOhdRwuihTKCkm\\\",\\\"expiry\\\":1722093170}}\""], ["updated_at", "2024-07-13 15:12:50.880809"], ["id", 372]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 372], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 372], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"zJuDjaJ-S6-hK-mHQE47Aw\\\":{\\\"token\\\":\\\"$2a$04$8xXt4MwUNq6zZpP3gLjnM.KfHaHfZPjGzZnXlvHlLr75j2ackgj0K\\\",\\\"expiry\\\":1722093170,\\\"previous_token\\\":\\\"$2a$04$wloExxlGRRmqlt1Owm.m/OBElbum3Uiv1syohEQsOhdRwuihTKCkm\\\",\\\"updated_at\\\":\\\"2024-07-13T15:12:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:50.886579"], ["id", 372]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ksit1zH7f/U5jJuu2JA8TerVHJfNUSaHz7euiuQlUZTkD7etfCZZ6"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.893283"], ["updated_at", "2024-07-13 15:12:50.893283"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$otmSG5AUiVELeX82/SpJ1eJynnaqJciW5ddIDm4XmNEWUYdFBvKUi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.906695"], ["updated_at", "2024-07-13 15:12:50.906695"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"6JoPYhUUOISdGv1PNsTqXg\\\":{\\\"token\\\":\\\"$2a$04$/5qNE6ojwC9YdXlYpgHstOIxXqPvsmNTIDpRpWrhxjggXRb2d6FJe\\\",\\\"expiry\\\":1722093170,\\\"updated_at\\\":\\\"2024-07-13T15:12:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:50.909408"], ["id", 374]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/374" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"374"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 374], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.3ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 374], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 374], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.1ms | ActiveRecord: 2.0ms | Allocations: 3625)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$fiyFt/vKKtz2vfycjjBTi.9E2jOiXF4zYxGx.887qZXUrg6jYsrge"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.957067"], ["updated_at", "2024-07-13 15:12:50.957067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"KX-Y8y9_bKb89InVjwdVtA\\\":{\\\"token\\\":\\\"$2a$04$oHbf.MfjLRwbRLIfgtC7OOS.spUdWSVeuBmSpD5yT4AG2FOzdqTmS\\\",\\\"expiry\\\":1722093170,\\\"updated_at\\\":\\\"2024-07-13T15:12:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:50.959521"], ["id", 375]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 468)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2rcSKmAhq.R9VesA.1E0EO.E5jYx9qbSliKtSWSJVmhwZFN06Wsd."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.971959"], ["updated_at", "2024-07-13 15:12:50.971959"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/376" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"376"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$SVAmLRAkqERtcRdG7UNgdOJpXZ6DQSZPVkK.gp9lSRw4k5HxMwlBq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:50.981451"], ["updated_at", "2024-07-13 15:12:50.981451"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"uKl1ldRgDkHKiBmt1pkX4A\\\":{\\\"token\\\":\\\"$2a$04$lcD.hHVVMqdWPpoSU.1B3.tbHVvtHp1sVIPMRxff1ZuMhnWFHHbq6\\\",\\\"expiry\\\":1722093170,\\\"updated_at\\\":\\\"2024-07-13T15:12:50Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:50.984275"], ["id", 377]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/377" for 127.0.0.1 at 2024-07-13 15:12:50 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"377", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 377], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:12:50.991751"], ["id", 377]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 210)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 377], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 377], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 3.1ms | Allocations: 2569)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gcIMDbc96Tp.RarGvXy1nOoa6PZwWVD4I5k/V4rbTBsA8Vh0RNSUa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:51.007151"], ["updated_at", "2024-07-13 15:12:51.007151"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.2ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"BkIdrwpuSYFC5qdR9ZlN7A\\\":{\\\"token\\\":\\\"$2a$04$FllC6i4bUgMf.y0dUlAB5.mSl7xodJcCrB241PsPLJwiHWPkeJWW2\\\",\\\"expiry\\\":1722093171,\\\"updated_at\\\":\\\"2024-07-13T15:12:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:51.009933"], ["id", 378]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/378" for 127.0.0.1 at 2024-07-13 15:12:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"378", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 378], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1151)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$mtS1MwsKkrMKdGJ/WrB3G.R7ek/wOHlJxrFqQdxo7h2y3S8LaVzA2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:51.022212"], ["updated_at", "2024-07-13 15:12:51.022212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"l2zxKw_aVkevkLE-J83OPA\\\":{\\\"token\\\":\\\"$2a$04$kC.Hoj5HKqWQpNPyMiUkpegZWHeQ5XxHRJu.BFZ7OhVYSu0PDwN9W\\\",\\\"expiry\\\":1722093171,\\\"updated_at\\\":\\\"2024-07-13T15:12:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:51.024750"], ["id", 379]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/379" for 127.0.0.1 at 2024-07-13 15:12:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"379", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 379], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jNcBaRXwig7Z0Wr294NlCOzupPUGhc8/6w4hYMKC.QEOPfxfBI1/W"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:51.039099"], ["updated_at", "2024-07-13 15:12:51.039099"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sYnHS_V-yJNKObwQ8P4Jqg\\\":{\\\"token\\\":\\\"$2a$04$wy4VFtePj9XUMjVxTLkpmOxC4//aJYTdc5a0/e74DjPLLgNLNrv3S\\\",\\\"expiry\\\":1722093171,\\\"updated_at\\\":\\\"2024-07-13T15:12:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:51.042036"], ["id", 380]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/380" for 127.0.0.1 at 2024-07-13 15:12:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"380", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 380], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 917)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$EsT0CGBcLo67oTDNfLqr7eLDXJvnsYdrKc6EDPRkKJP66f69bBF7W"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:51.054706"], ["updated_at", "2024-07-13 15:12:51.054706"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"rjfCPQjq8uUcGtwzEuM8SQ\\\":{\\\"token\\\":\\\"$2a$04$vsMKX6fXF.FpzKBV3U8R.e1irMipI.xPRFRlGSxkDAS8qO7bc6LN6\\\",\\\"expiry\\\":1722093171,\\\"updated_at\\\":\\\"2024-07-13T15:12:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:51.057246"], ["id", 381]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$EwtDHUV2EvzLSPU8xncr8uoMq3GugDP6EDyoob7eM/Trt4W5tLMxK"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:12:51.062143"], ["updated_at", "2024-07-13 15:12:51.062143"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/381" for 127.0.0.1 at 2024-07-13 15:12:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"381", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 381], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:12:51.069743"], ["id", 381]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1204)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$elYJQjjqa9FgcjcqqY7lFe808Mkpa1qnz1YXGaarYPS7BtiVLOIWO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:51.075260"], ["updated_at", "2024-07-13 15:12:51.075260"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"SzXtOG0AAQvvhhYkUPk4pw\\\":{\\\"token\\\":\\\"$2a$04$EUenqEIiJR1kOymoi3u20.E7aT1ZNAaC4NZDZpfr8FaFyNnNvj8si\\\",\\\"expiry\\\":1722093171,\\\"updated_at\\\":\\\"2024-07-13T15:12:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:12:51.077819"], ["id", 383]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$zoINYYmTI70sAJiJlKDEXuelPYq.579v0cO.wtPeWG/JYb69mJm0O"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:12:51.083543"], ["updated_at", "2024-07-13 15:12:51.083543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/384" for 127.0.0.1 at 2024-07-13 15:12:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"id"=>"384", "customer"=>{}}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 124)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:13:45 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.8ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$c5o3YqcsMRC7YEMz.AL3MedBRs3p1Sl5keLqP1txTqcLK39zibZ0m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:45.991446"], ["updated_at", "2024-07-13 15:13:45.991446"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"MclDjH6cGnVwXV3U2jhOew\\\":{\\\"token\\\":\\\"$2a$04$eiWcM5pVtX7lwNQlIl7XhOm.ru5on4o3EN7Xq4hnWuwDTT9Ogs.Ka\\\",\\\"expiry\\\":1722093225}}\""], ["updated_at", "2024-07-13 15:13:45.995038"], ["id", 385]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 385], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 385], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"MclDjH6cGnVwXV3U2jhOew\\\":{\\\"token\\\":\\\"$2a$04$zN6LkDBUWim6ag6QGIALEu0E3HiJ.m6d6JfE0VhJHo6asZ2MDIXqa\\\",\\\"expiry\\\":1722093226,\\\"previous_token\\\":\\\"$2a$04$eiWcM5pVtX7lwNQlIl7XhOm.ru5on4o3EN7Xq4hnWuwDTT9Ogs.Ka\\\",\\\"updated_at\\\":\\\"2024-07-13T15:13:45Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.001058"], ["id", 385]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.6ms | Allocations: 17008)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$YtLTneX4h6zcEzGpJrBOZeeXVzqfj0p4tAh8Bdf.FJI72t0mrGRAG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.038627"], ["updated_at", "2024-07-13 15:13:46.038627"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$cfq2NUYENg6DpxoadJ6FgOpf2Ogq0OzqahmHzA3oq4GKa35N3RwXa"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.074772"], ["updated_at", "2024-07-13 15:13:46.074772"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"UqOCEy6XKV_nVtx3qCHvjw\\\":{\\\"token\\\":\\\"$2a$04$lFhH0nZjmgUUZw0AOOhilei7XU6siOcvhnbXKBOCkBqdEN4Jd2Svi\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.077745"], ["id", 387]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 387]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ftysxGFkS0WzC7JmnViqIuWxgKQkSs3y8sl1L3MWf0mSx3xTRPt3m"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.097365"], ["updated_at", "2024-07-13 15:13:46.097365"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 388], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"EX4SX29vyuoPnBfge7VzAg\\\":{\\\"token\\\":\\\"$2a$04$g2gXkZ3m1I/9AAKo0f/11.1y0U3YZdVQA9xjS/S5dQisPPONMTeDu\\\",\\\"expiry\\\":1722093226}}\""], ["updated_at", "2024-07-13 15:13:46.108182"], ["id", 388]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 388], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 388], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"EX4SX29vyuoPnBfge7VzAg\\\":{\\\"token\\\":\\\"$2a$04$n0eHaMQFVtw7BBLPvdI2teWotn6B.x/Xrsjr.GOYDB5lMDz7325Me\\\",\\\"expiry\\\":1722093226,\\\"previous_token\\\":\\\"$2a$04$g2gXkZ3m1I/9AAKo0f/11.1y0U3YZdVQA9xjS/S5dQisPPONMTeDu\\\",\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.114480"], ["id", 388]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.4ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$8PWrVHxnPUy6chotN.XsbOv4LBmh/qLoV.ZjRHvUGA6vne4Pn1Jc."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.120984"], ["updated_at", "2024-07-13 15:13:46.120984"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$mR1M8jsLhcQ28lqrKuyl.OUP5BZ7BmxMTBT7FP9Hh1nEjY/EZaYn2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.132617"], ["updated_at", "2024-07-13 15:13:46.132617"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"uINMkO1_CisUBbvUTPLLKg\\\":{\\\"token\\\":\\\"$2a$04$GbXKwuHBBAA9aLUVE//8/uP7u23S.HH/7Yr/K/ndqe6ELUsrlLCgC\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.135276"], ["id", 390]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/390" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"390"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 390], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.1ms | Allocations: 667)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 390], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 390], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.2ms | ActiveRecord: 2.0ms | Allocations: 3628)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Za7AxTtW510s/kXZF1V4m.CZvxCVx1a6u.2.z0Dspuo57Gr1DWzhi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.156396"], ["updated_at", "2024-07-13 15:13:46.156396"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"bjkVem_qsNmFJxo7o0Nb4w\\\":{\\\"token\\\":\\\"$2a$04$0aCGdyjsNggVb4//vgJo5OP1aGHzi8sR7zYk.v/kUn3rWe2GFMqNC\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.159037"], ["id", 391]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$QxiliTNXAZ4hcqRv0U4kcu9VtJ9wZBxS1kqU4lpOq00/YAnsF5.bm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.171008"], ["updated_at", "2024-07-13 15:13:46.171008"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/392" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"392"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$NMQk5bOxL/4OoGL1k9HCDuRhFOT/SUNgoNMFMACRZ00SDSHv8EXlO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.180421"], ["updated_at", "2024-07-13 15:13:46.180421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"XT_mj4CdILfP5D2c7FhN_Q\\\":{\\\"token\\\":\\\"$2a$04$9aT/Yya84heT/iRsE6zVleDhkU51xuiNyf1gV3.wDVVf6QE.HQt3i\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.183001"], ["id", 393]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/393" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"393", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 393], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:13:46.190204"], ["id", 393]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 393], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 393], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.7ms | ActiveRecord: 2.4ms | Allocations: 2563)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$d7v.geVdF2o5rxkDE.y2puGp/2erWbo6HRw/4EVwWSGJoRj7CCTqO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.201511"], ["updated_at", "2024-07-13 15:13:46.201511"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-bvU-OLr11NeFfKtOaoxHg\\\":{\\\"token\\\":\\\"$2a$04$LkteYKO7RhfupHW0R/9Fp.Mu0IUF0IHXk6pDvG29zX6oNfjhHMavG\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.204167"], ["id", 394]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/394" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"394", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 394], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1150)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$XZ/kkFsgQHmIZQuVMZPC0.X2d6owSi14xtNTBVAAqE2y0hriyeksi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.216727"], ["updated_at", "2024-07-13 15:13:46.216727"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"FO4NkMRZ9odvUS4YS03n2Q\\\":{\\\"token\\\":\\\"$2a$04$hPnlxVHob3sUl2yQxnqgf.s8RWKWe840HMO7Tin4dyDUcBvmhCu1i\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.219280"], ["id", 395]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/395" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"395", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 395], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$MMB/FbfNqfxxoXTdvaGtR.UxCg9fewn7miDEFhbWOx.RYxf3T.N7u"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.231150"], ["updated_at", "2024-07-13 15:13:46.231150"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"lQuGfOkZig3rDQhNLbVh-A\\\":{\\\"token\\\":\\\"$2a$04$ZXprEUHHV1.nM1UkItzh3uU/ICv0mBoR8vLjFH5zNgflfDCCxhn8i\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.234099"], ["id", 396]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/396" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"396", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 396], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 917)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$zlUK/3Xrq87iQG5Dxfj53Oar3f9TjZWxXM3SPng2IGIpj28tEvgsC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.245650"], ["updated_at", "2024-07-13 15:13:46.245650"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"bk0zumicxohe6Dnd0FQYfw\\\":{\\\"token\\\":\\\"$2a$04$WdX00KgsFj2WbN6YM.UwtODHLFjmBhpzNiVWXsgSmM2aNaChvbIlO\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.248425"], ["id", 397]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$O1OIcmGoaZ3nXNeZw9gE8.nZJ3wmQUQ2Vr7hhuxOniyY5NVZ439Ia"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:13:46.252678"], ["updated_at", "2024-07-13 15:13:46.252678"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/397" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"397", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 397], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:13:46.259258"], ["id", 397]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1204)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$cdEK6Txn2O1V/gthG96wdeiH8yqXHhbtM1oTdTgVBItdpj9lmidVq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.266104"], ["updated_at", "2024-07-13 15:13:46.266104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"eBEcYHT74mm-1VMGcZ1K6Q\\\":{\\\"token\\\":\\\"$2a$04$Xgrlbzmc2re.pb7tp3vjUOm1pvkZQ6t9MfjiNrzwCf.Dp57SE9MhG\\\",\\\"expiry\\\":1722093226,\\\"updated_at\\\":\\\"2024-07-13T15:13:46Z\\\"}}\""], ["updated_at", "2024-07-13 15:13:46.269097"], ["id", 399]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"123", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 436)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$SjOCjkXDSo2rZsGfzJXULOudaHPftdPfx/Zv1Kt.aXotbZxYvDGQC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:13:46.280059"], ["updated_at", "2024-07-13 15:13:46.280059"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/400" for 127.0.0.1 at 2024-07-13 15:13:46 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"400", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 124)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$.uuxE875PGt3DqtmvPfJuexUaYEgj70jhj/K1iIA43CJpIX/W.Ely"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.267191"], ["updated_at", "2024-07-13 15:50:23.267191"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"VHjy07SRrsaBZ5lNUG3CcQ\\\":{\\\"token\\\":\\\"$2a$04$u2SHSzuELy2kW93BGJacpujAEqtcQDAARQfFXtscOOjR5I5krSbG2\\\",\\\"expiry\\\":1722095423}}\""], ["updated_at", "2024-07-13 15:50:23.270352"], ["id", 401]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 401], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 401], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"VHjy07SRrsaBZ5lNUG3CcQ\\\":{\\\"token\\\":\\\"$2a$04$eaVNuPuSRcRi1zKsRVWvL.l0kUUffvfGyRHmDzy69npYmMsEPPKGa\\\",\\\"expiry\\\":1722095423,\\\"previous_token\\\":\\\"$2a$04$u2SHSzuELy2kW93BGJacpujAEqtcQDAARQfFXtscOOjR5I5krSbG2\\\",\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.277118"], ["id", 401]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 8.6ms | Allocations: 17006)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 2033)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1729)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1732)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$1I6lA3BLYktWIn.8X87f9evAXVNg7VNEgRyB3SuiUBzs1cv02M85K"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.319226"], ["updated_at", "2024-07-13 15:50:23.319226"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1786)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gl0A/acCzyL7Lz9dhWf44eSGEKcCPcBuTyAFQz8/ARFfirp.dGIb2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.331977"], ["updated_at", "2024-07-13 15:50:23.331977"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"DV5iISdyRJVCnloZiFhClg\\\":{\\\"token\\\":\\\"$2a$04$mWI1llBwXSAxmnts4ADg6el3Y5KZkxDGGFwGJNkZxm5lvagJ7E8gO\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.334767"], ["id", 403]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 403]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 846)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 170)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$c3RnoInPgks6qY0ucQMsu.Kz.ovrOB.zZ93g/x0eZtGLsU9o2osba"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.354211"], ["updated_at", "2024-07-13 15:50:23.354211"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 404], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"9tcExIBZrQ9bSOYwj4QgNw\\\":{\\\"token\\\":\\\"$2a$04$chlQDGkDL0aC1w8p83ZT9OMbqWztksIfW8TppkOZs6mcLT72hUaX6\\\",\\\"expiry\\\":1722095423}}\""], ["updated_at", "2024-07-13 15:50:23.364078"], ["id", 404]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 404], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 404], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"9tcExIBZrQ9bSOYwj4QgNw\\\":{\\\"token\\\":\\\"$2a$04$666IejyMX6RTPsvr8yrhnOpYOFIS7kBxStQW8.z641avz.zkVk63O\\\",\\\"expiry\\\":1722095423,\\\"previous_token\\\":\\\"$2a$04$chlQDGkDL0aC1w8p83ZT9OMbqWztksIfW8TppkOZs6mcLT72hUaX6\\\",\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.370133"], ["id", 404]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3209)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$E0EPyHIb1u42CbQytZkEwehIPbDnYOGIvx6RGaN8M/G5sReGClIHW"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.376823"], ["updated_at", "2024-07-13 15:50:23.376823"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 596)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$kZ.ArfAd7xWNEfsmg7q48OPBqsq8pbRSktijZazxECaYSqUjZ1ftG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.389884"], ["updated_at", "2024-07-13 15:50:23.389884"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mPkNYVNkfb3YpYCAFuqcWQ\\\":{\\\"token\\\":\\\"$2a$04$Zmh0yxwB7idqTivtNG0XjOwTmZqNn6LqcCZvlm6dTJAMDTj.eFSdS\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.392320"], ["id", 406]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/406" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"406"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 406], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 137)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 667)
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 406], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 406], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 30.2ms | ActiveRecord: 2.1ms | Allocations: 3626)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.9ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$9HGihWuJu7BQW4plgAIbKOYrShyJbMa7TCoC6H029tCp9s/o9tTQG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.441955"], ["updated_at", "2024-07-13 15:50:23.441955"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"oG9-XSfCKqmI1UR4Szo6Rg\\\":{\\\"token\\\":\\\"$2a$04$EDwr97ixUdkzQiKWytCwxO7IFZGgF1f9SqpnToi8nETRdU7uTsTGC\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.445857"], ["id", 407]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Ol5Vxzfktf0nla/HIGEV8OMIdoOUUrY..IAJqX2FLMp7XgFyT7.wO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.458663"], ["updated_at", "2024-07-13 15:50:23.458663"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/408" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"408"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$5emuQsmnW5mZyNKO0yPU6uxvLYcyIJKtKbF0dgXVYzz.1dzvSXpzy"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.467961"], ["updated_at", "2024-07-13 15:50:23.467961"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"qxRghXjJM6lZmY6PsJSQrQ\\\":{\\\"token\\\":\\\"$2a$04$y/tvmpCVvAW9lx5Xgkspse4eV5eC8F/PW.JLVvyy3CHnwYjzFbc7y\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.470790"], ["id", 409]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/409" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"409", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 409], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:50:23.480149"], ["id", 409]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 409], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 409], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.8ms | ActiveRecord: 2.8ms | Allocations: 2563)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$a2WA96mUETuVZ.EHG4a1aOGx5okdK22sCVbMMKZ9ZMLhuYsl3VPfe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.492719"], ["updated_at", "2024-07-13 15:50:23.492719"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"uubjXNdW0h8daK50GxaaMg\\\":{\\\"token\\\":\\\"$2a$04$t8Oadur.biqYvTAKWS60CuI7b0XHAZNSak1Yh2Z8zoAfUwQdmIHMO\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.495305"], ["id", 410]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/410" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"410", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 410], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 1150)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$cpsyrfcmeBR6QHsKoCa3xe4LJq8J3qTq/kYhW.ehLbiomJNnZY6pm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.509820"], ["updated_at", "2024-07-13 15:50:23.509820"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"4M2RgkS_-LC5bN8nxyY3-g\\\":{\\\"token\\\":\\\"$2a$04$EAEDc8KkU4zRYJEbWM031u7eAjG7WGftaEqTxjsGp7./lDyggtsPG\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.512959"], ["id", 411]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/411" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"411", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 411], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 1128)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$apVcFdyRJczDl8UFDkcdm.C6q08zDQTXsBdBKIh8OOwEgQunkjAAq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.525356"], ["updated_at", "2024-07-13 15:50:23.525356"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"L65p74euElLwOLBlfSuL_w\\\":{\\\"token\\\":\\\"$2a$04$GIaNk/pFHmMA835ru0TMp.fMCRoZAtYVNo7IcqX0Ekxdem0Ol1piC\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.528139"], ["id", 412]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/412" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"412", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 412], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 917)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$xBRdkigT.kQzMgPb2NTo..ToygECbcr0VyD74Ka0APvS04HSWqxyG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.541277"], ["updated_at", "2024-07-13 15:50:23.541277"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"uLszvROLTwyz2itYcPPy8g\\\":{\\\"token\\\":\\\"$2a$04$kBEl3vggELCbWL5AdONjmuU7rf7kfiFsIWgsRHvYw2/tzFRDYxq6O\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.544375"], ["id", 413]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$s8eKlGuK6Dw1Pd6ztMRTbu.jsYHA6ALoa33CWJ5CIOCb8Ky3C0I/C"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:50:23.547850"], ["updated_at", "2024-07-13 15:50:23.547850"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/413" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"413", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 413], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.7ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:50:23.554654"], ["id", 413]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1204)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dBV.Y9LARVes7e6Y1.R3ku7x2yA6A6l3UAH59AmgKPTTUwFK7SS0a"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.560415"], ["updated_at", "2024-07-13 15:50:23.560415"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"US71LuCTGOjcxxamNAo1cg\\\":{\\\"token\\\":\\\"$2a$04$Bi8CGgzW.6rtbqr3NCOUoOPRlr7mgNVR2D3hRrcsjzhE0ZIJpXs5y\\\",\\\"expiry\\\":1722095423,\\\"updated_at\\\":\\\"2024-07-13T15:50:23Z\\\"}}\""], ["updated_at", "2024-07-13 15:50:23.563211"], ["id", 415]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"123", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 436)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$jg.K5gA1Ek1OaK.ImgqgvO9S5Vs17Z6L8dNMZwivoiVtWWPGfjVtu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:50:23.576229"], ["updated_at", "2024-07-13 15:50:23.576229"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/416" for 127.0.0.1 at 2024-07-13 15:50:23 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"416", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 124)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:53:26 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$dchldOKaU2VtwzrsKa/HQ.0OhWJQ8yAGxMVu1mut78txYbrNUcH.i"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:26.916703"], ["updated_at", "2024-07-13 15:53:26.916703"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mIIbQC9pR784WzzNcdfF7Q\\\":{\\\"token\\\":\\\"$2a$04$G/uLGD/uepsf8M7zap.UauunmW.Qrf11flbpD5F4O.8TokA5aM786\\\",\\\"expiry\\\":1722095606}}\""], ["updated_at", "2024-07-13 15:53:26.920051"], ["id", 417]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 417], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 417], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"mIIbQC9pR784WzzNcdfF7Q\\\":{\\\"token\\\":\\\"$2a$04$JCcPaPj28RfnLZnu8YY1fuv3APh784iKB0fOihCaodPkUOEXrzOFC\\\",\\\"expiry\\\":1722095606,\\\"previous_token\\\":\\\"$2a$04$G/uLGD/uepsf8M7zap.UauunmW.Qrf11flbpD5F4O.8TokA5aM786\\\",\\\"updated_at\\\":\\\"2024-07-13T15:53:26Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:26.926227"], ["id", 417]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 5.4ms | Allocations: 5417)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:53:26 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1801)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:53:26 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1738)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:53:26 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1739)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ICnqE.n4e8q6o4auZdD8FuelxJqtgas04vQq/n5GZDTEYG5Nt/wqO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:26.966325"], ["updated_at", "2024-07-13 15:53:26.966325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:53:26 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1798)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$PY6VzLGpgfzYSv5p6mIYieycsQZAejGfMaKYGt.VMKbToH0LGHs22"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:26.978820"], ["updated_at", "2024-07-13 15:53:26.978820"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"1TENU9K9jVvuxh4sCsMbhw\\\":{\\\"token\\\":\\\"$2a$04$HLCkrvKIm66rOvThmJ.5g.eVPPXFAw7.H/.klyrLFZbaPyqTXZbu.\\\",\\\"expiry\\\":1722095606,\\\"updated_at\\\":\\\"2024-07-13T15:53:26Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:26.981909"], ["id", 419]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:53:26 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 419]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 847)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:53:26 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 172)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$s583no0vk7/odAu3rRSk2.h5NOA1iJRBO2pDuhVK0LNlrzPrPmDg2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.001996"], ["updated_at", "2024-07-13 15:53:27.001996"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 420], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"_o3HOUr-81tRjktGhsXo1A\\\":{\\\"token\\\":\\\"$2a$04$kLPvqMkNTDI7iJzuJouIcu0CjWzl/qRCpcclf0AFL2Mo3TgCcLkdK\\\",\\\"expiry\\\":1722095607}}\""], ["updated_at", "2024-07-13 15:53:27.011927"], ["id", 420]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 420], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 420], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"_o3HOUr-81tRjktGhsXo1A\\\":{\\\"token\\\":\\\"$2a$04$lD1FKLR.Evsh78RTzmQz4uxnuF2ieA/tjF5LCy8nyE6uDi.d/3rlO\\\",\\\"expiry\\\":1722095607,\\\"previous_token\\\":\\\"$2a$04$kLPvqMkNTDI7iJzuJouIcu0CjWzl/qRCpcclf0AFL2Mo3TgCcLkdK\\\",\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.017652"], ["id", 420]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 3242)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$pUdeLNo5xMF.cxRsSqwXi..UkURFgfeVrq7s9kzwaiOMMIX0IJ6J."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.024822"], ["updated_at", "2024-07-13 15:53:27.024822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 606)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$5lxtjJoWBv43RlHa.pPBbulzneg/0mEytuDcuppy8Nm.Gk.9cA2.G"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.036343"], ["updated_at", "2024-07-13 15:53:27.036343"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"hSAi-ORL5T9Md3gWXAJG2Q\\\":{\\\"token\\\":\\\"$2a$04$2ZrjtUz80BI1OeqgN3pxCeXzs29xm5oNqidUPV2sr2.zzoAfPNXRm\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.038872"], ["id", 422]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/422" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"422"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 422], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 136)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 666)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 422], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 422], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.1ms | ActiveRecord: 2.0ms | Allocations: 3639)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$AIh0.s5FJQyj9nxhHV/PUell4yQVFEFiDx4T5PR0XD5CNR0lRv7K2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.059769"], ["updated_at", "2024-07-13 15:53:27.059769"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"JgK1SziiMHKzUnOadQnM-Q\\\":{\\\"token\\\":\\\"$2a$04$ToGdPfPkq51xZrz1d/lLzONcaYtSFDGwyHvKjz1Ey3TKhqcbDXsuK\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.063109"], ["id", 423]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$PNQhJxPT5VrslLX/fbq/ROjuH68T8IyV5KQulekzOWKolNQ9XcOSG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.074581"], ["updated_at", "2024-07-13 15:53:27.074581"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/424" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"424"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Sdcmd0PWNCED6ryRv0W47Or0Wi5hF7ujp0xEhTIZB.rJxLuld/vaO"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.082882"], ["updated_at", "2024-07-13 15:53:27.082882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"_26BlwcVWe4CGMYtXRqnuw\\\":{\\\"token\\\":\\\"$2a$04$5BFKSizSIi5svgQozK07he2I63WxcYUqTyU99Up3ECcIs1D7Ytd2e\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.085597"], ["id", 425]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/425" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"425", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 425], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:53:27.094068"], ["id", 425]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.5ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 425], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 425], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 2.7ms | Allocations: 2587)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$0QcjbQ8Zbu3Bn2awAWrgBuojwkC5zERvoA51a1OWGmfO9ry4VEBy."], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.105355"], ["updated_at", "2024-07-13 15:53:27.105355"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"9Emrq-6d7quvaJTP5Xad3g\\\":{\\\"token\\\":\\\"$2a$04$lzDhU/BULu7E.MwRsiTQk.HhJWCWvDRrGsX.7jSTKzA9PS5vcIXKS\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.107936"], ["id", 426]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/426" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"426", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 426], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1155)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$hmaIFLf0icAuBZ5UY37IMO12ItR.Us1LMJBYzSfGhTDOXmfqYx9RG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.144537"], ["updated_at", "2024-07-13 15:53:27.144537"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"-nH500iQR47K8ai1UwtvBQ\\\":{\\\"token\\\":\\\"$2a$04$4zy5FG4bBNQfWeYiTv.ytOmjwoWkjCFFH00wTWJ/sYdyBmleVMvv2\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.147507"], ["id", 427]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/427" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"427", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 427], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1132)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ljBpRVkkyJPRyw33KE6sd./in6b6byuhEZ.FwP3aJnuJJrvbIed9O"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.161390"], ["updated_at", "2024-07-13 15:53:27.161390"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"kWMPFPJLAUV92-NPIJREmw\\\":{\\\"token\\\":\\\"$2a$04$t0R1ba3/KNkLlY3esinVuumGoYbDAEPL/0a0uqLJjQ6LEE.uDNm2G\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.163916"], ["id", 428]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/428" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"428", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 428], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 922)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2ZSMe0MevRAaGZb.FtcJieg0HJZ.xMu4OmHfQPxfUl/jmXCQACE56"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.176084"], ["updated_at", "2024-07-13 15:53:27.176084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"ifQwNRQ3W-PV4qznW3scyA\\\":{\\\"token\\\":\\\"$2a$04$5slhhCPSZGkoQLowHjxYNO27Y3QyKkCvK3ndokBHPwpA5693AfgLS\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.178680"], ["id", 429]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$NGxt/uGTCLwwU4zPI.cSsexb9lBm8WNxQcqM2/vVXuJXpqIqZkTge"], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:53:27.183375"], ["updated_at", "2024-07-13 15:53:27.183375"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/429" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"429", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 429], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.9ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:53:27.191705"], ["id", 429]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1210)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$GKXLQv/8jGGOmh4ET5k88OfcngZnht.F87xbQdKLyBz2laFYdEHyi"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.198407"], ["updated_at", "2024-07-13 15:53:27.198407"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"VCelFOZgF856SY4b9B7stA\\\":{\\\"token\\\":\\\"$2a$04$D.3mAtvq3qQKXjxq77nuK.nKVIVKqeGuvyd1evo8ttHHpvv2Hxi5O\\\",\\\"expiry\\\":1722095607,\\\"updated_at\\\":\\\"2024-07-13T15:53:27Z\\\"}}\""], ["updated_at", "2024-07-13 15:53:27.201051"], ["id", 431]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"123", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 436)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$VQlB6omff13udVDsnFyyReN6L2wj9jr4UVrr6BAR5K/73PYW51BNC"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:53:27.211364"], ["updated_at", "2024-07-13 15:53:27.211364"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/432" for 127.0.0.1 at 2024-07-13 15:53:27 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"432", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 124)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCustomer Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (1.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2m/nfvXDlmvgi5O59PBEz.sumMSdoZQ23mRoRNlhWEl33MsiptTlK"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.691810"], ["updated_at", "2024-07-13 15:57:51.691810"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.6ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"x6sdSjX9HP3_DMOYYosIYA\\\":{\\\"token\\\":\\\"$2a$04$Usy0Eg/ul1tLXHCw.MRmeOU/EmtbDNmfaeFZErRziBKRYxqaQdhpO\\\",\\\"expiry\\\":1722095871}}\""], ["updated_at", "2024-07-13 15:57:51.696905"], ["id", 433]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 433], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 433], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"x6sdSjX9HP3_DMOYYosIYA\\\":{\\\"token\\\":\\\"$2a$04$vwlYBNxVUOz4gf5Zd9uiMuvXFfii0uFJEs.XVJy/5ILyRxQRrfwD2\\\",\\\"expiry\\\":1722095871,\\\"previous_token\\\":\\\"$2a$04$Usy0Eg/ul1tLXHCw.MRmeOU/EmtbDNmfaeFZErRziBKRYxqaQdhpO\\\",\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.703821"], ["id", 433]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 6.7ms | Allocations: 5418)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1801)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE "customers"."email" IS NULL AND "customers"."provider" = $1 LIMIT $2[0m  [["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1738)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "registration"=>{"name"=>"John", "email"=>"john@test.test"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1739)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$OBH8QGS0xty7hfYKcmw0yuZ4YpWbUO44zJWXa1kfmy/6uCvuyKZgm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.743590"], ["updated_at", "2024-07-13 15:57:51.743590"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]", "registration"=>{"name"=>"John", "email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
[31mUnpermitted parameter: :registration[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1798)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gfrB9wHOhBulsH6qjfNCIugeEKSkFVXQm9lJvsYgK1R3aahOhTl/a"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.756910"], ["updated_at", "2024-07-13 15:57:51.756910"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"sQB9N1zshA2zl4mGTcIZog\\\":{\\\"token\\\":\\\"$2a$04$JrCJL.k0KcUM0nm56.UrK.ZGCrzfHqsQhDDizN3Srywmp4zxFy5qi\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.759652"], ["id", 435]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.3ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 435]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 847)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/api/v1/customer" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::RegistrationsController#destroy as JSON
Completed 404 Not Found in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 172)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$ImN7nsE3BXn2nz4fc6eB/OPrjGKcluWQLUugH3zNOdkBpp27c7Zqe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.778913"], ["updated_at", "2024-07-13 15:57:51.778913"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 436], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.8ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"IRjoaI9fg5gbZi9cajN8ZA\\\":{\\\"token\\\":\\\"$2a$04$OJ6Cdhkw7joiD2bLmm3a.umftb2ZD6j4QpLEceFG/09FlpuZSvbhG\\\",\\\"expiry\\\":1722095871}}\""], ["updated_at", "2024-07-13 15:57:51.791160"], ["id", 436]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 436], ["LIMIT", 1]]
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"IRjoaI9fg5gbZi9cajN8ZA\\\":{\\\"token\\\":\\\"$2a$04$CDRMhwOUsz1WVEu/p6faoOfED6qUllAwxWc/ZYEOtBkixxrMCTDwe\\\",\\\"expiry\\\":1722095871,\\\"previous_token\\\":\\\"$2a$04$OJ6Cdhkw7joiD2bLmm3a.umftb2ZD6j4QpLEceFG/09FlpuZSvbhG\\\",\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.798009"], ["id", 436]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 3.7ms | Allocations: 3242)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$YBON5CJqj6GMUhtwGHTpke39tP20lFSKVyDJ29ZPXMELiqGj7J9.y"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.804869"], ["updated_at", "2024-07-13 15:57:51.804869"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/customer/sign_in" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by DeviseTokenAuth::SessionsController#create as HTML
  Parameters: {"email"=>"john@test.test", "password"=>"[FILTERED]", "session"=>{"email"=>"john@test.test", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = $1 AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
[31mUnpermitted parameter: :session[0m
[31mUnpermitted parameter: :session[0m
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 606)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$2bOVbAi867mSLoKx8NPaXu73w1/.BNwzZWlxax5ZUrslAVAS78opu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.816427"], ["updated_at", "2024-07-13 15:57:51.816427"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"gnxe2P4NSyp9LZuHtislvA\\\":{\\\"token\\\":\\\"$2a$04$2xTje3K1O1z4Y2VArFAeDu9LlwD0HsIIQZ/OneCGs7rDWV8bwW9O6\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.819836"], ["id", 438]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/438" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"438"}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 438], ["LIMIT", 1]]
  Rendering api/v1/customers/show.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.2ms | Allocations: 136)
  Rendered api/v1/customers/show.json.jbuilder (Duration: 1.0ms | Allocations: 666)
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 438], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 438], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 2.3ms | ActiveRecord: 2.0ms | Allocations: 3640)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$4rEFxODxE0XRxfYQ3RWkkuCTQSEzIJQ2fKzGz2HP.Ef7FZKxzWchq"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.841318"], ["updated_at", "2024-07-13 15:57:51.841318"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"AfBFVwsW_C2epv21t6xO6Q\\\":{\\\"token\\\":\\\"$2a$04$FI/xTxZB/b9RK1xIhGiyx.PlvDwRBk8b9DjdOZv.D0SOwWMhiUiLO\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.844187"], ["id", 439]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"123"}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 467)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$gQMHT2.33BuNOi20Cfnl4e.ExJ5tDYSxkCp.oYXR10AypCA5kVDiu"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.856627"], ["updated_at", "2024-07-13 15:57:51.856627"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/customers/440" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#show as JSON
  Parameters: {"id"=>"440"}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 138)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$q3w0l.3D3KxODF0EgUqZf.qzOurNLmPm/EwIVd4Ov08FbHvWjR.nm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.865406"], ["updated_at", "2024-07-13 15:57:51.865406"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Cxnicd-LnG_gPJcV7-7iOg\\\":{\\\"token\\\":\\\"$2a$04$CCqDBPqe96lFmiwMU2wz.ucUCXOr5F8QkNqKkffN2mwzYgoOyr6iG\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.868125"], ["id", 441]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/441" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"441", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 441], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "name" = $2, "email" = $3, "updated_at" = $4 WHERE "customers"."id" = $5[0m  [["uid", "johnupgraded@test.test"], ["name", "John upgraded"], ["email", "johnupgraded@test.test"], ["updated_at", "2024-07-13 15:57:51.876078"], ["id", 441]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering api/v1/customers/update.json.jbuilder
  Rendered api/v1/customers/_customer.json.jbuilder (Duration: 0.1ms | Allocations: 25)
  Rendered api/v1/customers/update.json.jbuilder (Duration: 0.4ms | Allocations: 209)
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 441], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[37mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 441], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.7ms | ActiveRecord: 3.3ms | Allocations: 2587)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$Wpf8Gh8IFbD0Bva1keSnW.op4PgQI/vy1Atv31ulsXYF6CV/BN1qe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.889180"], ["updated_at", "2024-07-13 15:57:51.889180"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"9YOi-Dyntku9HyzebfqjdA\\\":{\\\"token\\\":\\\"$2a$04$8p0eusuYQVHK06ZB6/Hd5uAb97XoTdzqbmUqex.mZwLIFRbQ28X0W\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.891730"], ["id", 442]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/442" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"", "email"=>"john@test.test", "id"=>"442", "customer"=>{"name"=>"", "email"=>"john@test.test"}}
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1154)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$MyajNE8p3ODce8YHqky7P.6mm1t/N5W08EqrXL25axBGOVSnBdFKG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.903612"], ["updated_at", "2024-07-13 15:57:51.903612"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"iHbik20sT6KbABXKA1NNnA\\\":{\\\"token\\\":\\\"$2a$04$/0GaJq5lsmNSAXUHHp8v7OG0SrIJUfqb4KOjcY.P1ixKMC33c0B.G\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.906276"], ["id", 443]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/443" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"", "id"=>"443", "customer"=>{"name"=>"John", "email"=>""}}
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 443], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 1132)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$/J2Y4WEUBFRQbJDph63n6eCgnENWmBtt2huMbR5u4AD81XQBeCuiG"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.919715"], ["updated_at", "2024-07-13 15:57:51.919715"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.3ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"l74L681FurFnWcyHi0osng\\\":{\\\"token\\\":\\\"$2a$04$1d0oo5fjpu.c3wS12VV4ze76Nq.8jiNDcThDimochy.9C.2kFwe.6\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.922516"], ["id", 444]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/444" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"invalid", "id"=>"444", "customer"=>{"name"=>"John", "email"=>"invalid"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 444], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 921)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$64Gn3PoabJNoOYHD/VrLTeAEyND9dVgwVfbXWZNImABEzfdM3PBZe"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.933823"], ["updated_at", "2024-07-13 15:57:51.933823"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.4ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"Oh2qLhsgmMQSK12f6vPMqA\\\":{\\\"token\\\":\\\"$2a$04$r5SKE1An1KjMDwY.FTPt3O1uOjSYIg2.IkCnggLbyevV1GNb13a6y\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.936359"], ["id", 445]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "test@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "test@test.test"], ["encrypted_password", "$2a$04$Cq.TgDfYpa5Cd8kzBxkTKuBMzvYsjxzwMT58fbqfjJP27cE40ijD."], ["name", "John"], ["email", "test@test.test"], ["created_at", "2024-07-13 15:57:51.940328"], ["updated_at", "2024-07-13 15:57:51.940328"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/445" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John", "email"=>"test@test.test", "id"=>"445", "customer"=>{"name"=>"John", "email"=>"test@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 445], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :customer[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (1.0ms)[0m  [1m[33mUPDATE "customers" SET "uid" = $1, "email" = $2, "updated_at" = $3 WHERE "customers"."id" = $4[0m  [["uid", "test@test.test"], ["email", "test@test.test"], ["updated_at", "2024-07-13 15:57:51.970346"], ["id", 445]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1211)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$k0Az1n4x96EKsqF3S88bNuDuGEfBep8IUeu2UKyDGE6B/DiuufT.2"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.977567"], ["updated_at", "2024-07-13 15:57:51.977567"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Update (0.5ms)[0m  [1m[33mUPDATE "customers" SET "tokens" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["tokens", "\"{\\\"jTZGAZL1ELQ-Ub398hBF4Q\\\":{\\\"token\\\":\\\"$2a$04$cFfFvyv1gIh3UyRIhok5iOJkWoPGAOEJw06i/Psy8ytXJRRGsIaxm\\\",\\\"expiry\\\":1722095871,\\\"updated_at\\\":\\\"2024-07-13T15:57:51Z\\\"}}\""], ["updated_at", "2024-07-13 15:57:51.980255"], ["id", 447]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/123" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"123", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."uid" = $1 LIMIT $2[0m  [["uid", "john@test.test"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 436)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "customers" WHERE LOWER("customers"."email") = LOWER($1) AND "customers"."provider" = $2 LIMIT $3[0m  [["email", "john@test.test"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("uid", "encrypted_password", "name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["uid", "john@test.test"], ["encrypted_password", "$2a$04$danavDhtHlKQUEEGjwLPeuvh1befiaQDxkRUr6MeI.7IGC1HvmmKm"], ["name", "John"], ["email", "john@test.test"], ["created_at", "2024-07-13 15:57:51.992053"], ["updated_at", "2024-07-13 15:57:51.992053"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/api/v1/customers/448" for 127.0.0.1 at 2024-07-13 15:57:51 +0000
Processing by Api::V1::CustomersController#update as JSON
  Parameters: {"name"=>"John upgraded", "email"=>"johnupgraded@test.test", "id"=>"448", "customer"=>{"name"=>"John upgraded", "email"=>"johnupgraded@test.test"}}
Filter chain halted as :authenticate_customer! rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 124)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
